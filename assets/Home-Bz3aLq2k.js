var Fs=Object.defineProperty;var Us=(e,t,r)=>t in e?Fs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Yr=(e,t,r)=>Us(e,typeof t!="symbol"?t+"":t,r);import{d as xt,c as pt,r as Hn,o as ge,a as Ee,w as Bs,b as me,e as er,_ as Et,g as Ns,f as js,h as De,i as gt,v as Ws,j as Vs,m as Gs,k as Ys,l as Hs,n as Ks,p as Kt,q as wt,u as Ae,t as Ne,s as zs,x as $s,y as Xs,z as Kn,A as zn,B as Js,C as Zs,D as Qs,E as qs,F as pi,G as mi,H as ea,I as ta,J as ra,K as dr,L as fr,M as na}from"./index-BMifQuuq.js";function vi(e,t){return function(){return e.apply(t,arguments)}}const{toString:ia}=Object.prototype,{getPrototypeOf:vn}=Object,br=(e=>t=>{const r=ia.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Xe=e=>(e=e.toLowerCase(),t=>br(t)===e),Rr=e=>t=>typeof t===e,{isArray:Bt}=Array,Xt=Rr("undefined");function sa(e){return e!==null&&!Xt(e)&&e.constructor!==null&&!Xt(e.constructor)&&je(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gi=Xe("ArrayBuffer");function aa(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&gi(e.buffer),t}const oa=Rr("string"),je=Rr("function"),yi=Rr("number"),Or=e=>e!==null&&typeof e=="object",la=e=>e===!0||e===!1,cr=e=>{if(br(e)!=="object")return!1;const t=vn(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ua=Xe("Date"),da=Xe("File"),fa=Xe("Blob"),ca=Xe("FileList"),ha=e=>Or(e)&&je(e.pipe),_a=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||je(e.append)&&((t=br(e))==="formdata"||t==="object"&&je(e.toString)&&e.toString()==="[object FormData]"))},pa=Xe("URLSearchParams"),[ma,va,ga,ya]=["ReadableStream","Request","Response","Headers"].map(Xe),xa=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tr(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Bt(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const _=r?Object.getOwnPropertyNames(e):Object.keys(e),g=_.length;let E;for(n=0;n<g;n++)E=_[n],t.call(null,e[E],E,e)}}function xi(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const Ei=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Si=e=>!Xt(e)&&e!==Ei;function tn(){const{caseless:e}=Si(this)&&this||{},t={},r=(n,i)=>{const _=e&&xi(t,i)||i;cr(t[_])&&cr(n)?t[_]=tn(t[_],n):cr(n)?t[_]=tn({},n):Bt(n)?t[_]=n.slice():t[_]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&tr(arguments[n],r);return t}const Ea=(e,t,r,{allOwnKeys:n}={})=>(tr(t,(i,_)=>{r&&je(i)?e[_]=vi(i,r):e[_]=i},{allOwnKeys:n}),e),Sa=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),wa=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},ba=(e,t,r,n)=>{let i,_,g;const E={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),_=i.length;_-- >0;)g=i[_],(!n||n(g,e,t))&&!E[g]&&(t[g]=e[g],E[g]=!0);e=r!==!1&&vn(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Ra=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Oa=e=>{if(!e)return null;if(Bt(e))return e;let t=e.length;if(!yi(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Aa=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&vn(Uint8Array)),La=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const _=i.value;t.call(e,_[0],_[1])}},Da=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Ma=Xe("HTMLFormElement"),Ta=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),$n=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Ca=Xe("RegExp"),wi=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};tr(r,(i,_)=>{let g;(g=t(i,_,e))!==!1&&(n[_]=g||i)}),Object.defineProperties(e,n)},Pa=e=>{wi(e,(t,r)=>{if(je(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(je(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ka=(e,t)=>{const r={},n=i=>{i.forEach(_=>{r[_]=!0})};return Bt(e)?n(e):n(String(e).split(t)),r},Ia=()=>{},Fa=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Hr="abcdefghijklmnopqrstuvwxyz",Xn="0123456789",bi={DIGIT:Xn,ALPHA:Hr,ALPHA_DIGIT:Hr+Hr.toUpperCase()+Xn},Ua=(e=16,t=bi.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function Ba(e){return!!(e&&je(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Na=e=>{const t=new Array(10),r=(n,i)=>{if(Or(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const _=Bt(n)?[]:{};return tr(n,(g,E)=>{const S=r(g,i+1);!Xt(S)&&(_[E]=S)}),t[i]=void 0,_}}return n};return r(e,0)},ja=Xe("AsyncFunction"),Wa=e=>e&&(Or(e)||je(e))&&je(e.then)&&je(e.catch),P={isArray:Bt,isArrayBuffer:gi,isBuffer:sa,isFormData:_a,isArrayBufferView:aa,isString:oa,isNumber:yi,isBoolean:la,isObject:Or,isPlainObject:cr,isReadableStream:ma,isRequest:va,isResponse:ga,isHeaders:ya,isUndefined:Xt,isDate:ua,isFile:da,isBlob:fa,isRegExp:Ca,isFunction:je,isStream:ha,isURLSearchParams:pa,isTypedArray:Aa,isFileList:ca,forEach:tr,merge:tn,extend:Ea,trim:xa,stripBOM:Sa,inherits:wa,toFlatObject:ba,kindOf:br,kindOfTest:Xe,endsWith:Ra,toArray:Oa,forEachEntry:La,matchAll:Da,isHTMLForm:Ma,hasOwnProperty:$n,hasOwnProp:$n,reduceDescriptors:wi,freezeMethods:Pa,toObjectSet:ka,toCamelCase:Ta,noop:Ia,toFiniteNumber:Fa,findKey:xi,global:Ei,isContextDefined:Si,ALPHABET:bi,generateString:Ua,isSpecCompliantForm:Ba,toJSONObject:Na,isAsyncFn:ja,isThenable:Wa};function q(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}P.inherits(q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ri=q.prototype,Oi={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Oi[e]={value:e}});Object.defineProperties(q,Oi);Object.defineProperty(Ri,"isAxiosError",{value:!0});q.from=(e,t,r,n,i,_)=>{const g=Object.create(Ri);return P.toFlatObject(e,g,function(S){return S!==Error.prototype},E=>E!=="isAxiosError"),q.call(g,e.message,t,r,n,i),g.cause=e,g.name=e.name,_&&Object.assign(g,_),g};const Va=null;function rn(e){return P.isPlainObject(e)||P.isArray(e)}function Ai(e){return P.endsWith(e,"[]")?e.slice(0,-2):e}function Jn(e,t,r){return e?e.concat(t).map(function(i,_){return i=Ai(i),!r&&_?"["+i+"]":i}).join(r?".":""):t}function Ga(e){return P.isArray(e)&&!e.some(rn)}const Ya=P.toFlatObject(P,{},null,function(t){return/^is[A-Z]/.test(t)});function Ar(e,t,r){if(!P.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=P.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(u,c){return!P.isUndefined(c[u])});const n=r.metaTokens,i=r.visitor||b,_=r.dots,g=r.indexes,S=(r.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(t);if(!P.isFunction(i))throw new TypeError("visitor must be a function");function w(a){if(a===null)return"";if(P.isDate(a))return a.toISOString();if(!S&&P.isBlob(a))throw new q("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(a)||P.isTypedArray(a)?S&&typeof Blob=="function"?new Blob([a]):Buffer.from(a):a}function b(a,u,c){let h=a;if(a&&!c&&typeof a=="object"){if(P.endsWith(u,"{}"))u=n?u:u.slice(0,-2),a=JSON.stringify(a);else if(P.isArray(a)&&Ga(a)||(P.isFileList(a)||P.endsWith(u,"[]"))&&(h=P.toArray(a)))return u=Ai(u),h.forEach(function(p,m){!(P.isUndefined(p)||p===null)&&t.append(g===!0?Jn([u],m,_):g===null?u:u+"[]",w(p))}),!1}return rn(a)?!0:(t.append(Jn(c,u,_),w(a)),!1)}const o=[],d=Object.assign(Ya,{defaultVisitor:b,convertValue:w,isVisitable:rn});function s(a,u){if(!P.isUndefined(a)){if(o.indexOf(a)!==-1)throw Error("Circular reference detected in "+u.join("."));o.push(a),P.forEach(a,function(h,f){(!(P.isUndefined(h)||h===null)&&i.call(t,h,P.isString(f)?f.trim():f,u,d))===!0&&s(h,u?u.concat(f):[f])}),o.pop()}}if(!P.isObject(e))throw new TypeError("data must be an object");return s(e),t}function Zn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function gn(e,t){this._pairs=[],e&&Ar(e,this,t)}const Li=gn.prototype;Li.append=function(t,r){this._pairs.push([t,r])};Li.toString=function(t){const r=t?function(n){return t.call(this,n,Zn)}:Zn;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Ha(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Di(e,t,r){if(!t)return e;const n=r&&r.encode||Ha,i=r&&r.serialize;let _;if(i?_=i(t,r):_=P.isURLSearchParams(t)?t.toString():new gn(t,r).toString(n),_){const g=e.indexOf("#");g!==-1&&(e=e.slice(0,g)),e+=(e.indexOf("?")===-1?"?":"&")+_}return e}class Qn{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){P.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Mi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ka=typeof URLSearchParams<"u"?URLSearchParams:gn,za=typeof FormData<"u"?FormData:null,$a=typeof Blob<"u"?Blob:null,Xa={isBrowser:!0,classes:{URLSearchParams:Ka,FormData:za,Blob:$a},protocols:["http","https","file","blob","url","data"]},yn=typeof window<"u"&&typeof document<"u",Ja=(e=>yn&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),Za=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qa=yn&&window.location.href||"http://localhost",qa=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yn,hasStandardBrowserEnv:Ja,hasStandardBrowserWebWorkerEnv:Za,origin:Qa},Symbol.toStringTag,{value:"Module"})),Ke={...qa,...Xa};function eo(e,t){return Ar(e,new Ke.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,_){return Ke.isNode&&P.isBuffer(r)?(this.append(n,r.toString("base64")),!1):_.defaultVisitor.apply(this,arguments)}},t))}function to(e){return P.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ro(e){const t={},r=Object.keys(e);let n;const i=r.length;let _;for(n=0;n<i;n++)_=r[n],t[_]=e[_];return t}function Ti(e){function t(r,n,i,_){let g=r[_++];if(g==="__proto__")return!0;const E=Number.isFinite(+g),S=_>=r.length;return g=!g&&P.isArray(i)?i.length:g,S?(P.hasOwnProp(i,g)?i[g]=[i[g],n]:i[g]=n,!E):((!i[g]||!P.isObject(i[g]))&&(i[g]=[]),t(r,n,i[g],_)&&P.isArray(i[g])&&(i[g]=ro(i[g])),!E)}if(P.isFormData(e)&&P.isFunction(e.entries)){const r={};return P.forEachEntry(e,(n,i)=>{t(to(n),i,r,0)}),r}return null}function no(e,t,r){if(P.isString(e))try{return(t||JSON.parse)(e),P.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const rr={transitional:Mi,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,_=P.isObject(t);if(_&&P.isHTMLForm(t)&&(t=new FormData(t)),P.isFormData(t))return i?JSON.stringify(Ti(t)):t;if(P.isArrayBuffer(t)||P.isBuffer(t)||P.isStream(t)||P.isFile(t)||P.isBlob(t)||P.isReadableStream(t))return t;if(P.isArrayBufferView(t))return t.buffer;if(P.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let E;if(_){if(n.indexOf("application/x-www-form-urlencoded")>-1)return eo(t,this.formSerializer).toString();if((E=P.isFileList(t))||n.indexOf("multipart/form-data")>-1){const S=this.env&&this.env.FormData;return Ar(E?{"files[]":t}:t,S&&new S,this.formSerializer)}}return _||i?(r.setContentType("application/json",!1),no(t)):t}],transformResponse:[function(t){const r=this.transitional||rr.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(P.isResponse(t)||P.isReadableStream(t))return t;if(t&&P.isString(t)&&(n&&!this.responseType||i)){const g=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(E){if(g)throw E.name==="SyntaxError"?q.from(E,q.ERR_BAD_RESPONSE,this,null,this.response):E}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ke.classes.FormData,Blob:Ke.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],e=>{rr.headers[e]={}});const io=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),so=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(g){i=g.indexOf(":"),r=g.substring(0,i).trim().toLowerCase(),n=g.substring(i+1).trim(),!(!r||t[r]&&io[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},qn=Symbol("internals");function Gt(e){return e&&String(e).trim().toLowerCase()}function hr(e){return e===!1||e==null?e:P.isArray(e)?e.map(hr):String(e)}function ao(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const oo=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Kr(e,t,r,n,i){if(P.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!P.isString(t)){if(P.isString(n))return t.indexOf(n)!==-1;if(P.isRegExp(n))return n.test(t)}}function lo(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function uo(e,t){const r=P.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,_,g){return this[n].call(this,t,i,_,g)},configurable:!0})})}class Ce{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function _(E,S,w){const b=Gt(S);if(!b)throw new Error("header name must be a non-empty string");const o=P.findKey(i,b);(!o||i[o]===void 0||w===!0||w===void 0&&i[o]!==!1)&&(i[o||S]=hr(E))}const g=(E,S)=>P.forEach(E,(w,b)=>_(w,b,S));if(P.isPlainObject(t)||t instanceof this.constructor)g(t,r);else if(P.isString(t)&&(t=t.trim())&&!oo(t))g(so(t),r);else if(P.isHeaders(t))for(const[E,S]of t.entries())_(S,E,n);else t!=null&&_(r,t,n);return this}get(t,r){if(t=Gt(t),t){const n=P.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return ao(i);if(P.isFunction(r))return r.call(this,i,n);if(P.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Gt(t),t){const n=P.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Kr(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function _(g){if(g=Gt(g),g){const E=P.findKey(n,g);E&&(!r||Kr(n,n[E],E,r))&&(delete n[E],i=!0)}}return P.isArray(t)?t.forEach(_):_(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const _=r[n];(!t||Kr(this,this[_],_,t,!0))&&(delete this[_],i=!0)}return i}normalize(t){const r=this,n={};return P.forEach(this,(i,_)=>{const g=P.findKey(n,_);if(g){r[g]=hr(i),delete r[_];return}const E=t?lo(_):String(_).trim();E!==_&&delete r[_],r[E]=hr(i),n[E]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return P.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&P.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[qn]=this[qn]={accessors:{}}).accessors,i=this.prototype;function _(g){const E=Gt(g);n[E]||(uo(i,g),n[E]=!0)}return P.isArray(t)?t.forEach(_):_(t),this}}Ce.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(Ce.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});P.freezeMethods(Ce);function zr(e,t){const r=this||rr,n=t||r,i=Ce.from(n.headers);let _=n.data;return P.forEach(e,function(E){_=E.call(r,_,i.normalize(),t?t.status:void 0)}),i.normalize(),_}function Ci(e){return!!(e&&e.__CANCEL__)}function Nt(e,t,r){q.call(this,e??"canceled",q.ERR_CANCELED,t,r),this.name="CanceledError"}P.inherits(Nt,q,{__CANCEL__:!0});function Pi(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new q("Request failed with status code "+r.status,[q.ERR_BAD_REQUEST,q.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function fo(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function co(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,_=0,g;return t=t!==void 0?t:1e3,function(S){const w=Date.now(),b=n[_];g||(g=w),r[i]=S,n[i]=w;let o=_,d=0;for(;o!==i;)d+=r[o++],o=o%e;if(i=(i+1)%e,i===_&&(_=(_+1)%e),w-g<t)return;const s=b&&w-b;return s?Math.round(d*1e3/s):void 0}}function ho(e,t){let r=0;const n=1e3/t;let i=null;return function(){const g=this===!0,E=Date.now();if(g||E-r>n)return i&&(clearTimeout(i),i=null),r=E,e.apply(null,arguments);i||(i=setTimeout(()=>(i=null,r=Date.now(),e.apply(null,arguments)),n-(E-r)))}}const vr=(e,t,r=3)=>{let n=0;const i=co(50,250);return ho(_=>{const g=_.loaded,E=_.lengthComputable?_.total:void 0,S=g-n,w=i(S),b=g<=E;n=g;const o={loaded:g,total:E,progress:E?g/E:void 0,bytes:S,rate:w||void 0,estimated:w&&E&&b?(E-g)/w:void 0,event:_,lengthComputable:E!=null};o[t?"download":"upload"]=!0,e(o)},r)},_o=Ke.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(_){let g=_;return t&&(r.setAttribute("href",g),g=r.href),r.setAttribute("href",g),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(g){const E=P.isString(g)?i(g):g;return E.protocol===n.protocol&&E.host===n.host}}():function(){return function(){return!0}}(),po=Ke.hasStandardBrowserEnv?{write(e,t,r,n,i,_){const g=[e+"="+encodeURIComponent(t)];P.isNumber(r)&&g.push("expires="+new Date(r).toGMTString()),P.isString(n)&&g.push("path="+n),P.isString(i)&&g.push("domain="+i),_===!0&&g.push("secure"),document.cookie=g.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function mo(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function vo(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ki(e,t){return e&&!mo(t)?vo(e,t):t}const ei=e=>e instanceof Ce?{...e}:e;function At(e,t){t=t||{};const r={};function n(w,b,o){return P.isPlainObject(w)&&P.isPlainObject(b)?P.merge.call({caseless:o},w,b):P.isPlainObject(b)?P.merge({},b):P.isArray(b)?b.slice():b}function i(w,b,o){if(P.isUndefined(b)){if(!P.isUndefined(w))return n(void 0,w,o)}else return n(w,b,o)}function _(w,b){if(!P.isUndefined(b))return n(void 0,b)}function g(w,b){if(P.isUndefined(b)){if(!P.isUndefined(w))return n(void 0,w)}else return n(void 0,b)}function E(w,b,o){if(o in t)return n(w,b);if(o in e)return n(void 0,w)}const S={url:_,method:_,data:_,baseURL:g,transformRequest:g,transformResponse:g,paramsSerializer:g,timeout:g,timeoutMessage:g,withCredentials:g,withXSRFToken:g,adapter:g,responseType:g,xsrfCookieName:g,xsrfHeaderName:g,onUploadProgress:g,onDownloadProgress:g,decompress:g,maxContentLength:g,maxBodyLength:g,beforeRedirect:g,transport:g,httpAgent:g,httpsAgent:g,cancelToken:g,socketPath:g,responseEncoding:g,validateStatus:E,headers:(w,b)=>i(ei(w),ei(b),!0)};return P.forEach(Object.keys(Object.assign({},e,t)),function(b){const o=S[b]||i,d=o(e[b],t[b],b);P.isUndefined(d)&&o!==E||(r[b]=d)}),r}const Ii=e=>{const t=At({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:_,headers:g,auth:E}=t;t.headers=g=Ce.from(g),t.url=Di(ki(t.baseURL,t.url),e.params,e.paramsSerializer),E&&g.set("Authorization","Basic "+btoa((E.username||"")+":"+(E.password?unescape(encodeURIComponent(E.password)):"")));let S;if(P.isFormData(r)){if(Ke.hasStandardBrowserEnv||Ke.hasStandardBrowserWebWorkerEnv)g.setContentType(void 0);else if((S=g.getContentType())!==!1){const[w,...b]=S?S.split(";").map(o=>o.trim()).filter(Boolean):[];g.setContentType([w||"multipart/form-data",...b].join("; "))}}if(Ke.hasStandardBrowserEnv&&(n&&P.isFunction(n)&&(n=n(t)),n||n!==!1&&_o(t.url))){const w=i&&_&&po.read(_);w&&g.set(i,w)}return t},go=typeof XMLHttpRequest<"u",yo=go&&function(e){return new Promise(function(r,n){const i=Ii(e);let _=i.data;const g=Ce.from(i.headers).normalize();let{responseType:E}=i,S;function w(){i.cancelToken&&i.cancelToken.unsubscribe(S),i.signal&&i.signal.removeEventListener("abort",S)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function o(){if(!b)return;const s=Ce.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),u={data:!E||E==="text"||E==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:s,config:e,request:b};Pi(function(h){r(h),w()},function(h){n(h),w()},u),b=null}"onloadend"in b?b.onloadend=o:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(o)},b.onabort=function(){b&&(n(new q("Request aborted",q.ECONNABORTED,i,b)),b=null)},b.onerror=function(){n(new q("Network Error",q.ERR_NETWORK,i,b)),b=null},b.ontimeout=function(){let a=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const u=i.transitional||Mi;i.timeoutErrorMessage&&(a=i.timeoutErrorMessage),n(new q(a,u.clarifyTimeoutError?q.ETIMEDOUT:q.ECONNABORTED,i,b)),b=null},_===void 0&&g.setContentType(null),"setRequestHeader"in b&&P.forEach(g.toJSON(),function(a,u){b.setRequestHeader(u,a)}),P.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),E&&E!=="json"&&(b.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&b.addEventListener("progress",vr(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",vr(i.onUploadProgress)),(i.cancelToken||i.signal)&&(S=s=>{b&&(n(!s||s.type?new Nt(null,e,b):s),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(S),i.signal&&(i.signal.aborted?S():i.signal.addEventListener("abort",S)));const d=fo(i.url);if(d&&Ke.protocols.indexOf(d)===-1){n(new q("Unsupported protocol "+d+":",q.ERR_BAD_REQUEST,e));return}b.send(_||null)})},xo=(e,t)=>{let r=new AbortController,n;const i=function(S){if(!n){n=!0,g();const w=S instanceof Error?S:this.reason;r.abort(w instanceof q?w:new Nt(w instanceof Error?w.message:w))}};let _=t&&setTimeout(()=>{i(new q(`timeout ${t} of ms exceeded`,q.ETIMEDOUT))},t);const g=()=>{e&&(_&&clearTimeout(_),_=null,e.forEach(S=>{S&&(S.removeEventListener?S.removeEventListener("abort",i):S.unsubscribe(i))}),e=null)};e.forEach(S=>S&&S.addEventListener&&S.addEventListener("abort",i));const{signal:E}=r;return E.unsubscribe=g,[E,()=>{_&&clearTimeout(_),_=null}]},Eo=function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},So=async function*(e,t,r){for await(const n of e)yield*Eo(ArrayBuffer.isView(n)?n:await r(String(n)),t)},ti=(e,t,r,n,i)=>{const _=So(e,t,i);let g=0;return new ReadableStream({type:"bytes",async pull(E){const{done:S,value:w}=await _.next();if(S){E.close(),n();return}let b=w.byteLength;r&&r(g+=b),E.enqueue(new Uint8Array(w))},cancel(E){return n(E),_.return()}},{highWaterMark:2})},ri=(e,t)=>{const r=e!=null;return n=>setTimeout(()=>t({lengthComputable:r,total:e,loaded:n}))},Lr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Fi=Lr&&typeof ReadableStream=="function",nn=Lr&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),wo=Fi&&(()=>{let e=!1;const t=new Request(Ke.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),ni=64*1024,sn=Fi&&!!(()=>{try{return P.isReadableStream(new Response("").body)}catch{}})(),gr={stream:sn&&(e=>e.body)};Lr&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!gr[t]&&(gr[t]=P.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new q(`Response type '${t}' is not supported`,q.ERR_NOT_SUPPORT,n)})})})(new Response);const bo=async e=>{if(e==null)return 0;if(P.isBlob(e))return e.size;if(P.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(P.isArrayBufferView(e))return e.byteLength;if(P.isURLSearchParams(e)&&(e=e+""),P.isString(e))return(await nn(e)).byteLength},Ro=async(e,t)=>{const r=P.toFiniteNumber(e.getContentLength());return r??bo(t)},Oo=Lr&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:_,timeout:g,onDownloadProgress:E,onUploadProgress:S,responseType:w,headers:b,withCredentials:o="same-origin",fetchOptions:d}=Ii(e);w=w?(w+"").toLowerCase():"text";let[s,a]=i||_||g?xo([i,_],g):[],u,c;const h=()=>{!u&&setTimeout(()=>{s&&s.unsubscribe()}),u=!0};let f;try{if(S&&wo&&r!=="get"&&r!=="head"&&(f=await Ro(b,n))!==0){let y=new Request(t,{method:"POST",body:n,duplex:"half"}),x;P.isFormData(n)&&(x=y.headers.get("content-type"))&&b.setContentType(x),y.body&&(n=ti(y.body,ni,ri(f,vr(S)),null,nn))}P.isString(o)||(o=o?"cors":"omit"),c=new Request(t,{...d,signal:s,method:r.toUpperCase(),headers:b.normalize().toJSON(),body:n,duplex:"half",withCredentials:o});let p=await fetch(c);const m=sn&&(w==="stream"||w==="response");if(sn&&(E||m)){const y={};["status","statusText","headers"].forEach(v=>{y[v]=p[v]});const x=P.toFiniteNumber(p.headers.get("content-length"));p=new Response(ti(p.body,ni,E&&ri(x,vr(E,!0)),m&&h,nn),y)}w=w||"text";let l=await gr[P.findKey(gr,w)||"text"](p,e);return!m&&h(),a&&a(),await new Promise((y,x)=>{Pi(y,x,{data:l,headers:Ce.from(p.headers),status:p.status,statusText:p.statusText,config:e,request:c})})}catch(p){throw h(),p&&p.name==="TypeError"&&/fetch/i.test(p.message)?Object.assign(new q("Network Error",q.ERR_NETWORK,e,c),{cause:p.cause||p}):q.from(p,p&&p.code,e,c)}}),an={http:Va,xhr:yo,fetch:Oo};P.forEach(an,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ii=e=>`- ${e}`,Ao=e=>P.isFunction(e)||e===null||e===!1,Ui={getAdapter:e=>{e=P.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let _=0;_<t;_++){r=e[_];let g;if(n=r,!Ao(r)&&(n=an[(g=String(r)).toLowerCase()],n===void 0))throw new q(`Unknown adapter '${g}'`);if(n)break;i[g||"#"+_]=n}if(!n){const _=Object.entries(i).map(([E,S])=>`adapter ${E} `+(S===!1?"is not supported by the environment":"is not available in the build"));let g=t?_.length>1?`since :
`+_.map(ii).join(`
`):" "+ii(_[0]):"as no adapter specified";throw new q("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return n},adapters:an};function $r(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Nt(null,e)}function si(e){return $r(e),e.headers=Ce.from(e.headers),e.data=zr.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ui.getAdapter(e.adapter||rr.adapter)(e).then(function(n){return $r(e),n.data=zr.call(e,e.transformResponse,n),n.headers=Ce.from(n.headers),n},function(n){return Ci(n)||($r(e),n&&n.response&&(n.response.data=zr.call(e,e.transformResponse,n.response),n.response.headers=Ce.from(n.response.headers))),Promise.reject(n)})}const Bi="1.7.2",xn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{xn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ai={};xn.transitional=function(t,r,n){function i(_,g){return"[Axios v"+Bi+"] Transitional option '"+_+"'"+g+(n?". "+n:"")}return(_,g,E)=>{if(t===!1)throw new q(i(g," has been removed"+(r?" in "+r:"")),q.ERR_DEPRECATED);return r&&!ai[g]&&(ai[g]=!0,console.warn(i(g," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(_,g,E):!0}};function Lo(e,t,r){if(typeof e!="object")throw new q("options must be an object",q.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const _=n[i],g=t[_];if(g){const E=e[_],S=E===void 0||g(E,_,e);if(S!==!0)throw new q("option "+_+" must be "+S,q.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new q("Unknown option "+_,q.ERR_BAD_OPTION)}}const on={assertOptions:Lo,validators:xn},_t=on.validators;class Rt{constructor(t){this.defaults=t,this.interceptors={request:new Qn,response:new Qn}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const _=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?_&&!String(n.stack).endsWith(_.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+_):n.stack=_}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=At(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:_}=r;n!==void 0&&on.assertOptions(n,{silentJSONParsing:_t.transitional(_t.boolean),forcedJSONParsing:_t.transitional(_t.boolean),clarifyTimeoutError:_t.transitional(_t.boolean)},!1),i!=null&&(P.isFunction(i)?r.paramsSerializer={serialize:i}:on.assertOptions(i,{encode:_t.function,serialize:_t.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let g=_&&P.merge(_.common,_[r.method]);_&&P.forEach(["delete","get","head","post","put","patch","common"],a=>{delete _[a]}),r.headers=Ce.concat(g,_);const E=[];let S=!0;this.interceptors.request.forEach(function(u){typeof u.runWhen=="function"&&u.runWhen(r)===!1||(S=S&&u.synchronous,E.unshift(u.fulfilled,u.rejected))});const w=[];this.interceptors.response.forEach(function(u){w.push(u.fulfilled,u.rejected)});let b,o=0,d;if(!S){const a=[si.bind(this),void 0];for(a.unshift.apply(a,E),a.push.apply(a,w),d=a.length,b=Promise.resolve(r);o<d;)b=b.then(a[o++],a[o++]);return b}d=E.length;let s=r;for(o=0;o<d;){const a=E[o++],u=E[o++];try{s=a(s)}catch(c){u.call(this,c);break}}try{b=si.call(this,s)}catch(a){return Promise.reject(a)}for(o=0,d=w.length;o<d;)b=b.then(w[o++],w[o++]);return b}getUri(t){t=At(this.defaults,t);const r=ki(t.baseURL,t.url);return Di(r,t.params,t.paramsSerializer)}}P.forEach(["delete","get","head","options"],function(t){Rt.prototype[t]=function(r,n){return this.request(At(n||{},{method:t,url:r,data:(n||{}).data}))}});P.forEach(["post","put","patch"],function(t){function r(n){return function(_,g,E){return this.request(At(E||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:_,data:g}))}}Rt.prototype[t]=r(),Rt.prototype[t+"Form"]=r(!0)});class En{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(_){r=_});const n=this;this.promise.then(i=>{if(!n._listeners)return;let _=n._listeners.length;for(;_-- >0;)n._listeners[_](i);n._listeners=null}),this.promise.then=i=>{let _;const g=new Promise(E=>{n.subscribe(E),_=E}).then(i);return g.cancel=function(){n.unsubscribe(_)},g},t(function(_,g,E){n.reason||(n.reason=new Nt(_,g,E),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new En(function(i){t=i}),cancel:t}}}function Do(e){return function(r){return e.apply(null,r)}}function Mo(e){return P.isObject(e)&&e.isAxiosError===!0}const ln={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ln).forEach(([e,t])=>{ln[t]=e});function Ni(e){const t=new Rt(e),r=vi(Rt.prototype.request,t);return P.extend(r,Rt.prototype,t,{allOwnKeys:!0}),P.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return Ni(At(e,i))},r}const Se=Ni(rr);Se.Axios=Rt;Se.CanceledError=Nt;Se.CancelToken=En;Se.isCancel=Ci;Se.VERSION=Bi;Se.toFormData=Ar;Se.AxiosError=q;Se.Cancel=Se.CanceledError;Se.all=function(t){return Promise.all(t)};Se.spread=Do;Se.isAxiosError=Mo;Se.mergeConfig=At;Se.AxiosHeaders=Ce;Se.formToJSON=e=>Ti(P.isHTMLForm(e)?new FormData(e):e);Se.getAdapter=Ui.getAdapter;Se.HttpStatusCode=ln;Se.default=Se;const To=["src"],Co=xt({__name:"PreviewImage",props:{current:{}},emits:["destroy"],setup(e,{emit:t}){const r=e,n=t,i=pt(()=>`${r.current}${/\?/.test(r.current)?"&":"?"}t=${Date.now()}`);return(_,g)=>{const E=Hn("drag"),S=Hn("wheel");return ge(),Ee("div",{class:"preview-image",onClick:g[1]||(g[1]=w=>n("destroy"))},[Bs(me("img",{src:i.value,referrerPolicy:"no-referrer",onClick:g[0]||(g[0]=er(()=>{},["stop"]))},null,8,To),[[E],[S]])])}}}),Po=Et(Co,[["__scopeId","data-v-03730088"]]),ko="/assets/music-C4YLqQPK.svg";//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var ji;function Y(){return ji.apply(null,arguments)}function Io(e){ji=e}function ze(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function Ot(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function de(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Sn(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(de(e,t))return!1;return!0}function Te(e){return e===void 0}function dt(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function nr(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Wi(e,t){var r=[],n,i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function mt(e,t){for(var r in t)de(t,r)&&(e[r]=t[r]);return de(t,"toString")&&(e.toString=t.toString),de(t,"valueOf")&&(e.valueOf=t.valueOf),e}function rt(e,t,r,n){return ds(e,t,r,n,!0).utc()}function Fo(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ee(e){return e._pf==null&&(e._pf=Fo()),e._pf}var un;Array.prototype.some?un=Array.prototype.some:un=function(e){var t=Object(this),r=t.length>>>0,n;for(n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};function wn(e){var t=null,r=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(t=ee(e),r=un.call(t.parsedDateParts,function(i){return i!=null}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function Dr(e){var t=rt(NaN);return e!=null?mt(ee(t),e):ee(t).userInvalidated=!0,t}var oi=Y.momentProperties=[],Xr=!1;function bn(e,t){var r,n,i,_=oi.length;if(Te(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Te(t._i)||(e._i=t._i),Te(t._f)||(e._f=t._f),Te(t._l)||(e._l=t._l),Te(t._strict)||(e._strict=t._strict),Te(t._tzm)||(e._tzm=t._tzm),Te(t._isUTC)||(e._isUTC=t._isUTC),Te(t._offset)||(e._offset=t._offset),Te(t._pf)||(e._pf=ee(t)),Te(t._locale)||(e._locale=t._locale),_>0)for(r=0;r<_;r++)n=oi[r],i=t[n],Te(i)||(e[n]=i);return e}function ir(e){bn(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Xr===!1&&(Xr=!0,Y.updateOffset(this),Xr=!1)}function $e(e){return e instanceof ir||e!=null&&e._isAMomentObject!=null}function Vi(e){Y.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function We(e,t){var r=!0;return mt(function(){if(Y.deprecationHandler!=null&&Y.deprecationHandler(null,e),r){var n=[],i,_,g,E=arguments.length;for(_=0;_<E;_++){if(i="",typeof arguments[_]=="object"){i+=`
[`+_+"] ";for(g in arguments[0])de(arguments[0],g)&&(i+=g+": "+arguments[0][g]+", ");i=i.slice(0,-2)}else i=arguments[_];n.push(i)}Vi(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var li={};function Gi(e,t){Y.deprecationHandler!=null&&Y.deprecationHandler(e,t),li[e]||(Vi(t),li[e]=!0)}Y.suppressDeprecationWarnings=!1;Y.deprecationHandler=null;function nt(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Uo(e){var t,r;for(r in e)de(e,r)&&(t=e[r],nt(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function dn(e,t){var r=mt({},e),n;for(n in t)de(t,n)&&(Ot(e[n])&&Ot(t[n])?(r[n]={},mt(r[n],e[n]),mt(r[n],t[n])):t[n]!=null?r[n]=t[n]:delete r[n]);for(n in e)de(e,n)&&!de(t,n)&&Ot(e[n])&&(r[n]=mt({},r[n]));return r}function Rn(e){e!=null&&this.set(e)}var fn;Object.keys?fn=Object.keys:fn=function(e){var t,r=[];for(t in e)de(e,t)&&r.push(t);return r};var Bo={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function No(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return nt(n)?n.call(t,r):n}function tt(e,t,r){var n=""+Math.abs(e),i=t-n.length,_=e>=0;return(_?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}var On=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,lr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Jr={},kt={};function $(e,t,r,n){var i=n;typeof n=="string"&&(i=function(){return this[n]()}),e&&(kt[e]=i),t&&(kt[t[0]]=function(){return tt(i.apply(this,arguments),t[1],t[2])}),r&&(kt[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function jo(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Wo(e){var t=e.match(On),r,n;for(r=0,n=t.length;r<n;r++)kt[t[r]]?t[r]=kt[t[r]]:t[r]=jo(t[r]);return function(i){var _="",g;for(g=0;g<n;g++)_+=nt(t[g])?t[g].call(i,e):t[g];return _}}function _r(e,t){return e.isValid()?(t=Yi(t,e.localeData()),Jr[t]=Jr[t]||Wo(t),Jr[t](e)):e.localeData().invalidDate()}function Yi(e,t){var r=5;function n(i){return t.longDateFormat(i)||i}for(lr.lastIndex=0;r>=0&&lr.test(e);)e=e.replace(lr,n),lr.lastIndex=0,r-=1;return e}var Vo={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Go(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(On).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var Yo="Invalid date";function Ho(){return this._invalidDate}var Ko="%d",zo=/\d{1,2}/;function $o(e){return this._ordinal.replace("%d",e)}var Xo={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Jo(e,t,r,n){var i=this._relativeTime[r];return nt(i)?i(e,t,r,n):i.replace(/%d/i,e)}function Zo(e,t){var r=this._relativeTime[e>0?"future":"past"];return nt(r)?r(t):r.replace(/%s/i,t)}var ui={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Ve(e){return typeof e=="string"?ui[e]||ui[e.toLowerCase()]:void 0}function An(e){var t={},r,n;for(n in e)de(e,n)&&(r=Ve(n),r&&(t[r]=e[n]));return t}var Qo={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function qo(e){var t=[],r;for(r in e)de(e,r)&&t.push({unit:r,priority:Qo[r]});return t.sort(function(n,i){return n.priority-i.priority}),t}var Hi=/\d/,Ue=/\d\d/,Ki=/\d{3}/,Ln=/\d{4}/,Mr=/[+-]?\d{6}/,_e=/\d\d?/,zi=/\d\d\d\d?/,$i=/\d\d\d\d\d\d?/,Tr=/\d{1,3}/,Dn=/\d{1,4}/,Cr=/[+-]?\d{1,6}/,jt=/\d+/,Pr=/[+-]?\d+/,el=/Z|[+-]\d\d:?\d\d/gi,kr=/Z|[+-]\d\d(?::?\d\d)?/gi,tl=/[+-]?\d+(\.\d{1,3})?/,sr=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Wt=/^[1-9]\d?/,Mn=/^([1-9]\d|\d)/,yr;yr={};function H(e,t,r){yr[e]=nt(t)?t:function(n,i){return n&&r?r:t}}function rl(e,t){return de(yr,e)?yr[e](t._strict,t._locale):new RegExp(nl(e))}function nl(e){return lt(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,n,i,_){return r||n||i||_}))}function lt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Be(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ae(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=Be(t)),r}var cn={};function ce(e,t){var r,n=t,i;for(typeof e=="string"&&(e=[e]),dt(t)&&(n=function(_,g){g[t]=ae(_)}),i=e.length,r=0;r<i;r++)cn[e[r]]=n}function ar(e,t){ce(e,function(r,n,i,_){i._w=i._w||{},t(r,i._w,i,_)})}function il(e,t,r){t!=null&&de(cn,e)&&cn[e](t,r._a,r,e)}function Ir(e){return e%4===0&&e%100!==0||e%400===0}var Le=0,at=1,qe=2,we=3,He=4,ot=5,bt=6,sl=7,al=8;$("Y",0,0,function(){var e=this.year();return e<=9999?tt(e,4):"+"+e});$(0,["YY",2],0,function(){return this.year()%100});$(0,["YYYY",4],0,"year");$(0,["YYYYY",5],0,"year");$(0,["YYYYYY",6,!0],0,"year");H("Y",Pr);H("YY",_e,Ue);H("YYYY",Dn,Ln);H("YYYYY",Cr,Mr);H("YYYYYY",Cr,Mr);ce(["YYYYY","YYYYYY"],Le);ce("YYYY",function(e,t){t[Le]=e.length===2?Y.parseTwoDigitYear(e):ae(e)});ce("YY",function(e,t){t[Le]=Y.parseTwoDigitYear(e)});ce("Y",function(e,t){t[Le]=parseInt(e,10)});function zt(e){return Ir(e)?366:365}Y.parseTwoDigitYear=function(e){return ae(e)+(ae(e)>68?1900:2e3)};var Xi=Vt("FullYear",!0);function ol(){return Ir(this.year())}function Vt(e,t){return function(r){return r!=null?(Ji(this,e,r),Y.updateOffset(this,t),this):Jt(this,e)}}function Jt(e,t){if(!e.isValid())return NaN;var r=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return n?r.getUTCSeconds():r.getSeconds();case"Minutes":return n?r.getUTCMinutes():r.getMinutes();case"Hours":return n?r.getUTCHours():r.getHours();case"Date":return n?r.getUTCDate():r.getDate();case"Day":return n?r.getUTCDay():r.getDay();case"Month":return n?r.getUTCMonth():r.getMonth();case"FullYear":return n?r.getUTCFullYear():r.getFullYear();default:return NaN}}function Ji(e,t,r){var n,i,_,g,E;if(!(!e.isValid()||isNaN(r))){switch(n=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?n.setUTCMilliseconds(r):n.setMilliseconds(r));case"Seconds":return void(i?n.setUTCSeconds(r):n.setSeconds(r));case"Minutes":return void(i?n.setUTCMinutes(r):n.setMinutes(r));case"Hours":return void(i?n.setUTCHours(r):n.setHours(r));case"Date":return void(i?n.setUTCDate(r):n.setDate(r));case"FullYear":break;default:return}_=r,g=e.month(),E=e.date(),E=E===29&&g===1&&!Ir(_)?28:E,i?n.setUTCFullYear(_,g,E):n.setFullYear(_,g,E)}}function ll(e){return e=Ve(e),nt(this[e])?this[e]():this}function ul(e,t){if(typeof e=="object"){e=An(e);var r=qo(e),n,i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(e=Ve(e),nt(this[e]))return this[e](t);return this}function dl(e,t){return(e%t+t)%t}var ye;Array.prototype.indexOf?ye=Array.prototype.indexOf:ye=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Tn(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=dl(t,12);return e+=(t-r)/12,r===1?Ir(e)?29:28:31-r%7%2}$("M",["MM",2],"Mo",function(){return this.month()+1});$("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});$("MMMM",0,0,function(e){return this.localeData().months(this,e)});H("M",_e,Wt);H("MM",_e,Ue);H("MMM",function(e,t){return t.monthsShortRegex(e)});H("MMMM",function(e,t){return t.monthsRegex(e)});ce(["M","MM"],function(e,t){t[at]=ae(e)-1});ce(["MMM","MMMM"],function(e,t,r,n){var i=r._locale.monthsParse(e,n,r._strict);i!=null?t[at]=i:ee(r).invalidMonth=e});var fl="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Zi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Qi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,cl=sr,hl=sr;function _l(e,t){return e?ze(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Qi).test(t)?"format":"standalone"][e.month()]:ze(this._months)?this._months:this._months.standalone}function pl(e,t){return e?ze(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Qi.test(t)?"format":"standalone"][e.month()]:ze(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ml(e,t,r){var n,i,_,g=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)_=rt([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(_,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(_,"").toLocaleLowerCase();return r?t==="MMM"?(i=ye.call(this._shortMonthsParse,g),i!==-1?i:null):(i=ye.call(this._longMonthsParse,g),i!==-1?i:null):t==="MMM"?(i=ye.call(this._shortMonthsParse,g),i!==-1?i:(i=ye.call(this._longMonthsParse,g),i!==-1?i:null)):(i=ye.call(this._longMonthsParse,g),i!==-1?i:(i=ye.call(this._shortMonthsParse,g),i!==-1?i:null))}function vl(e,t,r){var n,i,_;if(this._monthsParseExact)return ml.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=rt([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!r&&!this._monthsParse[n]&&(_="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(_.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(r&&t==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}}function qi(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=ae(t);else if(t=e.localeData().monthsParse(t),!dt(t))return e}var r=t,n=e.date();return n=n<29?n:Math.min(n,Tn(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,n):e._d.setMonth(r,n),e}function es(e){return e!=null?(qi(this,e),Y.updateOffset(this,!0),this):Jt(this,"Month")}function gl(){return Tn(this.year(),this.month())}function yl(e){return this._monthsParseExact?(de(this,"_monthsRegex")||ts.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(de(this,"_monthsShortRegex")||(this._monthsShortRegex=cl),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function xl(e){return this._monthsParseExact?(de(this,"_monthsRegex")||ts.call(this),e?this._monthsStrictRegex:this._monthsRegex):(de(this,"_monthsRegex")||(this._monthsRegex=hl),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ts(){function e(S,w){return w.length-S.length}var t=[],r=[],n=[],i,_,g,E;for(i=0;i<12;i++)_=rt([2e3,i]),g=lt(this.monthsShort(_,"")),E=lt(this.months(_,"")),t.push(g),r.push(E),n.push(E),n.push(g);t.sort(e),r.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function El(e,t,r,n,i,_,g){var E;return e<100&&e>=0?(E=new Date(e+400,t,r,n,i,_,g),isFinite(E.getFullYear())&&E.setFullYear(e)):E=new Date(e,t,r,n,i,_,g),E}function Zt(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function xr(e,t,r){var n=7+t-r,i=(7+Zt(e,0,n).getUTCDay()-t)%7;return-i+n-1}function rs(e,t,r,n,i){var _=(7+r-n)%7,g=xr(e,n,i),E=1+7*(t-1)+_+g,S,w;return E<=0?(S=e-1,w=zt(S)+E):E>zt(e)?(S=e+1,w=E-zt(e)):(S=e,w=E),{year:S,dayOfYear:w}}function Qt(e,t,r){var n=xr(e.year(),t,r),i=Math.floor((e.dayOfYear()-n-1)/7)+1,_,g;return i<1?(g=e.year()-1,_=i+ut(g,t,r)):i>ut(e.year(),t,r)?(_=i-ut(e.year(),t,r),g=e.year()+1):(g=e.year(),_=i),{week:_,year:g}}function ut(e,t,r){var n=xr(e,t,r),i=xr(e+1,t,r);return(zt(e)-n+i)/7}$("w",["ww",2],"wo","week");$("W",["WW",2],"Wo","isoWeek");H("w",_e,Wt);H("ww",_e,Ue);H("W",_e,Wt);H("WW",_e,Ue);ar(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=ae(e)});function Sl(e){return Qt(e,this._week.dow,this._week.doy).week}var wl={dow:0,doy:6};function bl(){return this._week.dow}function Rl(){return this._week.doy}function Ol(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Al(e){var t=Qt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}$("d",0,"do","day");$("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});$("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});$("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});$("e",0,0,"weekday");$("E",0,0,"isoWeekday");H("d",_e);H("e",_e);H("E",_e);H("dd",function(e,t){return t.weekdaysMinRegex(e)});H("ddd",function(e,t){return t.weekdaysShortRegex(e)});H("dddd",function(e,t){return t.weekdaysRegex(e)});ar(["dd","ddd","dddd"],function(e,t,r,n){var i=r._locale.weekdaysParse(e,n,r._strict);i!=null?t.d=i:ee(r).invalidWeekday=e});ar(["d","e","E"],function(e,t,r,n){t[n]=ae(e)});function Ll(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Dl(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Cn(e,t){return e.slice(t,7).concat(e.slice(0,t))}var Ml="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ns="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Tl="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Cl=sr,Pl=sr,kl=sr;function Il(e,t){var r=ze(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Cn(r,this._week.dow):e?r[e.day()]:r}function Fl(e){return e===!0?Cn(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ul(e){return e===!0?Cn(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Bl(e,t,r){var n,i,_,g=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)_=rt([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(_,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(_,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(_,"").toLocaleLowerCase();return r?t==="dddd"?(i=ye.call(this._weekdaysParse,g),i!==-1?i:null):t==="ddd"?(i=ye.call(this._shortWeekdaysParse,g),i!==-1?i:null):(i=ye.call(this._minWeekdaysParse,g),i!==-1?i:null):t==="dddd"?(i=ye.call(this._weekdaysParse,g),i!==-1||(i=ye.call(this._shortWeekdaysParse,g),i!==-1)?i:(i=ye.call(this._minWeekdaysParse,g),i!==-1?i:null)):t==="ddd"?(i=ye.call(this._shortWeekdaysParse,g),i!==-1||(i=ye.call(this._weekdaysParse,g),i!==-1)?i:(i=ye.call(this._minWeekdaysParse,g),i!==-1?i:null)):(i=ye.call(this._minWeekdaysParse,g),i!==-1||(i=ye.call(this._weekdaysParse,g),i!==-1)?i:(i=ye.call(this._shortWeekdaysParse,g),i!==-1?i:null))}function Nl(e,t,r){var n,i,_;if(this._weekdaysParseExact)return Bl.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=rt([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(_="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(_.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(r&&t==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(r&&t==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}}function jl(e){if(!this.isValid())return e!=null?this:NaN;var t=Jt(this,"Day");return e!=null?(e=Ll(e,this.localeData()),this.add(e-t,"d")):t}function Wl(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Vl(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=Dl(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function Gl(e){return this._weekdaysParseExact?(de(this,"_weekdaysRegex")||Pn.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(de(this,"_weekdaysRegex")||(this._weekdaysRegex=Cl),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Yl(e){return this._weekdaysParseExact?(de(this,"_weekdaysRegex")||Pn.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(de(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Pl),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Hl(e){return this._weekdaysParseExact?(de(this,"_weekdaysRegex")||Pn.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(de(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=kl),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Pn(){function e(b,o){return o.length-b.length}var t=[],r=[],n=[],i=[],_,g,E,S,w;for(_=0;_<7;_++)g=rt([2e3,1]).day(_),E=lt(this.weekdaysMin(g,"")),S=lt(this.weekdaysShort(g,"")),w=lt(this.weekdays(g,"")),t.push(E),r.push(S),n.push(w),i.push(E),i.push(S),i.push(w);t.sort(e),r.sort(e),n.sort(e),i.sort(e),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function kn(){return this.hours()%12||12}function Kl(){return this.hours()||24}$("H",["HH",2],0,"hour");$("h",["hh",2],0,kn);$("k",["kk",2],0,Kl);$("hmm",0,0,function(){return""+kn.apply(this)+tt(this.minutes(),2)});$("hmmss",0,0,function(){return""+kn.apply(this)+tt(this.minutes(),2)+tt(this.seconds(),2)});$("Hmm",0,0,function(){return""+this.hours()+tt(this.minutes(),2)});$("Hmmss",0,0,function(){return""+this.hours()+tt(this.minutes(),2)+tt(this.seconds(),2)});function is(e,t){$(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}is("a",!0);is("A",!1);function ss(e,t){return t._meridiemParse}H("a",ss);H("A",ss);H("H",_e,Mn);H("h",_e,Wt);H("k",_e,Wt);H("HH",_e,Ue);H("hh",_e,Ue);H("kk",_e,Ue);H("hmm",zi);H("hmmss",$i);H("Hmm",zi);H("Hmmss",$i);ce(["H","HH"],we);ce(["k","kk"],function(e,t,r){var n=ae(e);t[we]=n===24?0:n});ce(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});ce(["h","hh"],function(e,t,r){t[we]=ae(e),ee(r).bigHour=!0});ce("hmm",function(e,t,r){var n=e.length-2;t[we]=ae(e.substr(0,n)),t[He]=ae(e.substr(n)),ee(r).bigHour=!0});ce("hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[we]=ae(e.substr(0,n)),t[He]=ae(e.substr(n,2)),t[ot]=ae(e.substr(i)),ee(r).bigHour=!0});ce("Hmm",function(e,t,r){var n=e.length-2;t[we]=ae(e.substr(0,n)),t[He]=ae(e.substr(n))});ce("Hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[we]=ae(e.substr(0,n)),t[He]=ae(e.substr(n,2)),t[ot]=ae(e.substr(i))});function zl(e){return(e+"").toLowerCase().charAt(0)==="p"}var $l=/[ap]\.?m?\.?/i,Xl=Vt("Hours",!0);function Jl(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var as={calendar:Bo,longDateFormat:Vo,invalidDate:Yo,ordinal:Ko,dayOfMonthOrdinalParse:zo,relativeTime:Xo,months:fl,monthsShort:Zi,week:wl,weekdays:Ml,weekdaysMin:Tl,weekdaysShort:ns,meridiemParse:$l},pe={},Yt={},qt;function Zl(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r+=1)if(e[r]!==t[r])return r;return n}function di(e){return e&&e.toLowerCase().replace("_","-")}function Ql(e){for(var t=0,r,n,i,_;t<e.length;){for(_=di(e[t]).split("-"),r=_.length,n=di(e[t+1]),n=n?n.split("-"):null;r>0;){if(i=Fr(_.slice(0,r).join("-")),i)return i;if(n&&n.length>=r&&Zl(_,n)>=r-1)break;r--}t++}return qt}function ql(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Fr(e){var t=null,r;if(pe[e]===void 0&&typeof module<"u"&&module&&module.exports&&ql(e))try{t=qt._abbr,r=require,r("./locale/"+e),yt(t)}catch{pe[e]=null}return pe[e]}function yt(e,t){var r;return e&&(Te(t)?r=ft(e):r=In(e,t),r?qt=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),qt._abbr}function In(e,t){if(t!==null){var r,n=as;if(t.abbr=e,pe[e]!=null)Gi("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=pe[e]._config;else if(t.parentLocale!=null)if(pe[t.parentLocale]!=null)n=pe[t.parentLocale]._config;else if(r=Fr(t.parentLocale),r!=null)n=r._config;else return Yt[t.parentLocale]||(Yt[t.parentLocale]=[]),Yt[t.parentLocale].push({name:e,config:t}),null;return pe[e]=new Rn(dn(n,t)),Yt[e]&&Yt[e].forEach(function(i){In(i.name,i.config)}),yt(e),pe[e]}else return delete pe[e],null}function eu(e,t){if(t!=null){var r,n,i=as;pe[e]!=null&&pe[e].parentLocale!=null?pe[e].set(dn(pe[e]._config,t)):(n=Fr(e),n!=null&&(i=n._config),t=dn(i,t),n==null&&(t.abbr=e),r=new Rn(t),r.parentLocale=pe[e],pe[e]=r),yt(e)}else pe[e]!=null&&(pe[e].parentLocale!=null?(pe[e]=pe[e].parentLocale,e===yt()&&yt(e)):pe[e]!=null&&delete pe[e]);return pe[e]}function ft(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return qt;if(!ze(e)){if(t=Fr(e),t)return t;e=[e]}return Ql(e)}function tu(){return fn(pe)}function Fn(e){var t,r=e._a;return r&&ee(e).overflow===-2&&(t=r[at]<0||r[at]>11?at:r[qe]<1||r[qe]>Tn(r[Le],r[at])?qe:r[we]<0||r[we]>24||r[we]===24&&(r[He]!==0||r[ot]!==0||r[bt]!==0)?we:r[He]<0||r[He]>59?He:r[ot]<0||r[ot]>59?ot:r[bt]<0||r[bt]>999?bt:-1,ee(e)._overflowDayOfYear&&(t<Le||t>qe)&&(t=qe),ee(e)._overflowWeeks&&t===-1&&(t=sl),ee(e)._overflowWeekday&&t===-1&&(t=al),ee(e).overflow=t),e}var ru=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,nu=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,iu=/Z|[+-]\d\d(?::?\d\d)?/,ur=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Zr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],su=/^\/?Date\((-?\d+)/i,au=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ou={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function os(e){var t,r,n=e._i,i=ru.exec(n)||nu.exec(n),_,g,E,S,w=ur.length,b=Zr.length;if(i){for(ee(e).iso=!0,t=0,r=w;t<r;t++)if(ur[t][1].exec(i[1])){g=ur[t][0],_=ur[t][2]!==!1;break}if(g==null){e._isValid=!1;return}if(i[3]){for(t=0,r=b;t<r;t++)if(Zr[t][1].exec(i[3])){E=(i[2]||" ")+Zr[t][0];break}if(E==null){e._isValid=!1;return}}if(!_&&E!=null){e._isValid=!1;return}if(i[4])if(iu.exec(i[4]))S="Z";else{e._isValid=!1;return}e._f=g+(E||"")+(S||""),Bn(e)}else e._isValid=!1}function lu(e,t,r,n,i,_){var g=[uu(e),Zi.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(i,10)];return _&&g.push(parseInt(_,10)),g}function uu(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function du(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function fu(e,t,r){if(e){var n=ns.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(n!==i)return ee(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function cu(e,t,r){if(e)return ou[e];if(t)return 0;var n=parseInt(r,10),i=n%100,_=(n-i)/100;return _*60+i}function ls(e){var t=au.exec(du(e._i)),r;if(t){if(r=lu(t[4],t[3],t[2],t[5],t[6],t[7]),!fu(t[1],r,e))return;e._a=r,e._tzm=cu(t[8],t[9],t[10]),e._d=Zt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),ee(e).rfc2822=!0}else e._isValid=!1}function hu(e){var t=su.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(os(e),e._isValid===!1)delete e._isValid;else return;if(ls(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Y.createFromInputFallback(e)}Y.createFromInputFallback=We("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Tt(e,t,r){return e??t??r}function _u(e){var t=new Date(Y.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Un(e){var t,r,n=[],i,_,g;if(!e._d){for(i=_u(e),e._w&&e._a[qe]==null&&e._a[at]==null&&pu(e),e._dayOfYear!=null&&(g=Tt(e._a[Le],i[Le]),(e._dayOfYear>zt(g)||e._dayOfYear===0)&&(ee(e)._overflowDayOfYear=!0),r=Zt(g,0,e._dayOfYear),e._a[at]=r.getUTCMonth(),e._a[qe]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=n[t]=i[t];for(;t<7;t++)e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[we]===24&&e._a[He]===0&&e._a[ot]===0&&e._a[bt]===0&&(e._nextDay=!0,e._a[we]=0),e._d=(e._useUTC?Zt:El).apply(null,n),_=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[we]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==_&&(ee(e).weekdayMismatch=!0)}}function pu(e){var t,r,n,i,_,g,E,S,w;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(_=1,g=4,r=Tt(t.GG,e._a[Le],Qt(he(),1,4).year),n=Tt(t.W,1),i=Tt(t.E,1),(i<1||i>7)&&(S=!0)):(_=e._locale._week.dow,g=e._locale._week.doy,w=Qt(he(),_,g),r=Tt(t.gg,e._a[Le],w.year),n=Tt(t.w,w.week),t.d!=null?(i=t.d,(i<0||i>6)&&(S=!0)):t.e!=null?(i=t.e+_,(t.e<0||t.e>6)&&(S=!0)):i=_),n<1||n>ut(r,_,g)?ee(e)._overflowWeeks=!0:S!=null?ee(e)._overflowWeekday=!0:(E=rs(r,n,i,_,g),e._a[Le]=E.year,e._dayOfYear=E.dayOfYear)}Y.ISO_8601=function(){};Y.RFC_2822=function(){};function Bn(e){if(e._f===Y.ISO_8601){os(e);return}if(e._f===Y.RFC_2822){ls(e);return}e._a=[],ee(e).empty=!0;var t=""+e._i,r,n,i,_,g,E=t.length,S=0,w,b;for(i=Yi(e._f,e._locale).match(On)||[],b=i.length,r=0;r<b;r++)_=i[r],n=(t.match(rl(_,e))||[])[0],n&&(g=t.substr(0,t.indexOf(n)),g.length>0&&ee(e).unusedInput.push(g),t=t.slice(t.indexOf(n)+n.length),S+=n.length),kt[_]?(n?ee(e).empty=!1:ee(e).unusedTokens.push(_),il(_,n,e)):e._strict&&!n&&ee(e).unusedTokens.push(_);ee(e).charsLeftOver=E-S,t.length>0&&ee(e).unusedInput.push(t),e._a[we]<=12&&ee(e).bigHour===!0&&e._a[we]>0&&(ee(e).bigHour=void 0),ee(e).parsedDateParts=e._a.slice(0),ee(e).meridiem=e._meridiem,e._a[we]=mu(e._locale,e._a[we],e._meridiem),w=ee(e).era,w!==null&&(e._a[Le]=e._locale.erasConvertYear(w,e._a[Le])),Un(e),Fn(e)}function mu(e,t,r){var n;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(n=e.isPM(r),n&&t<12&&(t+=12),!n&&t===12&&(t=0)),t)}function vu(e){var t,r,n,i,_,g,E=!1,S=e._f.length;if(S===0){ee(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<S;i++)_=0,g=!1,t=bn({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],Bn(t),wn(t)&&(g=!0),_+=ee(t).charsLeftOver,_+=ee(t).unusedTokens.length*10,ee(t).score=_,E?_<n&&(n=_,r=t):(n==null||_<n||g)&&(n=_,r=t,g&&(E=!0));mt(e,r||t)}function gu(e){if(!e._d){var t=An(e._i),r=t.day===void 0?t.date:t.day;e._a=Wi([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)}),Un(e)}}function yu(e){var t=new ir(Fn(us(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function us(e){var t=e._i,r=e._f;return e._locale=e._locale||ft(e._l),t===null||r===void 0&&t===""?Dr({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),$e(t)?new ir(Fn(t)):(nr(t)?e._d=t:ze(r)?vu(e):r?Bn(e):xu(e),wn(e)||(e._d=null),e))}function xu(e){var t=e._i;Te(t)?e._d=new Date(Y.now()):nr(t)?e._d=new Date(t.valueOf()):typeof t=="string"?hu(e):ze(t)?(e._a=Wi(t.slice(0),function(r){return parseInt(r,10)}),Un(e)):Ot(t)?gu(e):dt(t)?e._d=new Date(t):Y.createFromInputFallback(e)}function ds(e,t,r,n,i){var _={};return(t===!0||t===!1)&&(n=t,t=void 0),(r===!0||r===!1)&&(n=r,r=void 0),(Ot(e)&&Sn(e)||ze(e)&&e.length===0)&&(e=void 0),_._isAMomentObject=!0,_._useUTC=_._isUTC=i,_._l=r,_._i=e,_._f=t,_._strict=n,yu(_)}function he(e,t,r,n){return ds(e,t,r,n,!1)}var Eu=We("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=he.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Dr()}),Su=We("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=he.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Dr()});function fs(e,t){var r,n;if(t.length===1&&ze(t[0])&&(t=t[0]),!t.length)return he();for(r=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](r))&&(r=t[n]);return r}function wu(){var e=[].slice.call(arguments,0);return fs("isBefore",e)}function bu(){var e=[].slice.call(arguments,0);return fs("isAfter",e)}var Ru=function(){return Date.now?Date.now():+new Date},Ht=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ou(e){var t,r=!1,n,i=Ht.length;for(t in e)if(de(e,t)&&!(ye.call(Ht,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(n=0;n<i;++n)if(e[Ht[n]]){if(r)return!1;parseFloat(e[Ht[n]])!==ae(e[Ht[n]])&&(r=!0)}return!0}function Au(){return this._isValid}function Lu(){return Je(NaN)}function Ur(e){var t=An(e),r=t.year||0,n=t.quarter||0,i=t.month||0,_=t.week||t.isoWeek||0,g=t.day||0,E=t.hour||0,S=t.minute||0,w=t.second||0,b=t.millisecond||0;this._isValid=Ou(t),this._milliseconds=+b+w*1e3+S*6e4+E*1e3*60*60,this._days=+g+_*7,this._months=+i+n*3+r*12,this._data={},this._locale=ft(),this._bubble()}function pr(e){return e instanceof Ur}function hn(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Du(e,t,r){var n=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),_=0,g;for(g=0;g<n;g++)ae(e[g])!==ae(t[g])&&_++;return _+i}function cs(e,t){$(e,0,0,function(){var r=this.utcOffset(),n="+";return r<0&&(r=-r,n="-"),n+tt(~~(r/60),2)+t+tt(~~r%60,2)})}cs("Z",":");cs("ZZ","");H("Z",kr);H("ZZ",kr);ce(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=Nn(kr,e)});var Mu=/([\+\-]|\d\d)/gi;function Nn(e,t){var r=(t||"").match(e),n,i,_;return r===null?null:(n=r[r.length-1]||[],i=(n+"").match(Mu)||["-",0,0],_=+(i[1]*60)+ae(i[2]),_===0?0:i[0]==="+"?_:-_)}function jn(e,t){var r,n;return t._isUTC?(r=t.clone(),n=($e(e)||nr(e)?e.valueOf():he(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),Y.updateOffset(r,!1),r):he(e).local()}function _n(e){return-Math.round(e._d.getTimezoneOffset())}Y.updateOffset=function(){};function Tu(e,t,r){var n=this._offset||0,i;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Nn(kr,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(i=_n(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),n!==e&&(!t||this._changeInProgress?ps(this,Je(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Y.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:_n(this)}function Cu(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Pu(e){return this.utcOffset(0,e)}function ku(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(_n(this),"m")),this}function Iu(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Nn(el,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Fu(e){return this.isValid()?(e=e?he(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Uu(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Bu(){if(!Te(this._isDSTShifted))return this._isDSTShifted;var e={},t;return bn(e,this),e=us(e),e._a?(t=e._isUTC?rt(e._a):he(e._a),this._isDSTShifted=this.isValid()&&Du(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Nu(){return this.isValid()?!this._isUTC:!1}function ju(){return this.isValid()?this._isUTC:!1}function hs(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Wu=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Vu=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Je(e,t){var r=e,n=null,i,_,g;return pr(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:dt(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(n=Wu.exec(e))?(i=n[1]==="-"?-1:1,r={y:0,d:ae(n[qe])*i,h:ae(n[we])*i,m:ae(n[He])*i,s:ae(n[ot])*i,ms:ae(hn(n[bt]*1e3))*i}):(n=Vu.exec(e))?(i=n[1]==="-"?-1:1,r={y:St(n[2],i),M:St(n[3],i),w:St(n[4],i),d:St(n[5],i),h:St(n[6],i),m:St(n[7],i),s:St(n[8],i)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(g=Gu(he(r.from),he(r.to)),r={},r.ms=g.milliseconds,r.M=g.months),_=new Ur(r),pr(e)&&de(e,"_locale")&&(_._locale=e._locale),pr(e)&&de(e,"_isValid")&&(_._isValid=e._isValid),_}Je.fn=Ur.prototype;Je.invalid=Lu;function St(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function fi(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function Gu(e,t){var r;return e.isValid()&&t.isValid()?(t=jn(t,e),e.isBefore(t)?r=fi(e,t):(r=fi(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function _s(e,t){return function(r,n){var i,_;return n!==null&&!isNaN(+n)&&(Gi(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),_=r,r=n,n=_),i=Je(r,n),ps(this,i,e),this}}function ps(e,t,r,n){var i=t._milliseconds,_=hn(t._days),g=hn(t._months);e.isValid()&&(n=n??!0,g&&qi(e,Jt(e,"Month")+g*r),_&&Ji(e,"Date",Jt(e,"Date")+_*r),i&&e._d.setTime(e._d.valueOf()+i*r),n&&Y.updateOffset(e,_||g))}var Yu=_s(1,"add"),Hu=_s(-1,"subtract");function ms(e){return typeof e=="string"||e instanceof String}function Ku(e){return $e(e)||nr(e)||ms(e)||dt(e)||$u(e)||zu(e)||e===null||e===void 0}function zu(e){var t=Ot(e)&&!Sn(e),r=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,_,g=n.length;for(i=0;i<g;i+=1)_=n[i],r=r||de(e,_);return t&&r}function $u(e){var t=ze(e),r=!1;return t&&(r=e.filter(function(n){return!dt(n)&&ms(e)}).length===0),t&&r}function Xu(e){var t=Ot(e)&&!Sn(e),r=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,_;for(i=0;i<n.length;i+=1)_=n[i],r=r||de(e,_);return t&&r}function Ju(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function Zu(e,t){arguments.length===1&&(arguments[0]?Ku(arguments[0])?(e=arguments[0],t=void 0):Xu(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||he(),n=jn(r,this).startOf("day"),i=Y.calendarFormat(this,n)||"sameElse",_=t&&(nt(t[i])?t[i].call(this,r):t[i]);return this.format(_||this.localeData().calendar(i,this,he(r)))}function Qu(){return new ir(this)}function qu(e,t){var r=$e(e)?e:he(e);return this.isValid()&&r.isValid()?(t=Ve(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function ed(e,t){var r=$e(e)?e:he(e);return this.isValid()&&r.isValid()?(t=Ve(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function td(e,t,r,n){var i=$e(e)?e:he(e),_=$e(t)?t:he(t);return this.isValid()&&i.isValid()&&_.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(i,r):!this.isBefore(i,r))&&(n[1]===")"?this.isBefore(_,r):!this.isAfter(_,r))):!1}function rd(e,t){var r=$e(e)?e:he(e),n;return this.isValid()&&r.isValid()?(t=Ve(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function nd(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function id(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function sd(e,t,r){var n,i,_;if(!this.isValid())return NaN;if(n=jn(e,this),!n.isValid())return NaN;switch(i=(n.utcOffset()-this.utcOffset())*6e4,t=Ve(t),t){case"year":_=mr(this,n)/12;break;case"month":_=mr(this,n);break;case"quarter":_=mr(this,n)/3;break;case"second":_=(this-n)/1e3;break;case"minute":_=(this-n)/6e4;break;case"hour":_=(this-n)/36e5;break;case"day":_=(this-n-i)/864e5;break;case"week":_=(this-n-i)/6048e5;break;default:_=this-n}return r?_:Be(_)}function mr(e,t){if(e.date()<t.date())return-mr(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(r,"months"),i,_;return t-n<0?(i=e.clone().add(r-1,"months"),_=(t-n)/(n-i)):(i=e.clone().add(r+1,"months"),_=(t-n)/(i-n)),-(r+_)||0}Y.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Y.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function ad(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function od(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?_r(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):nt(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",_r(r,"Z")):_r(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ld(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,n,i,_;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",_=t+'[")]',this.format(r+n+i+_)}function ud(e){e||(e=this.isUtc()?Y.defaultFormatUtc:Y.defaultFormat);var t=_r(this,e);return this.localeData().postformat(t)}function dd(e,t){return this.isValid()&&($e(e)&&e.isValid()||he(e).isValid())?Je({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fd(e){return this.from(he(),e)}function cd(e,t){return this.isValid()&&($e(e)&&e.isValid()||he(e).isValid())?Je({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function hd(e){return this.to(he(),e)}function vs(e){var t;return e===void 0?this._locale._abbr:(t=ft(e),t!=null&&(this._locale=t),this)}var gs=We("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function ys(){return this._locale}var Er=1e3,It=60*Er,Sr=60*It,xs=(365*400+97)*24*Sr;function Ft(e,t){return(e%t+t)%t}function Es(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-xs:new Date(e,t,r).valueOf()}function Ss(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-xs:Date.UTC(e,t,r)}function _d(e){var t,r;if(e=Ve(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?Ss:Es,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Ft(t+(this._isUTC?0:this.utcOffset()*It),Sr);break;case"minute":t=this._d.valueOf(),t-=Ft(t,It);break;case"second":t=this._d.valueOf(),t-=Ft(t,Er);break}return this._d.setTime(t),Y.updateOffset(this,!0),this}function pd(e){var t,r;if(e=Ve(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?Ss:Es,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Sr-Ft(t+(this._isUTC?0:this.utcOffset()*It),Sr)-1;break;case"minute":t=this._d.valueOf(),t+=It-Ft(t,It)-1;break;case"second":t=this._d.valueOf(),t+=Er-Ft(t,Er)-1;break}return this._d.setTime(t),Y.updateOffset(this,!0),this}function md(){return this._d.valueOf()-(this._offset||0)*6e4}function vd(){return Math.floor(this.valueOf()/1e3)}function gd(){return new Date(this.valueOf())}function yd(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function xd(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ed(){return this.isValid()?this.toISOString():null}function Sd(){return wn(this)}function wd(){return mt({},ee(this))}function bd(){return ee(this).overflow}function Rd(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}$("N",0,0,"eraAbbr");$("NN",0,0,"eraAbbr");$("NNN",0,0,"eraAbbr");$("NNNN",0,0,"eraName");$("NNNNN",0,0,"eraNarrow");$("y",["y",1],"yo","eraYear");$("y",["yy",2],0,"eraYear");$("y",["yyy",3],0,"eraYear");$("y",["yyyy",4],0,"eraYear");H("N",Wn);H("NN",Wn);H("NNN",Wn);H("NNNN",Fd);H("NNNNN",Ud);ce(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,n){var i=r._locale.erasParse(e,n,r._strict);i?ee(r).era=i:ee(r).invalidEra=e});H("y",jt);H("yy",jt);H("yyy",jt);H("yyyy",jt);H("yo",Bd);ce(["y","yy","yyy","yyyy"],Le);ce(["yo"],function(e,t,r,n){var i;r._locale._eraYearOrdinalRegex&&(i=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[Le]=r._locale.eraYearOrdinalParse(e,i):t[Le]=parseInt(e,10)});function Od(e,t){var r,n,i,_=this._eras||ft("en")._eras;for(r=0,n=_.length;r<n;++r){switch(typeof _[r].since){case"string":i=Y(_[r].since).startOf("day"),_[r].since=i.valueOf();break}switch(typeof _[r].until){case"undefined":_[r].until=1/0;break;case"string":i=Y(_[r].until).startOf("day").valueOf(),_[r].until=i.valueOf();break}}return _}function Ad(e,t,r){var n,i,_=this.eras(),g,E,S;for(e=e.toUpperCase(),n=0,i=_.length;n<i;++n)if(g=_[n].name.toUpperCase(),E=_[n].abbr.toUpperCase(),S=_[n].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(E===e)return _[n];break;case"NNNN":if(g===e)return _[n];break;case"NNNNN":if(S===e)return _[n];break}else if([g,E,S].indexOf(e)>=0)return _[n]}function Ld(e,t){var r=e.since<=e.until?1:-1;return t===void 0?Y(e.since).year():Y(e.since).year()+(t-e.offset)*r}function Dd(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].name;return""}function Md(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].narrow;return""}function Td(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].abbr;return""}function Cd(){var e,t,r,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(r=i[e].since<=i[e].until?1:-1,n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return(this.year()-Y(i[e].since).year())*r+i[e].offset;return this.year()}function Pd(e){return de(this,"_erasNameRegex")||Vn.call(this),e?this._erasNameRegex:this._erasRegex}function kd(e){return de(this,"_erasAbbrRegex")||Vn.call(this),e?this._erasAbbrRegex:this._erasRegex}function Id(e){return de(this,"_erasNarrowRegex")||Vn.call(this),e?this._erasNarrowRegex:this._erasRegex}function Wn(e,t){return t.erasAbbrRegex(e)}function Fd(e,t){return t.erasNameRegex(e)}function Ud(e,t){return t.erasNarrowRegex(e)}function Bd(e,t){return t._eraYearOrdinalRegex||jt}function Vn(){var e=[],t=[],r=[],n=[],i,_,g,E,S,w=this.eras();for(i=0,_=w.length;i<_;++i)g=lt(w[i].name),E=lt(w[i].abbr),S=lt(w[i].narrow),t.push(g),e.push(E),r.push(S),n.push(g),n.push(E),n.push(S);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}$(0,["gg",2],0,function(){return this.weekYear()%100});$(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Br(e,t){$(0,[e,e.length],0,t)}Br("gggg","weekYear");Br("ggggg","weekYear");Br("GGGG","isoWeekYear");Br("GGGGG","isoWeekYear");H("G",Pr);H("g",Pr);H("GG",_e,Ue);H("gg",_e,Ue);H("GGGG",Dn,Ln);H("gggg",Dn,Ln);H("GGGGG",Cr,Mr);H("ggggg",Cr,Mr);ar(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=ae(e)});ar(["gg","GG"],function(e,t,r,n){t[n]=Y.parseTwoDigitYear(e)});function Nd(e){return ws.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function jd(e){return ws.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Wd(){return ut(this.year(),1,4)}function Vd(){return ut(this.isoWeekYear(),1,4)}function Gd(){var e=this.localeData()._week;return ut(this.year(),e.dow,e.doy)}function Yd(){var e=this.localeData()._week;return ut(this.weekYear(),e.dow,e.doy)}function ws(e,t,r,n,i){var _;return e==null?Qt(this,n,i).year:(_=ut(e,n,i),t>_&&(t=_),Hd.call(this,e,t,r,n,i))}function Hd(e,t,r,n,i){var _=rs(e,t,r,n,i),g=Zt(_.year,0,_.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}$("Q",0,"Qo","quarter");H("Q",Hi);ce("Q",function(e,t){t[at]=(ae(e)-1)*3});function Kd(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}$("D",["DD",2],"Do","date");H("D",_e,Wt);H("DD",_e,Ue);H("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});ce(["D","DD"],qe);ce("Do",function(e,t){t[qe]=ae(e.match(_e)[0])});var bs=Vt("Date",!0);$("DDD",["DDDD",3],"DDDo","dayOfYear");H("DDD",Tr);H("DDDD",Ki);ce(["DDD","DDDD"],function(e,t,r){r._dayOfYear=ae(e)});function zd(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}$("m",["mm",2],0,"minute");H("m",_e,Mn);H("mm",_e,Ue);ce(["m","mm"],He);var $d=Vt("Minutes",!1);$("s",["ss",2],0,"second");H("s",_e,Mn);H("ss",_e,Ue);ce(["s","ss"],ot);var Xd=Vt("Seconds",!1);$("S",0,0,function(){return~~(this.millisecond()/100)});$(0,["SS",2],0,function(){return~~(this.millisecond()/10)});$(0,["SSS",3],0,"millisecond");$(0,["SSSS",4],0,function(){return this.millisecond()*10});$(0,["SSSSS",5],0,function(){return this.millisecond()*100});$(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});$(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});$(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});$(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});H("S",Tr,Hi);H("SS",Tr,Ue);H("SSS",Tr,Ki);var vt,Rs;for(vt="SSSS";vt.length<=9;vt+="S")H(vt,jt);function Jd(e,t){t[bt]=ae(("0."+e)*1e3)}for(vt="S";vt.length<=9;vt+="S")ce(vt,Jd);Rs=Vt("Milliseconds",!1);$("z",0,0,"zoneAbbr");$("zz",0,0,"zoneName");function Zd(){return this._isUTC?"UTC":""}function Qd(){return this._isUTC?"Coordinated Universal Time":""}var F=ir.prototype;F.add=Yu;F.calendar=Zu;F.clone=Qu;F.diff=sd;F.endOf=pd;F.format=ud;F.from=dd;F.fromNow=fd;F.to=cd;F.toNow=hd;F.get=ll;F.invalidAt=bd;F.isAfter=qu;F.isBefore=ed;F.isBetween=td;F.isSame=rd;F.isSameOrAfter=nd;F.isSameOrBefore=id;F.isValid=Sd;F.lang=gs;F.locale=vs;F.localeData=ys;F.max=Su;F.min=Eu;F.parsingFlags=wd;F.set=ul;F.startOf=_d;F.subtract=Hu;F.toArray=yd;F.toObject=xd;F.toDate=gd;F.toISOString=od;F.inspect=ld;typeof Symbol<"u"&&Symbol.for!=null&&(F[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});F.toJSON=Ed;F.toString=ad;F.unix=vd;F.valueOf=md;F.creationData=Rd;F.eraName=Dd;F.eraNarrow=Md;F.eraAbbr=Td;F.eraYear=Cd;F.year=Xi;F.isLeapYear=ol;F.weekYear=Nd;F.isoWeekYear=jd;F.quarter=F.quarters=Kd;F.month=es;F.daysInMonth=gl;F.week=F.weeks=Ol;F.isoWeek=F.isoWeeks=Al;F.weeksInYear=Gd;F.weeksInWeekYear=Yd;F.isoWeeksInYear=Wd;F.isoWeeksInISOWeekYear=Vd;F.date=bs;F.day=F.days=jl;F.weekday=Wl;F.isoWeekday=Vl;F.dayOfYear=zd;F.hour=F.hours=Xl;F.minute=F.minutes=$d;F.second=F.seconds=Xd;F.millisecond=F.milliseconds=Rs;F.utcOffset=Tu;F.utc=Pu;F.local=ku;F.parseZone=Iu;F.hasAlignedHourOffset=Fu;F.isDST=Uu;F.isLocal=Nu;F.isUtcOffset=ju;F.isUtc=hs;F.isUTC=hs;F.zoneAbbr=Zd;F.zoneName=Qd;F.dates=We("dates accessor is deprecated. Use date instead.",bs);F.months=We("months accessor is deprecated. Use month instead",es);F.years=We("years accessor is deprecated. Use year instead",Xi);F.zone=We("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Cu);F.isDSTShifted=We("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Bu);function qd(e){return he(e*1e3)}function ef(){return he.apply(null,arguments).parseZone()}function Os(e){return e}var fe=Rn.prototype;fe.calendar=No;fe.longDateFormat=Go;fe.invalidDate=Ho;fe.ordinal=$o;fe.preparse=Os;fe.postformat=Os;fe.relativeTime=Jo;fe.pastFuture=Zo;fe.set=Uo;fe.eras=Od;fe.erasParse=Ad;fe.erasConvertYear=Ld;fe.erasAbbrRegex=kd;fe.erasNameRegex=Pd;fe.erasNarrowRegex=Id;fe.months=_l;fe.monthsShort=pl;fe.monthsParse=vl;fe.monthsRegex=xl;fe.monthsShortRegex=yl;fe.week=Sl;fe.firstDayOfYear=Rl;fe.firstDayOfWeek=bl;fe.weekdays=Il;fe.weekdaysMin=Ul;fe.weekdaysShort=Fl;fe.weekdaysParse=Nl;fe.weekdaysRegex=Gl;fe.weekdaysShortRegex=Yl;fe.weekdaysMinRegex=Hl;fe.isPM=zl;fe.meridiem=Jl;function wr(e,t,r,n){var i=ft(),_=rt().set(n,t);return i[r](_,e)}function As(e,t,r){if(dt(e)&&(t=e,e=void 0),e=e||"",t!=null)return wr(e,t,r,"month");var n,i=[];for(n=0;n<12;n++)i[n]=wr(e,n,r,"month");return i}function Gn(e,t,r,n){typeof e=="boolean"?(dt(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,dt(t)&&(r=t,t=void 0),t=t||"");var i=ft(),_=e?i._week.dow:0,g,E=[];if(r!=null)return wr(t,(r+_)%7,n,"day");for(g=0;g<7;g++)E[g]=wr(t,(g+_)%7,n,"day");return E}function tf(e,t){return As(e,t,"months")}function rf(e,t){return As(e,t,"monthsShort")}function nf(e,t,r){return Gn(e,t,r,"weekdays")}function sf(e,t,r){return Gn(e,t,r,"weekdaysShort")}function af(e,t,r){return Gn(e,t,r,"weekdaysMin")}yt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=ae(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});Y.lang=We("moment.lang is deprecated. Use moment.locale instead.",yt);Y.langData=We("moment.langData is deprecated. Use moment.localeData instead.",ft);var it=Math.abs;function of(){var e=this._data;return this._milliseconds=it(this._milliseconds),this._days=it(this._days),this._months=it(this._months),e.milliseconds=it(e.milliseconds),e.seconds=it(e.seconds),e.minutes=it(e.minutes),e.hours=it(e.hours),e.months=it(e.months),e.years=it(e.years),this}function Ls(e,t,r,n){var i=Je(t,r);return e._milliseconds+=n*i._milliseconds,e._days+=n*i._days,e._months+=n*i._months,e._bubble()}function lf(e,t){return Ls(this,e,t,1)}function uf(e,t){return Ls(this,e,t,-1)}function ci(e){return e<0?Math.floor(e):Math.ceil(e)}function df(){var e=this._milliseconds,t=this._days,r=this._months,n=this._data,i,_,g,E,S;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=ci(pn(r)+t)*864e5,t=0,r=0),n.milliseconds=e%1e3,i=Be(e/1e3),n.seconds=i%60,_=Be(i/60),n.minutes=_%60,g=Be(_/60),n.hours=g%24,t+=Be(g/24),S=Be(Ds(t)),r+=S,t-=ci(pn(S)),E=Be(r/12),r%=12,n.days=t,n.months=r,n.years=E,this}function Ds(e){return e*4800/146097}function pn(e){return e*146097/4800}function ff(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if(e=Ve(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+n/864e5,r=this._months+Ds(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(pn(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}function ct(e){return function(){return this.as(e)}}var Ms=ct("ms"),cf=ct("s"),hf=ct("m"),_f=ct("h"),pf=ct("d"),mf=ct("w"),vf=ct("M"),gf=ct("Q"),yf=ct("y"),xf=Ms;function Ef(){return Je(this)}function Sf(e){return e=Ve(e),this.isValid()?this[e+"s"]():NaN}function Lt(e){return function(){return this.isValid()?this._data[e]:NaN}}var wf=Lt("milliseconds"),bf=Lt("seconds"),Rf=Lt("minutes"),Of=Lt("hours"),Af=Lt("days"),Lf=Lt("months"),Df=Lt("years");function Mf(){return Be(this.days()/7)}var st=Math.round,Ct={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Tf(e,t,r,n,i){return i.relativeTime(t||1,!!r,e,n)}function Cf(e,t,r,n){var i=Je(e).abs(),_=st(i.as("s")),g=st(i.as("m")),E=st(i.as("h")),S=st(i.as("d")),w=st(i.as("M")),b=st(i.as("w")),o=st(i.as("y")),d=_<=r.ss&&["s",_]||_<r.s&&["ss",_]||g<=1&&["m"]||g<r.m&&["mm",g]||E<=1&&["h"]||E<r.h&&["hh",E]||S<=1&&["d"]||S<r.d&&["dd",S];return r.w!=null&&(d=d||b<=1&&["w"]||b<r.w&&["ww",b]),d=d||w<=1&&["M"]||w<r.M&&["MM",w]||o<=1&&["y"]||["yy",o],d[2]=t,d[3]=+e>0,d[4]=n,Tf.apply(null,d)}function Pf(e){return e===void 0?st:typeof e=="function"?(st=e,!0):!1}function kf(e,t){return Ct[e]===void 0?!1:t===void 0?Ct[e]:(Ct[e]=t,e==="s"&&(Ct.ss=t-1),!0)}function If(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,n=Ct,i,_;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(n=Object.assign({},Ct,t),t.s!=null&&t.ss==null&&(n.ss=t.s-1)),i=this.localeData(),_=Cf(this,!r,n,i),r&&(_=i.pastFuture(+this,_)),i.postformat(_)}var Qr=Math.abs;function Mt(e){return(e>0)-(e<0)||+e}function Nr(){if(!this.isValid())return this.localeData().invalidDate();var e=Qr(this._milliseconds)/1e3,t=Qr(this._days),r=Qr(this._months),n,i,_,g,E=this.asSeconds(),S,w,b,o;return E?(n=Be(e/60),i=Be(n/60),e%=60,n%=60,_=Be(r/12),r%=12,g=e?e.toFixed(3).replace(/\.?0+$/,""):"",S=E<0?"-":"",w=Mt(this._months)!==Mt(E)?"-":"",b=Mt(this._days)!==Mt(E)?"-":"",o=Mt(this._milliseconds)!==Mt(E)?"-":"",S+"P"+(_?w+_+"Y":"")+(r?w+r+"M":"")+(t?b+t+"D":"")+(i||n||e?"T":"")+(i?o+i+"H":"")+(n?o+n+"M":"")+(e?o+g+"S":"")):"P0D"}var le=Ur.prototype;le.isValid=Au;le.abs=of;le.add=lf;le.subtract=uf;le.as=ff;le.asMilliseconds=Ms;le.asSeconds=cf;le.asMinutes=hf;le.asHours=_f;le.asDays=pf;le.asWeeks=mf;le.asMonths=vf;le.asQuarters=gf;le.asYears=yf;le.valueOf=xf;le._bubble=df;le.clone=Ef;le.get=Sf;le.milliseconds=wf;le.seconds=bf;le.minutes=Rf;le.hours=Of;le.days=Af;le.weeks=Mf;le.months=Lf;le.years=Df;le.humanize=If;le.toISOString=Nr;le.toString=Nr;le.toJSON=Nr;le.locale=vs;le.localeData=ys;le.toIsoString=We("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Nr);le.lang=gs;$("X",0,0,"unix");$("x",0,0,"valueOf");H("x",Pr);H("X",tl);ce("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});ce("x",function(e,t,r){r._d=new Date(ae(e))});//! moment.js
Y.version="2.30.1";Io(he);Y.fn=F;Y.min=wu;Y.max=bu;Y.now=Ru;Y.utc=rt;Y.unix=qd;Y.months=tf;Y.isDate=nr;Y.locale=yt;Y.invalid=Dr;Y.duration=Je;Y.isMoment=$e;Y.weekdays=nf;Y.parseZone=ef;Y.localeData=ft;Y.isDuration=pr;Y.monthsShort=rf;Y.weekdaysMin=af;Y.defineLocale=In;Y.updateLocale=eu;Y.locales=tu;Y.weekdaysShort=sf;Y.normalizeUnits=Ve;Y.relativeTimeRounding=Pf;Y.relativeTimeThreshold=kf;Y.calendarFormat=Ju;Y.prototype=F;Y.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var Ts={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(self,function(){return function(){var r={"./node_modules/es6-promise/dist/es6-promise.js":function(g,E,S){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(w,b){g.exports=b()})(this,function(){function w(I){var B=typeof I;return I!==null&&(B==="object"||B==="function")}function b(I){return typeof I=="function"}var o=void 0;Array.isArray?o=Array.isArray:o=function(I){return Object.prototype.toString.call(I)==="[object Array]"};var d=o,s=0,a=void 0,u=void 0,c=function(B,N){R[s]=B,R[s+1]=N,s+=2,s===2&&(u?u(M):k())};function h(I){u=I}function f(I){c=I}var p=typeof window<"u"?window:void 0,m=p||{},l=m.MutationObserver||m.WebKitMutationObserver,y=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",x=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function v(){return function(){return process.nextTick(M)}}function O(){return typeof a<"u"?function(){a(M)}:L()}function D(){var I=0,B=new l(M),N=document.createTextNode("");return B.observe(N,{characterData:!0}),function(){N.data=I=++I%2}}function A(){var I=new MessageChannel;return I.port1.onmessage=M,function(){return I.port2.postMessage(0)}}function L(){var I=setTimeout;return function(){return I(M,1)}}var R=new Array(1e3);function M(){for(var I=0;I<s;I+=2){var B=R[I],N=R[I+1];B(N),R[I]=void 0,R[I+1]=void 0}s=0}function T(){try{var I=Function("return this")().require("vertx");return a=I.runOnLoop||I.runOnContext,O()}catch{return L()}}var k=void 0;y?k=v():l?k=D():x?k=A():p===void 0?k=T():k=L();function C(I,B){var N=this,J=new this.constructor(U);J[K]===void 0&&Oe(J);var re=N._state;if(re){var ne=arguments[re-1];c(function(){return Ie(re,J,ne,N._result)})}else Pe(N,J,I,B);return J}function G(I){var B=this;if(I&&typeof I=="object"&&I.constructor===B)return I;var N=new B(U);return ve(N,I),N}var K=Math.random().toString(36).substring(2);function U(){}var j=void 0,te=1,Q=2;function X(){return new TypeError("You cannot resolve a promise with itself")}function oe(){return new TypeError("A promises callback cannot return that same promise.")}function W(I,B,N,J){try{I.call(B,N,J)}catch(re){return re}}function V(I,B,N){c(function(J){var re=!1,ne=W(N,B,function(Re){re||(re=!0,B!==Re?ve(J,Re):se(J,Re))},function(Re){re||(re=!0,Z(J,Re))},"Settle: "+(J._label||" unknown promise"));!re&&ne&&(re=!0,Z(J,ne))},I)}function z(I,B){B._state===te?se(I,B._result):B._state===Q?Z(I,B._result):Pe(B,void 0,function(N){return ve(I,N)},function(N){return Z(I,N)})}function ue(I,B,N){B.constructor===I.constructor&&N===C&&B.constructor.resolve===G?z(I,B):N===void 0?se(I,B):b(N)?V(I,B,N):se(I,B)}function ve(I,B){if(I===B)Z(I,X());else if(w(B)){var N=void 0;try{N=B.then}catch(J){Z(I,J);return}ue(I,B,N)}else se(I,B)}function ie(I){I._onerror&&I._onerror(I._result),ke(I)}function se(I,B){I._state===j&&(I._result=B,I._state=te,I._subscribers.length!==0&&c(ke,I))}function Z(I,B){I._state===j&&(I._state=Q,I._result=B,c(ie,I))}function Pe(I,B,N,J){var re=I._subscribers,ne=re.length;I._onerror=null,re[ne]=B,re[ne+te]=N,re[ne+Q]=J,ne===0&&I._state&&c(ke,I)}function ke(I){var B=I._subscribers,N=I._state;if(B.length!==0){for(var J=void 0,re=void 0,ne=I._result,Re=0;Re<B.length;Re+=3)J=B[Re],re=B[Re+N],J?Ie(N,J,re,ne):re(ne);I._subscribers.length=0}}function Ie(I,B,N,J){var re=b(N),ne=void 0,Re=void 0,Dt=!0;if(re){try{ne=N(J)}catch(or){Dt=!1,Re=or}if(B===ne){Z(B,oe());return}}else ne=J;B._state!==j||(re&&Dt?ve(B,ne):Dt===!1?Z(B,Re):I===te?se(B,ne):I===Q&&Z(B,ne))}function Ze(I,B){try{B(function(J){ve(I,J)},function(J){Z(I,J)})}catch(N){Z(I,N)}}var Fe=0;function Qe(){return Fe++}function Oe(I){I[K]=Fe++,I._state=void 0,I._result=void 0,I._subscribers=[]}function xe(){return new Error("Array Methods must be provided an Array")}var be=function(){function I(B,N){this._instanceConstructor=B,this.promise=new B(U),this.promise[K]||Oe(this.promise),d(N)?(this.length=N.length,this._remaining=N.length,this._result=new Array(this.length),this.length===0?se(this.promise,this._result):(this.length=this.length||0,this._enumerate(N),this._remaining===0&&se(this.promise,this._result))):Z(this.promise,xe())}return I.prototype._enumerate=function(N){for(var J=0;this._state===j&&J<N.length;J++)this._eachEntry(N[J],J)},I.prototype._eachEntry=function(N,J){var re=this._instanceConstructor,ne=re.resolve;if(ne===G){var Re=void 0,Dt=void 0,or=!1;try{Re=N.then}catch(Gr){or=!0,Dt=Gr}if(Re===C&&N._state!==j)this._settledAt(N._state,J,N._result);else if(typeof Re!="function")this._remaining--,this._result[J]=N;else if(re===Me){var Vr=new re(U);or?Z(Vr,Dt):ue(Vr,N,Re),this._willSettleAt(Vr,J)}else this._willSettleAt(new re(function(Gr){return Gr(N)}),J)}else this._willSettleAt(ne(N),J)},I.prototype._settledAt=function(N,J,re){var ne=this.promise;ne._state===j&&(this._remaining--,N===Q?Z(ne,re):this._result[J]=re),this._remaining===0&&se(ne,this._result)},I.prototype._willSettleAt=function(N,J){var re=this;Pe(N,void 0,function(ne){return re._settledAt(te,J,ne)},function(ne){return re._settledAt(Q,J,ne)})},I}();function Ge(I){return new be(this,I).promise}function ht(I){var B=this;return d(I)?new B(function(N,J){for(var re=I.length,ne=0;ne<re;ne++)B.resolve(I[ne]).then(N,J)}):new B(function(N,J){return J(new TypeError("You must pass an array to race."))})}function jr(I){var B=this,N=new B(U);return Z(N,I),N}function Wr(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ks(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Me=function(){function I(B){this[K]=Qe(),this._result=this._state=void 0,this._subscribers=[],U!==B&&(typeof B!="function"&&Wr(),this instanceof I?Ze(this,B):ks())}return I.prototype.catch=function(N){return this.then(null,N)},I.prototype.finally=function(N){var J=this,re=J.constructor;return b(N)?J.then(function(ne){return re.resolve(N()).then(function(){return ne})},function(ne){return re.resolve(N()).then(function(){throw ne})}):J.then(N,N)},I}();Me.prototype.then=C,Me.all=Ge,Me.race=ht,Me.resolve=G,Me.reject=jr,Me._setScheduler=h,Me._setAsap=f,Me._asap=c;function Is(){var I=void 0;if(typeof S.g<"u")I=S.g;else if(typeof self<"u")I=self;else try{I=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var B=I.Promise;if(B){var N=null;try{N=Object.prototype.toString.call(B.resolve())}catch{}if(N==="[object Promise]"&&!B.cast)return}I.Promise=Me}return Me.polyfill=Is,Me.Promise=Me,Me})},"./node_modules/events/events.js":function(g){var E=typeof Reflect=="object"?Reflect:null,S=E&&typeof E.apply=="function"?E.apply:function(L,R,M){return Function.prototype.apply.call(L,R,M)},w;E&&typeof E.ownKeys=="function"?w=E.ownKeys:Object.getOwnPropertySymbols?w=function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:w=function(L){return Object.getOwnPropertyNames(L)};function b(A){console&&console.warn&&console.warn(A)}var o=Number.isNaN||function(L){return L!==L};function d(){d.init.call(this)}g.exports=d,g.exports.once=v,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var s=10;function a(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(A){if(typeof A!="number"||A<0||o(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");s=A}}),d.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(L){if(typeof L!="number"||L<0||o(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this};function u(A){return A._maxListeners===void 0?d.defaultMaxListeners:A._maxListeners}d.prototype.getMaxListeners=function(){return u(this)},d.prototype.emit=function(L){for(var R=[],M=1;M<arguments.length;M++)R.push(arguments[M]);var T=L==="error",k=this._events;if(k!==void 0)T=T&&k.error===void 0;else if(!T)return!1;if(T){var C;if(R.length>0&&(C=R[0]),C instanceof Error)throw C;var G=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw G.context=C,G}var K=k[L];if(K===void 0)return!1;if(typeof K=="function")S(K,this,R);else for(var U=K.length,j=l(K,U),M=0;M<U;++M)S(j[M],this,R);return!0};function c(A,L,R,M){var T,k,C;if(a(R),k=A._events,k===void 0?(k=A._events=Object.create(null),A._eventsCount=0):(k.newListener!==void 0&&(A.emit("newListener",L,R.listener?R.listener:R),k=A._events),C=k[L]),C===void 0)C=k[L]=R,++A._eventsCount;else if(typeof C=="function"?C=k[L]=M?[R,C]:[C,R]:M?C.unshift(R):C.push(R),T=u(A),T>0&&C.length>T&&!C.warned){C.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=A,G.type=L,G.count=C.length,b(G)}return A}d.prototype.addListener=function(L,R){return c(this,L,R,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(L,R){return c(this,L,R,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(A,L,R){var M={fired:!1,wrapFn:void 0,target:A,type:L,listener:R},T=h.bind(M);return T.listener=R,M.wrapFn=T,T}d.prototype.once=function(L,R){return a(R),this.on(L,f(this,L,R)),this},d.prototype.prependOnceListener=function(L,R){return a(R),this.prependListener(L,f(this,L,R)),this},d.prototype.removeListener=function(L,R){var M,T,k,C,G;if(a(R),T=this._events,T===void 0)return this;if(M=T[L],M===void 0)return this;if(M===R||M.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete T[L],T.removeListener&&this.emit("removeListener",L,M.listener||R));else if(typeof M!="function"){for(k=-1,C=M.length-1;C>=0;C--)if(M[C]===R||M[C].listener===R){G=M[C].listener,k=C;break}if(k<0)return this;k===0?M.shift():y(M,k),M.length===1&&(T[L]=M[0]),T.removeListener!==void 0&&this.emit("removeListener",L,G||R)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(L){var R,M,T;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[L]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[L]),this;if(arguments.length===0){var k=Object.keys(M),C;for(T=0;T<k.length;++T)C=k[T],C!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=M[L],typeof R=="function")this.removeListener(L,R);else if(R!==void 0)for(T=R.length-1;T>=0;T--)this.removeListener(L,R[T]);return this};function p(A,L,R){var M=A._events;if(M===void 0)return[];var T=M[L];return T===void 0?[]:typeof T=="function"?R?[T.listener||T]:[T]:R?x(T):l(T,T.length)}d.prototype.listeners=function(L){return p(this,L,!0)},d.prototype.rawListeners=function(L){return p(this,L,!1)},d.listenerCount=function(A,L){return typeof A.listenerCount=="function"?A.listenerCount(L):m.call(A,L)},d.prototype.listenerCount=m;function m(A){var L=this._events;if(L!==void 0){var R=L[A];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}d.prototype.eventNames=function(){return this._eventsCount>0?w(this._events):[]};function l(A,L){for(var R=new Array(L),M=0;M<L;++M)R[M]=A[M];return R}function y(A,L){for(;L+1<A.length;L++)A[L]=A[L+1];A.pop()}function x(A){for(var L=new Array(A.length),R=0;R<L.length;++R)L[R]=A[R].listener||A[R];return L}function v(A,L){return new Promise(function(R,M){function T(C){A.removeListener(L,k),M(C)}function k(){typeof A.removeListener=="function"&&A.removeListener("error",T),R([].slice.call(arguments))}D(A,L,k,{once:!0}),L!=="error"&&O(A,T,{once:!0})})}function O(A,L,R){typeof A.on=="function"&&D(A,"error",L,R)}function D(A,L,R,M){if(typeof A.on=="function")M.once?A.once(L,R):A.on(L,R);else if(typeof A.addEventListener=="function")A.addEventListener(L,function T(k){M.once&&A.removeEventListener(L,T),R(k)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}},"./node_modules/webworkify-webpack/index.js":function(g,E,S){function w(h){var f={};function p(l){if(f[l])return f[l].exports;var y=f[l]={i:l,l:!1,exports:{}};return h[l].call(y.exports,y,y.exports,p),y.l=!0,y.exports}p.m=h,p.c=f,p.i=function(l){return l},p.d=function(l,y,x){p.o(l,y)||Object.defineProperty(l,y,{configurable:!1,enumerable:!0,get:x})},p.r=function(l){Object.defineProperty(l,"__esModule",{value:!0})},p.n=function(l){var y=l&&l.__esModule?function(){return l.default}:function(){return l};return p.d(y,"a",y),y},p.o=function(l,y){return Object.prototype.hasOwnProperty.call(l,y)},p.p="/",p.oe=function(l){throw console.error(l),l};var m=p(p.s=ENTRY_MODULE);return m.default||m}var b="[\\.|\\-|\\+|\\w|/|@]+",o="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+b+").*?\\)";function d(h){return(h+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(h){return!isNaN(1*h)}function a(h,f,p){var m={};m[p]=[];var l=f.toString(),y=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!y)return m;for(var x=y[1],v=new RegExp("(\\\\n|\\W)"+d(x)+o,"g"),O;O=v.exec(l);)O[3]!=="dll-reference"&&m[p].push(O[3]);for(v=new RegExp("\\("+d(x)+'\\("(dll-reference\\s('+b+'))"\\)\\)'+o,"g");O=v.exec(l);)h[O[2]]||(m[p].push(O[1]),h[O[2]]=S(O[1]).m),m[O[2]]=m[O[2]]||[],m[O[2]].push(O[4]);for(var D=Object.keys(m),A=0;A<D.length;A++)for(var L=0;L<m[D[A]].length;L++)s(m[D[A]][L])&&(m[D[A]][L]=1*m[D[A]][L]);return m}function u(h){var f=Object.keys(h);return f.reduce(function(p,m){return p||h[m].length>0},!1)}function c(h,f){for(var p={main:[f]},m={main:[]},l={main:{}};u(p);)for(var y=Object.keys(p),x=0;x<y.length;x++){var v=y[x],O=p[v],D=O.pop();if(l[v]=l[v]||{},!(l[v][D]||!h[v][D])){l[v][D]=!0,m[v]=m[v]||[],m[v].push(D);for(var A=a(h,h[v][D],v),L=Object.keys(A),R=0;R<L.length;R++)p[L[R]]=p[L[R]]||[],p[L[R]]=p[L[R]].concat(A[L[R]])}}return m}g.exports=function(h,f){f=f||{};var p={main:S.m},m=f.all?{main:Object.keys(p.main)}:c(p,h),l="";Object.keys(m).filter(function(D){return D!=="main"}).forEach(function(D){for(var A=0;m[D][A];)A++;m[D].push(A),p[D][A]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+D+" = ("+w.toString().replace("ENTRY_MODULE",JSON.stringify(A))+")({"+m[D].map(function(L){return""+JSON.stringify(L)+": "+p[D][L].toString()}).join(",")+`});
`}),l=l+"new (("+w.toString().replace("ENTRY_MODULE",JSON.stringify(h))+")({"+m.main.map(function(D){return""+JSON.stringify(D)+": "+p.main[D].toString()}).join(",")+"}))(self);";var y=new window.Blob([l],{type:"text/javascript"});if(f.bare)return y;var x=window.URL||window.webkitURL||window.mozURL||window.msURL,v=x.createObjectURL(y),O=new window.Worker(v);return O.objectURL=v,O}},"./src/config.js":function(g,E,S){S.r(E),S.d(E,{defaultConfig:function(){return w},createDefaultConfig:function(){return b}});var w={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:3*60,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:3*60,autoCleanupMinBackwardDuration:2*60,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function b(){return Object.assign({},w)}},"./src/core/features.js":function(g,E,S){S.r(E);var w=S("./src/io/io-controller.js"),b=S("./src/config.js"),o=function(){function d(){}return d.supportMSEH264Playback=function(){var s='video/mp4; codecs="avc1.42E01E,mp4a.40.2"',a=self.MediaSource&&self.MediaSource.isTypeSupported(s),u=self.ManagedMediaSource&&self.ManagedMediaSource.isTypeSupported(s);return a||u},d.supportMSEH265Playback=function(){var s='video/mp4; codecs="hvc1.1.6.L93.B0"',a=self.MediaSource&&self.MediaSource.isTypeSupported(s),u=self.ManagedMediaSource&&self.ManagedMediaSource.isTypeSupported(s);return a||u},d.supportNetworkStreamIO=function(){var s=new w.default({},(0,b.createDefaultConfig)()),a=s.loaderType;return s.destroy(),a=="fetch-stream-loader"||a=="xhr-moz-chunked-loader"},d.getNetworkLoaderTypeName=function(){var s=new w.default({},(0,b.createDefaultConfig)()),a=s.loaderType;return s.destroy(),a},d.supportNativeMediaPlayback=function(s){d.videoElement==null&&(d.videoElement=window.document.createElement("video"));var a=d.videoElement.canPlayType(s);return a==="probably"||a=="maybe"},d.getFeatureList=function(){var s={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return s.mseFlvPlayback=d.supportMSEH264Playback(),s.networkStreamIO=d.supportNetworkStreamIO(),s.networkLoaderName=d.getNetworkLoaderTypeName(),s.mseLiveFlvPlayback=s.mseFlvPlayback&&s.networkStreamIO,s.nativeMP4H264Playback=d.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),s.nativeMP4H265Playback=d.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),s.nativeWebmVP8Playback=d.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),s.nativeWebmVP9Playback=d.supportNativeMediaPlayback('video/webm; codecs="vp9"'),s},d}();E.default=o},"./src/core/media-info.js":function(g,E,S){S.r(E);var w=function(){function b(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return b.prototype.isComplete=function(){var o=this.hasAudio===!1||this.hasAudio===!0&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,d=this.hasVideo===!1||this.hasVideo===!0&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&o&&d},b.prototype.isSeekable=function(){return this.hasKeyframesIndex===!0},b.prototype.getNearestKeyframe=function(o){if(this.keyframesIndex==null)return null;var d=this.keyframesIndex,s=this._search(d.times,o);return{index:s,milliseconds:d.times[s],fileposition:d.filepositions[s]}},b.prototype._search=function(o,d){var s=0,a=o.length-1,u=0,c=0,h=a;for(d<o[0]&&(s=0,c=h+1);c<=h;)if(u=c+Math.floor((h-c)/2),u===a||d>=o[u]&&d<o[u+1]){s=u;break}else o[u]<d?c=u+1:h=u-1;return s},b}();E.default=w},"./src/core/media-segment-info.js":function(g,E,S){S.r(E),S.d(E,{SampleInfo:function(){return w},MediaSegmentInfo:function(){return b},IDRSampleList:function(){return o},MediaSegmentInfoList:function(){return d}});var w=function(){function s(a,u,c,h,f){this.dts=a,this.pts=u,this.duration=c,this.originalDts=h,this.isSyncPoint=f,this.fileposition=null}return s}(),b=function(){function s(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return s.prototype.appendSyncPoint=function(a){a.isSyncPoint=!0,this.syncPoints.push(a)},s}(),o=function(){function s(){this._list=[]}return s.prototype.clear=function(){this._list=[]},s.prototype.appendArray=function(a){var u=this._list;a.length!==0&&(u.length>0&&a[0].originalDts<u[u.length-1].originalDts&&this.clear(),Array.prototype.push.apply(u,a))},s.prototype.getLastSyncPointBeforeDts=function(a){if(this._list.length==0)return null;var u=this._list,c=0,h=u.length-1,f=0,p=0,m=h;for(a<u[0].dts&&(c=0,p=m+1);p<=m;)if(f=p+Math.floor((m-p)/2),f===h||a>=u[f].dts&&a<u[f+1].dts){c=f;break}else u[f].dts<a?p=f+1:m=f-1;return this._list[c]},s}(),d=function(){function s(a){this._type=a,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),s.prototype.isEmpty=function(){return this._list.length===0},s.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},s.prototype._searchNearestSegmentBefore=function(a){var u=this._list;if(u.length===0)return-2;var c=u.length-1,h=0,f=0,p=c,m=0;if(a<u[0].originalBeginDts)return m=-1,m;for(;f<=p;)if(h=f+Math.floor((p-f)/2),h===c||a>u[h].lastSample.originalDts&&a<u[h+1].originalBeginDts){m=h;break}else u[h].originalBeginDts<a?f=h+1:p=h-1;return m},s.prototype._searchNearestSegmentAfter=function(a){return this._searchNearestSegmentBefore(a)+1},s.prototype.append=function(a){var u=this._list,c=a,h=this._lastAppendLocation,f=0;h!==-1&&h<u.length&&c.originalBeginDts>=u[h].lastSample.originalDts&&(h===u.length-1||h<u.length-1&&c.originalBeginDts<u[h+1].originalBeginDts)?f=h+1:u.length>0&&(f=this._searchNearestSegmentBefore(c.originalBeginDts)+1),this._lastAppendLocation=f,this._list.splice(f,0,c)},s.prototype.getLastSegmentBefore=function(a){var u=this._searchNearestSegmentBefore(a);return u>=0?this._list[u]:null},s.prototype.getLastSampleBefore=function(a){var u=this.getLastSegmentBefore(a);return u!=null?u.lastSample:null},s.prototype.getLastSyncPointBefore=function(a){for(var u=this._searchNearestSegmentBefore(a),c=this._list[u].syncPoints;c.length===0&&u>0;)u--,c=this._list[u].syncPoints;return c.length>0?c[c.length-1]:null},s}()},"./src/core/mse-controller.js":function(g,E,S){S.r(E);var w=S("./node_modules/events/events.js"),b=S.n(w),o=S("./src/utils/logger.js"),d=S("./src/utils/browser.js"),s=S("./src/core/mse-events.js"),a=S("./src/core/media-segment-info.js"),u=S("./src/utils/exception.js"),c=function(){function h(f){this.TAG="MSEController",this._config=f,this._emitter=new(b()),this._config.isLive&&this._config.autoCleanupSourceBuffer==null&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onStartStreaming:this._onStartStreaming.bind(this),onEndStreaming:this._onEndStreaming.bind(this),onQualityChange:this._onQualityChange.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._useManagedMediaSource="ManagedMediaSource"in self&&!("MediaSource"in self),this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElementProxy=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new a.IDRSampleList}return h.prototype.destroy=function(){(this._mediaElementProxy||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},h.prototype.on=function(f,p){this._emitter.addListener(f,p)},h.prototype.off=function(f,p){this._emitter.removeListener(f,p)},h.prototype.attachMediaElement=function(f){if(this._mediaSource)throw new u.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");this._useManagedMediaSource&&o.default.v(this.TAG,"Using ManagedMediaSource");var p=this._mediaSource=this._useManagedMediaSource?new self.ManagedMediaSource:new self.MediaSource;p.addEventListener("sourceopen",this.e.onSourceOpen),p.addEventListener("sourceended",this.e.onSourceEnded),p.addEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(p.addEventListener("startstreaming",this.e.onStartStreaming),p.addEventListener("endstreaming",this.e.onEndStreaming),p.addEventListener("qualitychange",this.e.onQualityChange)),this._mediaElementProxy=f,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),f.src=this._mediaSourceObjectURL},h.prototype.detachMediaElement=function(){if(this._mediaSource){var f=this._mediaSource;for(var p in this._sourceBuffers){var m=this._pendingSegments[p];m.splice(0,m.length),this._pendingSegments[p]=null,this._pendingRemoveRanges[p]=null,this._lastInitSegments[p]=null;var l=this._sourceBuffers[p];if(l){if(f.readyState!=="closed"){try{f.removeSourceBuffer(l)}catch(y){o.default.e(this.TAG,y.message)}l.removeEventListener("error",this.e.onSourceBufferError),l.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[p]=null,this._sourceBuffers[p]=null}}if(f.readyState==="open")try{f.endOfStream()}catch(y){o.default.e(this.TAG,y.message)}f.removeEventListener("sourceopen",this.e.onSourceOpen),f.removeEventListener("sourceended",this.e.onSourceEnded),f.removeEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(f.removeEventListener("startstraming",this.e.onStartStreaming),f.removeEventListener("endstreaming",this.e.onEndStreaming),f.removeEventListener("qualitychange",this.e.onQualityChange)),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElementProxy&&(this._mediaElementProxy.src="",this._mediaElementProxy.removeAttribute("src"),this._mediaElementProxy=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},h.prototype.isManagedMediaSource=function(){return this._useManagedMediaSource},h.prototype.getObject=function(){if(!this._mediaSource)throw new u.IllegalStateException("MediaSource has not been initialized yet!");return this._mediaSource},h.prototype.getHandle=function(){if(!this._mediaSource)throw new u.IllegalStateException("MediaSource has not been initialized yet!");return this._mediaSource.handle},h.prototype.getObjectURL=function(){if(!this._mediaSource)throw new u.IllegalStateException("MediaSource has not been initialized yet!");return this._mediaSourceObjectURL==null&&(this._mediaSourceObjectURL=URL.createObjectURL(this._mediaSource)),this._mediaSourceObjectURL},h.prototype.revokeObjectURL=function(){this._mediaSourceObjectURL&&(URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},h.prototype.appendInitSegment=function(f,p){if(p===void 0&&(p=void 0),!this._mediaSource||this._mediaSource.readyState!=="open"||this._mediaSource.streaming===!1){this._pendingSourceBufferInit.push(f),this._pendingSegments[f.type].push(f);return}var m=f,l=""+m.container;m.codec&&m.codec.length>0&&(m.codec==="opus"&&d.default.safari&&(m.codec="Opus"),l+=";codecs="+m.codec);var y=!1;if(o.default.v(this.TAG,"Received Initialization Segment, mimeType: "+l),this._lastInitSegments[m.type]=m,l!==this._mimeTypes[m.type]){if(this._mimeTypes[m.type])o.default.v(this.TAG,"Notice: "+m.type+" mimeType changed, origin: "+this._mimeTypes[m.type]+", target: "+l);else{y=!0;try{var x=this._sourceBuffers[m.type]=this._mediaSource.addSourceBuffer(l);x.addEventListener("error",this.e.onSourceBufferError),x.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(v){o.default.e(this.TAG,v.message),this._emitter.emit(s.default.ERROR,{code:v.code,msg:v.message});return}}this._mimeTypes[m.type]=l}p||this._pendingSegments[m.type].push(m),y||this._sourceBuffers[m.type]&&!this._sourceBuffers[m.type].updating&&this._doAppendSegments(),d.default.safari&&m.container==="audio/mpeg"&&m.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=m.mediaDuration/1e3,this._updateMediaSourceDuration())},h.prototype.appendMediaSegment=function(f){var p=f;this._pendingSegments[p.type].push(p),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var m=this._sourceBuffers[p.type];m&&!m.updating&&!this._hasPendingRemoveRanges()&&this._doAppendSegments()},h.prototype.seek=function(f){for(var p in this._sourceBuffers)if(this._sourceBuffers[p]){var m=this._sourceBuffers[p];if(this._mediaSource.readyState==="open")try{m.abort()}catch(D){o.default.e(this.TAG,D.message)}this._idrList.clear();var l=this._pendingSegments[p];if(l.splice(0,l.length),this._mediaSource.readyState!=="closed"){for(var y=0;y<m.buffered.length;y++){var x=m.buffered.start(y),v=m.buffered.end(y);this._pendingRemoveRanges[p].push({start:x,end:v})}if(m.updating||this._doRemoveRanges(),d.default.safari){var O=this._lastInitSegments[p];O&&(this._pendingSegments[p].push(O),m.updating||this._doAppendSegments())}}}},h.prototype.endOfStream=function(){var f=this._mediaSource,p=this._sourceBuffers;if(!f||f.readyState!=="open"){f&&f.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0);return}p.video&&p.video.updating||p.audio&&p.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,f.endOfStream())},h.prototype.getNearestKeyframe=function(f){return this._idrList.getLastSyncPointBeforeDts(f)},h.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var f=this._mediaElementProxy.getCurrentTime();for(var p in this._sourceBuffers){var m=this._sourceBuffers[p];if(m){var l=m.buffered;if(l.length>=1&&f-l.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},h.prototype._doCleanupSourceBuffer=function(){var f=this._mediaElementProxy.getCurrentTime();for(var p in this._sourceBuffers){var m=this._sourceBuffers[p];if(m){for(var l=m.buffered,y=!1,x=0;x<l.length;x++){var v=l.start(x),O=l.end(x);if(v<=f&&f<O+3){if(f-v>=this._config.autoCleanupMaxBackwardDuration){y=!0;var D=f-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[p].push({start:v,end:D})}}else O<f&&(y=!0,this._pendingRemoveRanges[p].push({start:v,end:O}))}y&&!m.updating&&this._doRemoveRanges()}}},h.prototype._updateMediaSourceDuration=function(){var f=this._sourceBuffers;if(!(this._mediaElementProxy.getReadyState()===0||this._mediaSource.readyState!=="open")&&!(f.video&&f.video.updating||f.audio&&f.audio.updating)){var p=this._mediaSource.duration,m=this._pendingMediaDuration;m>0&&(isNaN(p)||m>p)&&(o.default.v(this.TAG,"Update MediaSource duration from "+p+" to "+m),this._mediaSource.duration=m),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},h.prototype._doRemoveRanges=function(){for(var f in this._pendingRemoveRanges)if(!(!this._sourceBuffers[f]||this._sourceBuffers[f].updating))for(var p=this._sourceBuffers[f],m=this._pendingRemoveRanges[f];m.length&&!p.updating;){var l=m.shift();p.remove(l.start,l.end)}},h.prototype._doAppendSegments=function(){var f=this._pendingSegments;for(var p in f)if(!(!this._sourceBuffers[p]||this._sourceBuffers[p].updating||this._mediaSource.streaming===!1)&&f[p].length>0){var m=f[p].shift();if(typeof m.timestampOffset=="number"&&isFinite(m.timestampOffset)){var l=this._sourceBuffers[p].timestampOffset,y=m.timestampOffset/1e3,x=Math.abs(l-y);x>.1&&(o.default.v(this.TAG,"Update MPEG audio timestampOffset from "+l+" to "+y),this._sourceBuffers[p].timestampOffset=y),delete m.timestampOffset}if(!m.data||m.data.byteLength===0)continue;try{this._sourceBuffers[p].appendBuffer(m.data),this._isBufferFull=!1,p==="video"&&m.hasOwnProperty("info")&&this._idrList.appendArray(m.info.syncPoints)}catch(v){this._pendingSegments[p].unshift(m),v.code===22?(this._isBufferFull||this._emitter.emit(s.default.BUFFER_FULL),this._isBufferFull=!0):(o.default.e(this.TAG,p,v.message),this._emitter.emit(s.default.ERROR,{code:v.code,msg:v.message}))}}},h.prototype._onSourceOpen=function(){if(o.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var f=this._pendingSourceBufferInit;f.length;){var p=f.shift();this.appendInitSegment(p,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(s.default.SOURCE_OPEN)},h.prototype._onStartStreaming=function(){o.default.v(this.TAG,"ManagedMediaSource onStartStreaming"),this._emitter.emit(s.default.START_STREAMING)},h.prototype._onEndStreaming=function(){o.default.v(this.TAG,"ManagedMediaSource onEndStreaming"),this._emitter.emit(s.default.END_STREAMING)},h.prototype._onQualityChange=function(){o.default.v(this.TAG,"ManagedMediaSource onQualityChange")},h.prototype._onSourceEnded=function(){o.default.v(this.TAG,"MediaSource onSourceEnded")},h.prototype._onSourceClose=function(){o.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(this._mediaSource.removeEventListener("startstraming",this.e.onStartStreaming),this._mediaSource.removeEventListener("endstreaming",this.e.onEndStreaming),this._mediaSource.removeEventListener("qualitychange",this.e.onQualityChange)))},h.prototype._hasPendingSegments=function(){var f=this._pendingSegments;return(f.video&&f.video.length)>0||f.audio&&f.audio.length>0},h.prototype._hasPendingRemoveRanges=function(){var f=this._pendingRemoveRanges;return(f.video&&f.video.length)>0||f.audio&&f.audio.length>0},h.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(s.default.UPDATE_END)},h.prototype._onSourceBufferError=function(f){o.default.e(this.TAG,"SourceBuffer Error: "+f)},h}();E.default=c},"./src/core/mse-events.js":function(g,E,S){S.r(E);var w={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full",START_STREAMING:"start_streaming",END_STREAMING:"end_streaming"};E.default=w},"./src/core/transmuxer.js":function(g,E,S){S.r(E);var w=S("./node_modules/events/events.js"),b=S.n(w),o=S("./node_modules/webworkify-webpack/index.js"),d=S.n(o),s=S("./src/utils/logger.js"),a=S("./src/utils/logging-control.js"),u=S("./src/core/transmuxing-controller.js"),c=S("./src/core/transmuxing-events.js"),h=S("./src/core/media-info.js"),f=function(){function p(m,l){if(this.TAG="Transmuxer",this._emitter=new(b()),l.enableWorker&&typeof Worker<"u")try{this._worker=d()("./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[m,l]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},a.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:a.default.getConfig()})}catch{s.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new u.default(m,l)}else this._controller=new u.default(m,l);if(this._controller){var y=this._controller;y.on(c.default.IO_ERROR,this._onIOError.bind(this)),y.on(c.default.DEMUX_ERROR,this._onDemuxError.bind(this)),y.on(c.default.INIT_SEGMENT,this._onInitSegment.bind(this)),y.on(c.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),y.on(c.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),y.on(c.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),y.on(c.default.MEDIA_INFO,this._onMediaInfo.bind(this)),y.on(c.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),y.on(c.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),y.on(c.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),y.on(c.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return p.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),a.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},p.prototype.on=function(m,l){this._emitter.addListener(m,l)},p.prototype.off=function(m,l){this._emitter.removeListener(m,l)},p.prototype.hasWorker=function(){return this._worker!=null},p.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},p.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},p.prototype.seek=function(m){this._worker?this._worker.postMessage({cmd:"seek",param:m}):this._controller.seek(m)},p.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},p.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},p.prototype._onInitSegment=function(m,l){var y=this;Promise.resolve().then(function(){y._emitter.emit(c.default.INIT_SEGMENT,m,l)})},p.prototype._onMediaSegment=function(m,l){var y=this;Promise.resolve().then(function(){y._emitter.emit(c.default.MEDIA_SEGMENT,m,l)})},p.prototype._onLoadingComplete=function(){var m=this;Promise.resolve().then(function(){m._emitter.emit(c.default.LOADING_COMPLETE)})},p.prototype._onRecoveredEarlyEof=function(){var m=this;Promise.resolve().then(function(){m._emitter.emit(c.default.RECOVERED_EARLY_EOF)})},p.prototype._onMediaInfo=function(m){var l=this;Promise.resolve().then(function(){l._emitter.emit(c.default.MEDIA_INFO,m)})},p.prototype._onMetaDataArrived=function(m){var l=this;Promise.resolve().then(function(){l._emitter.emit(c.default.METADATA_ARRIVED,m)})},p.prototype._onScriptDataArrived=function(m){var l=this;Promise.resolve().then(function(){l._emitter.emit(c.default.SCRIPTDATA_ARRIVED,m)})},p.prototype._onStatisticsInfo=function(m){var l=this;Promise.resolve().then(function(){l._emitter.emit(c.default.STATISTICS_INFO,m)})},p.prototype._onIOError=function(m,l){var y=this;Promise.resolve().then(function(){y._emitter.emit(c.default.IO_ERROR,m,l)})},p.prototype._onDemuxError=function(m,l){var y=this;Promise.resolve().then(function(){y._emitter.emit(c.default.DEMUX_ERROR,m,l)})},p.prototype._onRecommendSeekpoint=function(m){var l=this;Promise.resolve().then(function(){l._emitter.emit(c.default.RECOMMEND_SEEKPOINT,m)})},p.prototype._onLoggingConfigChanged=function(m){this._worker&&this._worker.postMessage({cmd:"logging_config",param:m})},p.prototype._onWorkerMessage=function(m){var l=m.data,y=l.data;if(l.msg==="destroyed"||this._workerDestroying){this._workerDestroying=!1,this._worker.terminate(),this._worker=null;return}switch(l.msg){case c.default.INIT_SEGMENT:case c.default.MEDIA_SEGMENT:this._emitter.emit(l.msg,y.type,y.data);break;case c.default.LOADING_COMPLETE:case c.default.RECOVERED_EARLY_EOF:this._emitter.emit(l.msg);break;case c.default.MEDIA_INFO:Object.setPrototypeOf(y,h.default.prototype),this._emitter.emit(l.msg,y);break;case c.default.METADATA_ARRIVED:case c.default.SCRIPTDATA_ARRIVED:case c.default.STATISTICS_INFO:this._emitter.emit(l.msg,y);break;case c.default.IO_ERROR:case c.default.DEMUX_ERROR:this._emitter.emit(l.msg,y.type,y.info);break;case c.default.RECOMMEND_SEEKPOINT:this._emitter.emit(l.msg,y);break;case"logcat_callback":s.default.emitter.emit("log",y.type,y.logcat);break}},p}();E.default=f},"./src/core/transmuxing-controller.js":function(g,E,S){S.r(E);var w=S("./node_modules/events/events.js"),b=S.n(w),o=S("./src/utils/logger.js"),d=S("./src/utils/browser.js"),s=S("./src/core/media-info.js"),a=S("./src/demux/flv-demuxer.js"),u=S("./src/remux/mp4-remuxer.js"),c=S("./src/demux/demux-errors.js"),h=S("./src/io/io-controller.js"),f=S("./src/core/transmuxing-events.js"),p=function(){function m(l,y){this.TAG="TransmuxingController",this._emitter=new(b()),this._config=y,l.segments||(l.segments=[{duration:l.duration,filesize:l.filesize,url:l.url}]),typeof l.cors!="boolean"&&(l.cors=!0),typeof l.withCredentials!="boolean"&&(l.withCredentials=!1),this._mediaDataSource=l,this._currentSegmentIndex=0;var x=0;this._mediaDataSource.segments.forEach(function(v){v.timestampBase=x,x+=v.duration,v.cors=l.cors,v.withCredentials=l.withCredentials,y.referrerPolicy&&(v.referrerPolicy=y.referrerPolicy)}),!isNaN(x)&&this._mediaDataSource.duration!==x&&(this._mediaDataSource.duration=x),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return m.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},m.prototype.on=function(l,y){this._emitter.addListener(l,y)},m.prototype.off=function(l,y){this._emitter.removeListener(l,y)},m.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},m.prototype._loadSegment=function(l,y){this._currentSegmentIndex=l;var x=this._mediaDataSource.segments[l],v=this._ioctl=new h.default(x,this._config,l);v.onError=this._onIOException.bind(this),v.onSeeked=this._onIOSeeked.bind(this),v.onComplete=this._onIOComplete.bind(this),v.onRedirect=this._onIORedirect.bind(this),v.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),y?this._demuxer.bindDataSource(this._ioctl):v.onDataArrival=this._onInitChunkArrival.bind(this),v.open(y)},m.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},m.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},m.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},m.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},m.prototype.seek=function(l){if(!(this._mediaInfo==null||!this._mediaInfo.isSeekable())){var y=this._searchSegmentIndexContains(l);if(y===this._currentSegmentIndex){var x=this._mediaInfo.segments[y];if(x==null)this._pendingSeekTime=l;else{var v=x.getNearestKeyframe(l);this._remuxer.seek(v.milliseconds),this._ioctl.seek(v.fileposition),this._pendingResolveSeekPoint=v.milliseconds}}else{var O=this._mediaInfo.segments[y];if(O==null)this._pendingSeekTime=l,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(y);else{var v=O.getNearestKeyframe(l);this._internalAbort(),this._remuxer.seek(l),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[y].timestampBase,this._loadSegment(y,v.fileposition),this._pendingResolveSeekPoint=v.milliseconds,this._reportSegmentMediaInfo(y)}}this._enableStatisticsReporter()}},m.prototype._searchSegmentIndexContains=function(l){for(var y=this._mediaDataSource.segments,x=y.length-1,v=0;v<y.length;v++)if(l<y[v].timestampBase){x=v-1;break}return x},m.prototype._onInitChunkArrival=function(l,y){var x=this,v=null,O=0;if(y>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,O=this._demuxer.parseChunks(l,y);else if((v=a.default.probe(l)).match){this._demuxer=new a.default(v,this._config),this._remuxer||(this._remuxer=new u.default(this._config));var D=this._mediaDataSource;D.duration!=null&&!isNaN(D.duration)&&(this._demuxer.overridedDuration=D.duration),typeof D.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=D.hasAudio),typeof D.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=D.hasVideo),this._demuxer.timestampBase=D.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),O=this._demuxer.parseChunks(l,y)}else v=null,o.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){x._internalAbort()}),this._emitter.emit(f.default.DEMUX_ERROR,c.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),O=0;return O},m.prototype._onMediaInfo=function(l){var y=this;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},l),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,s.default.prototype));var x=Object.assign({},l);Object.setPrototypeOf(x,s.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=x,this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(function(){var v=y._pendingSeekTime;y._pendingSeekTime=null,y.seek(v)})},m.prototype._onMetaDataArrived=function(l){this._emitter.emit(f.default.METADATA_ARRIVED,l)},m.prototype._onScriptDataArrived=function(l){this._emitter.emit(f.default.SCRIPTDATA_ARRIVED,l)},m.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},m.prototype._onIOComplete=function(l){var y=l,x=y+1;x<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer&&this._remuxer.flushStashedSamples(),this._loadSegment(x)):(this._remuxer&&this._remuxer.flushStashedSamples(),this._emitter.emit(f.default.LOADING_COMPLETE),this._disableStatisticsReporter())},m.prototype._onIORedirect=function(l){var y=this._ioctl.extraData;this._mediaDataSource.segments[y].redirectedURL=l},m.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(f.default.RECOVERED_EARLY_EOF)},m.prototype._onIOException=function(l,y){o.default.e(this.TAG,"IOException: type = "+l+", code = "+y.code+", msg = "+y.msg),this._emitter.emit(f.default.IO_ERROR,l,y),this._disableStatisticsReporter()},m.prototype._onDemuxException=function(l,y){o.default.e(this.TAG,"DemuxException: type = "+l+", info = "+y),this._emitter.emit(f.default.DEMUX_ERROR,l,y)},m.prototype._onRemuxerInitSegmentArrival=function(l,y){this._emitter.emit(f.default.INIT_SEGMENT,l,y)},m.prototype._onRemuxerMediaSegmentArrival=function(l,y){if(this._pendingSeekTime==null&&(this._emitter.emit(f.default.MEDIA_SEGMENT,l,y),this._pendingResolveSeekPoint!=null&&l==="video")){var x=y.info.syncPoints,v=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,d.default.safari&&x.length>0&&x[0].originalDts===v&&(v=x[0].pts),this._emitter.emit(f.default.RECOMMEND_SEEKPOINT,v)}},m.prototype._enableStatisticsReporter=function(){this._statisticsReporter==null&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},m.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},m.prototype._reportSegmentMediaInfo=function(l){var y=this._mediaInfo.segments[l],x=Object.assign({},y);x.duration=this._mediaInfo.duration,x.segmentCount=this._mediaInfo.segmentCount,delete x.segments,delete x.keyframesIndex,this._emitter.emit(f.default.MEDIA_INFO,x)},m.prototype._reportStatisticsInfo=function(){var l={};l.url=this._ioctl.currentURL,l.hasRedirect=this._ioctl.hasRedirect,l.hasRedirect&&(l.redirectedURL=this._ioctl.currentRedirectedURL),l.speed=this._ioctl.currentSpeed,l.loaderType=this._ioctl.loaderType,l.currentSegmentIndex=this._currentSegmentIndex,l.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(f.default.STATISTICS_INFO,l)},m}();E.default=p},"./src/core/transmuxing-events.js":function(g,E,S){S.r(E);var w={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"};E.default=w},"./src/core/transmuxing-worker.js":function(g,E,S){S.r(E);var w=S("./src/utils/logging-control.js"),b=S("./src/utils/polyfill.js"),o=S("./src/core/transmuxing-controller.js"),d=S("./src/core/transmuxing-events.js"),s=function(a){var u=null,c=L.bind(this);b.default.install(),a.addEventListener("message",function(R){switch(R.data.cmd){case"init":u=new o.default(R.data.param[0],R.data.param[1]),u.on(d.default.IO_ERROR,O.bind(this)),u.on(d.default.DEMUX_ERROR,D.bind(this)),u.on(d.default.INIT_SEGMENT,h.bind(this)),u.on(d.default.MEDIA_SEGMENT,f.bind(this)),u.on(d.default.LOADING_COMPLETE,p.bind(this)),u.on(d.default.RECOVERED_EARLY_EOF,m.bind(this)),u.on(d.default.MEDIA_INFO,l.bind(this)),u.on(d.default.METADATA_ARRIVED,y.bind(this)),u.on(d.default.SCRIPTDATA_ARRIVED,x.bind(this)),u.on(d.default.STATISTICS_INFO,v.bind(this)),u.on(d.default.RECOMMEND_SEEKPOINT,A.bind(this));break;case"destroy":u&&(u.destroy(),u=null),a.postMessage({msg:"destroyed"});break;case"start":u.start();break;case"stop":u.stop();break;case"seek":u.seek(R.data.param);break;case"pause":u.pause();break;case"resume":u.resume();break;case"logging_config":{var M=R.data.param;w.default.applyConfig(M),M.enableCallback===!0?w.default.addLogListener(c):w.default.removeLogListener(c);break}}});function h(R,M){var T={msg:d.default.INIT_SEGMENT,data:{type:R,data:M}};a.postMessage(T,[M.data])}function f(R,M){var T={msg:d.default.MEDIA_SEGMENT,data:{type:R,data:M}};a.postMessage(T,[M.data])}function p(){var R={msg:d.default.LOADING_COMPLETE};a.postMessage(R)}function m(){var R={msg:d.default.RECOVERED_EARLY_EOF};a.postMessage(R)}function l(R){var M={msg:d.default.MEDIA_INFO,data:R};a.postMessage(M)}function y(R){var M={msg:d.default.METADATA_ARRIVED,data:R};a.postMessage(M)}function x(R){var M={msg:d.default.SCRIPTDATA_ARRIVED,data:R};a.postMessage(M)}function v(R){var M={msg:d.default.STATISTICS_INFO,data:R};a.postMessage(M)}function O(R,M){a.postMessage({msg:d.default.IO_ERROR,data:{type:R,info:M}})}function D(R,M){a.postMessage({msg:d.default.DEMUX_ERROR,data:{type:R,info:M}})}function A(R){a.postMessage({msg:d.default.RECOMMEND_SEEKPOINT,data:R})}function L(R,M){a.postMessage({msg:"logcat_callback",data:{type:R,logcat:M}})}};E.default=s},"./src/demux/amf-parser.js":function(g,E,S){S.r(E);var w=S("./src/utils/logger.js"),b=S("./src/utils/utf8-conv.js"),o=S("./src/utils/exception.js"),d=function(){var a=new ArrayBuffer(2);return new DataView(a).setInt16(0,256,!0),new Int16Array(a)[0]===256}(),s=function(){function a(){}return a.parseScriptData=function(u,c,h){var f={};try{var p=a.parseValue(u,c,h),m=a.parseValue(u,c+p.size,h-p.size);f[p.data]=m.data}catch(l){w.default.e("AMF",l.toString())}return f},a.parseObject=function(u,c,h){if(h<3)throw new o.IllegalStateException("Data not enough when parse ScriptDataObject");var f=a.parseString(u,c,h),p=a.parseValue(u,c+f.size,h-f.size),m=p.objectEnd;return{data:{name:f.data,value:p.data},size:f.size+p.size,objectEnd:m}},a.parseVariable=function(u,c,h){return a.parseObject(u,c,h)},a.parseString=function(u,c,h){if(h<2)throw new o.IllegalStateException("Data not enough when parse String");var f=new DataView(u,c,h),p=f.getUint16(0,!d),m;return p>0?m=(0,b.default)(new Uint8Array(u,c+2,p)):m="",{data:m,size:2+p}},a.parseLongString=function(u,c,h){if(h<4)throw new o.IllegalStateException("Data not enough when parse LongString");var f=new DataView(u,c,h),p=f.getUint32(0,!d),m;return p>0?m=(0,b.default)(new Uint8Array(u,c+4,p)):m="",{data:m,size:4+p}},a.parseDate=function(u,c,h){if(h<10)throw new o.IllegalStateException("Data size invalid when parse Date");var f=new DataView(u,c,h),p=f.getFloat64(0,!d),m=f.getInt16(8,!d);return p+=m*60*1e3,{data:new Date(p),size:10}},a.parseValue=function(u,c,h){if(h<1)throw new o.IllegalStateException("Data not enough when parse Value");var f=new DataView(u,c,h),p=1,m=f.getUint8(0),l,y=!1;try{switch(m){case 0:l=f.getFloat64(1,!d),p+=8;break;case 1:{var x=f.getUint8(1);l=!!x,p+=1;break}case 2:{var v=a.parseString(u,c+1,h-1);l=v.data,p+=v.size;break}case 3:{l={};var O=0;for((f.getUint32(h-4,!d)&16777215)===9&&(O=3);p<h-4;){var D=a.parseObject(u,c+p,h-p-O);if(D.objectEnd)break;l[D.data.name]=D.data.value,p+=D.size}if(p<=h-3){var A=f.getUint32(p-1,!d)&16777215;A===9&&(p+=3)}break}case 8:{l={},p+=4;var O=0;for((f.getUint32(h-4,!d)&16777215)===9&&(O=3);p<h-8;){var L=a.parseVariable(u,c+p,h-p-O);if(L.objectEnd)break;l[L.data.name]=L.data.value,p+=L.size}if(p<=h-3){var A=f.getUint32(p-1,!d)&16777215;A===9&&(p+=3)}break}case 9:l=void 0,p=1,y=!0;break;case 10:{l=[];var R=f.getUint32(1,!d);p+=4;for(var M=0;M<R;M++){var T=a.parseValue(u,c+p,h-p);l.push(T.data),p+=T.size}break}case 11:{var k=a.parseDate(u,c+1,h-1);l=k.data,p+=k.size;break}case 12:{var C=a.parseString(u,c+1,h-1);l=C.data,p+=C.size;break}default:p=h,w.default.w("AMF","Unsupported AMF value type "+m)}}catch(G){w.default.e("AMF",G.toString())}return{data:l,size:p,objectEnd:y}},a}();E.default=s},"./src/demux/av1-parser.js":function(g,E,S){S.r(E);var w=S("./src/demux/exp-golomb.js"),b=function(){function o(){}return o.parseOBUs=function(d){for(var s=null,a=0;a<d.byteLength;){(d[a]&128)>>7;var u=(d[a]&120)>>3,c=(d[a]&4)!==0,h=(d[a]&2)!==0;d[a]&1,a+=1,c&&(a+=1);var f=Number.POSITIVE_INFINITY;if(h){f=0;for(var p=0;f|=(d[a]&127)<<p*7,a+=1,!!(d[a]&128);p++);}u===1&&(s=o.parseSeuqneceHeader(d.subarray(a,a+f))),a+=f}return s},o.parseSeuqneceHeader=function(d){var s=new w.default(d),a=s.readBits(3);s.readBool();var u=s.readBool(),c=!0,h=0,f=0,p=[];if(u)p.push({operating_point_idc:0,level:s.readBits(5),tier:0});else{var m=s.readBool(),l=!1,y=0;if(m){var x=s.readBits(32),v=s.readBits(32),O=s.readBool();if(O){for(var D=0;;){var A=s.readBits(1);if(A!==0)break;D+=1}D>=32||(1<<D)-1+s.readBits(D)}f=x,h=v,c=O;var L=s.readBool();L&&(y=s.readBits(5),s.readBits(32),s.readBits(5),s.readBits(5))}for(var R=s.readBool(),M=s.readBits(5),T=0;T<=M;T++){var k=s.readBits(12),C=s.readBits(5),G=C>7?s.readBits(1):0;if(p.push({operating_point_idc:k,level:C,tier:G}),l){var K=s.readBool();K&&(s.readBits(y+1),s.readBits(y+1),s.readBool())}if(R){var U=s.readBool();U&&s.readBits(4)}}}var j=0,te=p[j],Q=te.level,X=te.tier,oe=s.readBits(4),W=s.readBits(4),V=s.readBits(oe+1)+1,z=s.readBits(W+1)+1,ue=!1;u||(ue=s.readBool()),ue&&(s.readBits(4),s.readBits(4));var ve=2;s.readBool(),s.readBool(),s.readBool();var ie=!1,se=ve;if(!u){s.readBool(),s.readBool(),s.readBool(),s.readBool(),ie=s.readBool(),ie&&(s.readBool(),s.readBool());var Z=s.readBool();if(Z?se=ve:se=s.readBits(1),se){var Pe=s.readBool();Pe||s.readBits(1)}ie&&s.readBits(3)}s.readBool(),s.readBool(),s.readBool();var ke=s.readBool(),Ie=8;if(a===2&&ke){var Ze=s.readBool();Ie=Ze?12:10}else Ie=ke?10:8;var Fe=!1;a!==1&&(Fe=s.readBool());var Qe=s.readBool();Qe&&(s.readBits(8),s.readBits(8),s.readBits(8));var Oe=1,xe=1;if(Fe)s.readBits(1),Oe=1,xe=1;else{if(s.readBits(1),a==0)Oe=1,xe=1;else if(a==1)Oe=0,xe=0;else if(Ie==12){var be=s.readBits(1);be&&s.readBits(1)}else Oe=1,xe=0;Oe&&xe&&s.readBits(2),s.readBits(1)}s.readBool(),s.destroy(),s=null;var Ge="av01."+a+"."+o.getLevelString(Q,X)+"."+Ie.toString(10).padStart(2,"0"),ht=1,jr=1,Wr=1;return{codec_mimetype:Ge,level:Q,tier:X,level_string:o.getLevelString(Q,X),profile_idc:a,profile_string:""+a,bit_depth:Ie,ref_frames:1,chroma_format:o.getChromaFormat(Fe,Oe,xe),chroma_format_string:o.getChromaFormatString(Fe,Oe,xe),frame_rate:{fixed:c,fps:h/f,fps_den:f,fps_num:h},sar_ratio:{width:ht,height:jr},codec_size:{width:V,height:z},present_size:{width:V*Wr,height:z}}},o.getLevelString=function(d,s){return""+d.toString(10).padStart(2,"0")+(s===0?"M":"H")},o.getChromaFormat=function(d,s,a){return d?0:s===0&&a===0?3:s===1&&a===0?2:s===1&&a===1?1:Number.NaN},o.getChromaFormatString=function(d,s,a){return d?"4:0:0":s===0&&a===0?"4:4:4":s===1&&a===0?"4:2:2":s===1&&a===1?"4:2:0":"Unknown"},o}();E.default=b},"./src/demux/demux-errors.js":function(g,E,S){S.r(E);var w={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"};E.default=w},"./src/demux/exp-golomb.js":function(g,E,S){S.r(E);var w=S("./src/utils/exception.js"),b=function(){function o(d){this.TAG="ExpGolomb",this._buffer=d,this._buffer_index=0,this._total_bytes=d.byteLength,this._total_bits=d.byteLength*8,this._current_word=0,this._current_word_bits_left=0}return o.prototype.destroy=function(){this._buffer=null},o.prototype._fillCurrentWord=function(){var d=this._total_bytes-this._buffer_index;if(d<=0)throw new w.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var s=Math.min(4,d),a=new Uint8Array(4);a.set(this._buffer.subarray(this._buffer_index,this._buffer_index+s)),this._current_word=new DataView(a.buffer).getUint32(0,!1),this._buffer_index+=s,this._current_word_bits_left=s*8},o.prototype.readBits=function(d){if(d>32)throw new w.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(d<=this._current_word_bits_left){var s=this._current_word>>>32-d;return this._current_word<<=d,this._current_word_bits_left-=d,s}var a=this._current_word_bits_left?this._current_word:0;a=a>>>32-this._current_word_bits_left;var u=d-this._current_word_bits_left;this._fillCurrentWord();var c=Math.min(u,this._current_word_bits_left),h=this._current_word>>>32-c;return this._current_word<<=c,this._current_word_bits_left-=c,a=a<<c|h,a},o.prototype.readBool=function(){return this.readBits(1)===1},o.prototype.readByte=function(){return this.readBits(8)},o.prototype._skipLeadingZero=function(){var d;for(d=0;d<this._current_word_bits_left;d++)if(this._current_word&2147483648>>>d)return this._current_word<<=d,this._current_word_bits_left-=d,d;return this._fillCurrentWord(),d+this._skipLeadingZero()},o.prototype.readUEG=function(){var d=this._skipLeadingZero();return this.readBits(d+1)-1},o.prototype.readSEG=function(){var d=this.readUEG();return d&1?d+1>>>1:-1*(d>>>1)},o.prototype.getBitsLeft=function(){return(this._total_bytes-this._buffer_index)*8+this._current_word_bits_left},o}();E.default=b},"./src/demux/flv-demuxer.js":function(g,E,S){S.r(E);var w=S("./src/utils/logger.js"),b=S("./src/demux/amf-parser.js"),o=S("./src/demux/sps-parser.js"),d=S("./src/demux/hevc-sps-parser.js"),s=S("./src/demux/av1-parser.js"),a=S("./src/demux/demux-errors.js"),u=S("./src/core/media-info.js"),c=S("./src/utils/exception.js"),h=S("./src/utils/typedarray-equality.js");function f(m,l){return m[l]<<24|m[l+1]<<16|m[l+2]<<8|m[l+3]}var p=function(){function m(l,y){this.TAG="FLVDemuxer",this._config=y,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=l.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=l.hasAudioTrack,this._hasVideo=l.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new u.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var x=new ArrayBuffer(2);return new DataView(x).setInt16(0,256,!0),new Int16Array(x)[0]===256}()}return m.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},m.probe=function(l){var y=new Uint8Array(l);if(y.byteLength<9)return{needMoreData:!0};var x={match:!1};if(y[0]!==70||y[1]!==76||y[2]!==86||y[3]!==1)return x;var v=(y[4]&4)>>>2!==0,O=(y[4]&1)!==0,D=f(y,5);return D<9?x:{match:!0,consumed:D,dataOffset:D,hasAudioTrack:v,hasVideoTrack:O}},m.prototype.bindDataSource=function(l){return l.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(m.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(l){this._onTrackMetadata=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(l){this._onMediaInfo=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(l){this._onMetaDataArrived=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(l){this._onScriptDataArrived=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onError",{get:function(){return this._onError},set:function(l){this._onError=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(l){this._onDataAvailable=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(l){this._timestampBase=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"overridedDuration",{get:function(){return this._duration},set:function(l){this._durationOverrided=!0,this._duration=l,this._mediaInfo.duration=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"overridedHasAudio",{set:function(l){this._hasAudioFlagOverrided=!0,this._hasAudio=l,this._mediaInfo.hasAudio=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"overridedHasVideo",{set:function(l){this._hasVideoFlagOverrided=!0,this._hasVideo=l,this._mediaInfo.hasVideo=l},enumerable:!1,configurable:!0}),m.prototype.resetMediaInfo=function(){this._mediaInfo=new u.default},m.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!this._hasAudio&&this._hasVideo?this._videoInitialMetadataDispatched:!1},m.prototype.parseChunks=function(l,y){if(!this._onError||!this._onMediaInfo||!this._onTrackMetadata||!this._onDataAvailable)throw new c.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var x=0,v=this._littleEndian;if(y===0)if(l.byteLength>13){var O=m.probe(l);x=O.dataOffset}else return 0;if(this._firstParse){this._firstParse=!1,y+x!==this._dataOffset&&w.default.w(this.TAG,"First time parsing but chunk byteStart invalid!");var D=new DataView(l,x),A=D.getUint32(0,!v);A!==0&&w.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),x+=4}for(;x<l.byteLength;){this._dispatch=!0;var D=new DataView(l,x);if(x+11+4>l.byteLength)break;var L=D.getUint8(0),R=D.getUint32(0,!v)&16777215;if(x+11+R+4>l.byteLength)break;if(L!==8&&L!==9&&L!==18){w.default.w(this.TAG,"Unsupported tag type "+L+", skipped"),x+=11+R+4;continue}var M=D.getUint8(4),T=D.getUint8(5),k=D.getUint8(6),C=D.getUint8(7),G=k|T<<8|M<<16|C<<24,K=D.getUint32(7,!v)&16777215;K!==0&&w.default.w(this.TAG,"Meet tag which has StreamID != 0!");var U=x+11;switch(L){case 8:this._parseAudioData(l,U,R,G);break;case 9:this._parseVideoData(l,U,R,G,y+x);break;case 18:this._parseScriptData(l,U,R);break}var j=D.getUint32(11+R,!v);j!==11+R&&w.default.w(this.TAG,"Invalid PrevTagSize "+j),x+=11+R+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),x},m.prototype._parseScriptData=function(l,y,x){var v=b.default.parseScriptData(l,y,x);if(v.hasOwnProperty("onMetaData")){if(v.onMetaData==null||typeof v.onMetaData!="object"){w.default.w(this.TAG,"Invalid onMetaData structure!");return}this._metadata&&w.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=v;var O=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},O)),typeof O.hasAudio=="boolean"&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=O.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),typeof O.hasVideo=="boolean"&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=O.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),typeof O.audiodatarate=="number"&&(this._mediaInfo.audioDataRate=O.audiodatarate),typeof O.videodatarate=="number"&&(this._mediaInfo.videoDataRate=O.videodatarate),typeof O.width=="number"&&(this._mediaInfo.width=O.width),typeof O.height=="number"&&(this._mediaInfo.height=O.height),typeof O.duration=="number"){if(!this._durationOverrided){var D=Math.floor(O.duration*this._timescale);this._duration=D,this._mediaInfo.duration=D}}else this._mediaInfo.duration=0;if(typeof O.framerate=="number"){var A=Math.floor(O.framerate*1e3);if(A>0){var L=A/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=L,this._referenceFrameRate.fps_num=A,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=L}}if(typeof O.keyframes=="object"){this._mediaInfo.hasKeyframesIndex=!0;var R=O.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(R),O.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=O,w.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(v).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},v))},m.prototype._parseKeyframesIndex=function(l){for(var y=[],x=[],v=1;v<l.times.length;v++){var O=this._timestampBase+Math.floor(l.times[v]*1e3);y.push(O),x.push(l.filepositions[v])}return{times:y,filepositions:x}},m.prototype._parseAudioData=function(l,y,x,v){if(x<=1){w.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");return}if(!(this._hasAudioFlagOverrided===!0&&this._hasAudio===!1)){this._littleEndian;var O=new DataView(l,y,x),D=O.getUint8(0),A=D>>>4;if(A===9){if(x<=5){w.default.w(this.TAG,"Flv: Invalid audio packet, missing AudioFourCC in Ehnanced FLV payload!");return}var L=D&15,R=String.fromCharCode.apply(String,new Uint8Array(l,y,x).slice(1,5));switch(R){case"Opus":this._parseOpusAudioPacket(l,y+5,x-5,v,L);break;default:this._onError(a.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec: "+R)}return}if(A!==2&&A!==10){this._onError(a.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+A);return}var M=0,T=(D&12)>>>2;if(T>=0&&T<=4)M=this._flvSoundRateTable[T];else{this._onError(a.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+T);return}var k=D&1,C=this._audioMetadata,G=this._audioTrack;if(C||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),C=this._audioMetadata={},C.type="audio",C.id=G.id,C.timescale=this._timescale,C.duration=this._duration,C.audioSampleRate=M,C.channelCount=k===0?1:2),A===10){var K=this._parseAACAudioData(l,y+1,x-1);if(K==null)return;if(K.packetType===0){if(C.config)if((0,h.default)(K.data.config,C.config)){w.default.w(this.TAG,"Found another AudioSpecificConfig!");return}else w.default.w(this.TAG,"AudioSpecificConfig has been changed, re-generate initialization segment");var U=K.data;C.audioSampleRate=U.samplingRate,C.channelCount=U.channelCount,C.codec=U.codec,C.originalCodec=U.originalCodec,C.config=U.config,C.refSampleDuration=1024/C.audioSampleRate*C.timescale,w.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",C);var j=this._mediaInfo;j.audioCodec=C.originalCodec,j.audioSampleRate=C.audioSampleRate,j.audioChannelCount=C.channelCount,j.hasVideo?j.videoCodec!=null&&(j.mimeType='video/x-flv; codecs="'+j.videoCodec+","+j.audioCodec+'"'):j.mimeType='video/x-flv; codecs="'+j.audioCodec+'"',j.isComplete()&&this._onMediaInfo(j)}else if(K.packetType===1){var te=this._timestampBase+v,Q={unit:K.data,length:K.data.byteLength,dts:te,pts:te};G.samples.push(Q),G.length+=K.data.length}else w.default.e(this.TAG,"Flv: Unsupported AAC data type "+K.packetType)}else if(A===2){if(!C.codec){var U=this._parseMP3AudioData(l,y+1,x-1,!0);if(U==null)return;C.audioSampleRate=U.samplingRate,C.channelCount=U.channelCount,C.codec=U.codec,C.originalCodec=U.originalCodec,C.refSampleDuration=1152/C.audioSampleRate*C.timescale,w.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",C);var j=this._mediaInfo;j.audioCodec=C.codec,j.audioSampleRate=C.audioSampleRate,j.audioChannelCount=C.channelCount,j.audioDataRate=U.bitRate,j.hasVideo?j.videoCodec!=null&&(j.mimeType='video/x-flv; codecs="'+j.videoCodec+","+j.audioCodec+'"'):j.mimeType='video/x-flv; codecs="'+j.audioCodec+'"',j.isComplete()&&this._onMediaInfo(j)}var X=this._parseMP3AudioData(l,y+1,x-1,!1);if(X==null)return;var te=this._timestampBase+v,oe={unit:X,length:X.byteLength,dts:te,pts:te};G.samples.push(oe),G.length+=X.length}}},m.prototype._parseAACAudioData=function(l,y,x){if(x<=1){w.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");return}var v={},O=new Uint8Array(l,y,x);return v.packetType=O[0],O[0]===0?v.data=this._parseAACAudioSpecificConfig(l,y+1,x-1):v.data=O.subarray(1),v},m.prototype._parseAACAudioSpecificConfig=function(l,y,x){var v=new Uint8Array(l,y,x),O=null,D=0,A=0,L=0,R=null;if(D=A=v[0]>>>3,L=(v[0]&7)<<1|v[1]>>>7,L<0||L>=this._mpegSamplingRates.length){this._onError(a.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");return}var M=this._mpegSamplingRates[L],T=(v[1]&120)>>>3;if(T<0||T>=8){this._onError(a.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration");return}D===5&&(R=(v[1]&7)<<1|v[2]>>>7,(v[2]&124)>>>2);var k=self.navigator.userAgent.toLowerCase();return k.indexOf("firefox")!==-1?L>=6?(D=5,O=new Array(4),R=L-3):(D=2,O=new Array(2),R=L):k.indexOf("android")!==-1?(D=2,O=new Array(2),R=L):(D=5,R=L,O=new Array(4),L>=6?R=L-3:T===1&&(D=2,O=new Array(2),R=L)),O[0]=D<<3,O[0]|=(L&15)>>>1,O[1]=(L&15)<<7,O[1]|=(T&15)<<3,D===5&&(O[1]|=(R&15)>>>1,O[2]=(R&1)<<7,O[2]|=8,O[3]=0),{config:O,samplingRate:M,channelCount:T,codec:"mp4a.40."+D,originalCodec:"mp4a.40."+A}},m.prototype._parseMP3AudioData=function(l,y,x,v){if(x<4){w.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!");return}this._littleEndian;var O=new Uint8Array(l,y,x),D=null;if(v){if(O[0]!==255)return;var A=O[1]>>>3&3,L=(O[1]&6)>>1,R=(O[2]&240)>>>4,M=(O[2]&12)>>>2,T=O[3]>>>6&3,k=T!==3?2:1,C=0,G=0,K="mp3";switch(A){case 0:C=this._mpegAudioV25SampleRateTable[M];break;case 2:C=this._mpegAudioV20SampleRateTable[M];break;case 3:C=this._mpegAudioV10SampleRateTable[M];break}switch(L){case 1:R<this._mpegAudioL3BitRateTable.length&&(G=this._mpegAudioL3BitRateTable[R]);break;case 2:R<this._mpegAudioL2BitRateTable.length&&(G=this._mpegAudioL2BitRateTable[R]);break;case 3:R<this._mpegAudioL1BitRateTable.length&&(G=this._mpegAudioL1BitRateTable[R]);break}D={bitRate:G,samplingRate:C,channelCount:k,codec:K,originalCodec:K}}else D=O;return D},m.prototype._parseOpusAudioPacket=function(l,y,x,v,O){if(O===0)this._parseOpusSequenceHeader(l,y,x);else if(O===1)this._parseOpusAudioData(l,y,x,v);else if(O!==2){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid video packet type "+O);return}},m.prototype._parseOpusSequenceHeader=function(l,y,x){if(x<=16){w.default.w(this.TAG,"Flv: Invalid OpusSequenceHeader, lack of data!");return}var v=this._audioMetadata,O=this._audioTrack;v||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),v=this._audioMetadata={},v.type="audio",v.id=O.id,v.timescale=this._timescale,v.duration=this._duration);var D=new DataView(l,y,x);D.setUint8(8,0);var A=D.getUint8(9);D.setUint16(10,D.getUint16(10,!0),!1);var L=D.getUint32(12,!0);D.setUint32(12,D.getUint32(12,!0),!1);var R=new Uint8Array(l,y+8,x-8),M={config:R,channelCount:A,samplingFrequence:L,codec:"opus",originalCodec:"opus"};if(v.config)if((0,h.default)(M.config,v.config)){w.default.w(this.TAG,"Found another OpusSequenceHeader!");return}else w.default.w(this.TAG,"OpusSequenceHeader has been changed, re-generate initialization segment");v.audioSampleRate=M.samplingFrequence,v.channelCount=M.channelCount,v.codec=M.codec,v.originalCodec=M.originalCodec,v.config=M.config,v.refSampleDuration=20,w.default.v(this.TAG,"Parsed OpusSequenceHeader"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",v);var T=this._mediaInfo;T.audioCodec=v.originalCodec,T.audioSampleRate=v.audioSampleRate,T.audioChannelCount=v.channelCount,T.hasVideo?T.videoCodec!=null&&(T.mimeType='video/x-flv; codecs="'+T.videoCodec+","+T.audioCodec+'"'):T.mimeType='video/x-flv; codecs="'+T.audioCodec+'"',T.isComplete()&&this._onMediaInfo(T)},m.prototype._parseOpusAudioData=function(l,y,x,v){var O=this._audioTrack,D=new Uint8Array(l,y,x),A=this._timestampBase+v,L={unit:D,length:D.byteLength,dts:A,pts:A};O.samples.push(L),O.length+=D.length},m.prototype._parseVideoData=function(l,y,x,v,O){if(x<=1){w.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");return}if(!(this._hasVideoFlagOverrided===!0&&this._hasVideo===!1)){var D=new Uint8Array(l,y,x)[0],A=(D&128)!==0,L=(D&112)>>>4;if(A){var M=D&15,T=String.fromCharCode.apply(String,new Uint8Array(l,y,x).slice(1,5));if(T==="hvc1")this._parseEnhancedHEVCVideoPacket(l,y+5,x-5,v,O,L,M);else if(T==="av01")this._parseEnhancedAV1VideoPacket(l,y+5,x-5,v,O,L,M);else{this._onError(a.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+T);return}}else{var R=D&15;if(R===7)this._parseAVCVideoPacket(l,y+1,x-1,v,O,L);else if(R===12)this._parseHEVCVideoPacket(l,y+1,x-1,v,O,L);else{this._onError(a.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+R);return}}}},m.prototype._parseAVCVideoPacket=function(l,y,x,v,O,D){if(x<4){w.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");return}var A=this._littleEndian,L=new DataView(l,y,x),R=L.getUint8(0),M=L.getUint32(0,!A)&16777215,T=M<<8>>8;if(R===0)this._parseAVCDecoderConfigurationRecord(l,y+4,x-4);else if(R===1)this._parseAVCVideoData(l,y+4,x-4,v,O,D,T);else if(R!==2){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid video packet type "+R);return}},m.prototype._parseAVCDecoderConfigurationRecord=function(l,y,x){if(x<7){w.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");return}var v=this._videoMetadata,O=this._videoTrack,D=this._littleEndian,A=new DataView(l,y,x);if(!v)this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),v=this._videoMetadata={},v.type="video",v.id=O.id,v.timescale=this._timescale,v.duration=this._duration;else if(typeof v.avcc<"u"){var L=new Uint8Array(l,y,x);if((0,h.default)(L,v.avcc)){w.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!");return}else w.default.w(this.TAG,"AVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}var R=A.getUint8(0),M=A.getUint8(1);if(A.getUint8(2),A.getUint8(3),R!==1||M===0){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord");return}if(this._naluLengthSize=(A.getUint8(4)&3)+1,this._naluLengthSize!==3&&this._naluLengthSize!==4){this._onError(a.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));return}var T=A.getUint8(5)&31;if(T===0){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS");return}else T>1&&w.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+T);for(var k=6,C=0;C<T;C++){var G=A.getUint16(k,!D);if(k+=2,G!==0){var K=new Uint8Array(l,y+k,G);k+=G;var U=o.default.parseSPS(K);if(C===0){v.codecWidth=U.codec_size.width,v.codecHeight=U.codec_size.height,v.presentWidth=U.present_size.width,v.presentHeight=U.present_size.height,v.profile=U.profile_string,v.level=U.level_string,v.bitDepth=U.bit_depth,v.chromaFormat=U.chroma_format,v.sarRatio=U.sar_ratio,v.frameRate=U.frame_rate,(U.frame_rate.fixed===!1||U.frame_rate.fps_num===0||U.frame_rate.fps_den===0)&&(v.frameRate=this._referenceFrameRate);var j=v.frameRate.fps_den,te=v.frameRate.fps_num;v.refSampleDuration=v.timescale*(j/te);for(var Q=K.subarray(1,4),X="avc1.",oe=0;oe<3;oe++){var W=Q[oe].toString(16);W.length<2&&(W="0"+W),X+=W}v.codec=X;var V=this._mediaInfo;V.width=v.codecWidth,V.height=v.codecHeight,V.fps=v.frameRate.fps,V.profile=v.profile,V.level=v.level,V.refFrames=U.ref_frames,V.chromaFormat=U.chroma_format_string,V.sarNum=v.sarRatio.width,V.sarDen=v.sarRatio.height,V.videoCodec=X,V.hasAudio?V.audioCodec!=null&&(V.mimeType='video/x-flv; codecs="'+V.videoCodec+","+V.audioCodec+'"'):V.mimeType='video/x-flv; codecs="'+V.videoCodec+'"',V.isComplete()&&this._onMediaInfo(V)}}}var z=A.getUint8(k);if(z===0){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS");return}else z>1&&w.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+z);k++;for(var C=0;C<z;C++){var G=A.getUint16(k,!D);k+=2,G!==0&&(k+=G)}v.avcc=new Uint8Array(x),v.avcc.set(new Uint8Array(l,y,x),0),w.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",v)},m.prototype._parseAVCVideoData=function(l,y,x,v,O,D,A){for(var L=this._littleEndian,R=new DataView(l,y,x),M=[],T=0,k=0,C=this._naluLengthSize,G=this._timestampBase+v,K=D===1;k<x;){if(k+4>=x){w.default.w(this.TAG,"Malformed Nalu near timestamp "+G+", offset = "+k+", dataSize = "+x);break}var U=R.getUint32(k,!L);if(C===3&&(U>>>=8),U>x-C){w.default.w(this.TAG,"Malformed Nalus near timestamp "+G+", NaluSize > DataSize!");return}var j=R.getUint8(k+C)&31;j===5&&(K=!0);var te=new Uint8Array(l,y+k,C+U),Q={type:j,data:te};M.push(Q),T+=te.byteLength,k+=C+U}if(M.length){var X=this._videoTrack,oe={units:M,length:T,isKeyframe:K,dts:G,cts:A,pts:G+A};K&&(oe.fileposition=O),X.samples.push(oe),X.length+=T}},m.prototype._parseHEVCVideoPacket=function(l,y,x,v,O,D){if(x<4){w.default.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");return}var A=this._littleEndian,L=new DataView(l,y,x),R=L.getUint8(0),M=L.getUint32(0,!A)&16777215,T=M<<8>>8;if(R===0)this._parseHEVCDecoderConfigurationRecord(l,y+4,x-4);else if(R===1)this._parseHEVCVideoData(l,y+4,x-4,v,O,D,T);else if(R!==2){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid video packet type "+R);return}},m.prototype._parseEnhancedHEVCVideoPacket=function(l,y,x,v,O,D,A){var L=this._littleEndian,R=new DataView(l,y,x);if(A===0)this._parseHEVCDecoderConfigurationRecord(l,y,x);else if(A===1){var M=R.getUint32(0,!L)&4294967040,T=M>>8;this._parseHEVCVideoData(l,y+3,x-3,v,O,D,T)}else if(A===3)this._parseHEVCVideoData(l,y,x,v,O,D,0);else if(A!==2){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid video packet type "+A);return}},m.prototype._parseHEVCDecoderConfigurationRecord=function(l,y,x){if(x<23){w.default.w(this.TAG,"Flv: Invalid HEVCDecoderConfigurationRecord, lack of data!");return}var v=this._videoMetadata,O=this._videoTrack,D=this._littleEndian,A=new DataView(l,y,x);if(!v)this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),v=this._videoMetadata={},v.type="video",v.id=O.id,v.timescale=this._timescale,v.duration=this._duration;else if(typeof v.hvcc<"u"){var L=new Uint8Array(l,y,x);if((0,h.default)(L,v.hvcc)){w.default.w(this.TAG,"Found another HEVCDecoderConfigurationRecord!");return}else w.default.w(this.TAG,"HEVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}var R=A.getUint8(0),M=A.getUint8(1)&31;if(R!==0&&R!==1||M===0){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord");return}if(this._naluLengthSize=(A.getUint8(21)&3)+1,this._naluLengthSize!==3&&this._naluLengthSize!==4){this._onError(a.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));return}for(var T=A.getUint8(22),k,C,G,K=[],U=0,j=23;U<T;U++){var te=A.getUint8(j++)&63,Q=A.getUint16(j,!D);if(j+=2,Q!==0){switch(te){case 32:k+=Q;break;case 33:C+=Q;break;case 34:G+=Q;break}for(var X=0;X<Q;X++){var oe=A.getUint16(j,!D);if(j+=2,oe!==0){if(te===33){var W=new Uint8Array(l,y+j,oe);K.push(W)}j+=oe}}}}if(k===0){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord: No VPS");return}else k>1&&w.default.w(this.TAG,"Flv: Strange HEVCDecoderConfigurationRecord: VPS Count = "+k);if(C===0){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord: No SPS");return}else C>1&&w.default.w(this.TAG,"Flv: Strange HEVCDecoderConfigurationRecord: SPS Count = "+C);if(G===0){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord: No PPS");return}else G>1&&w.default.w(this.TAG,"Flv: Strange HEVCDecoderConfigurationRecord: PPS Count = "+C);var V=K[0],z=d.default.parseSPS(V);v.codecWidth=z.codec_size.width,v.codecHeight=z.codec_size.height,v.presentWidth=z.present_size.width,v.presentHeight=z.present_size.height,v.profile=z.profile_string,v.level=z.level_string,v.profile_idc=z.profile_idc,v.level_idc=z.level_idc,v.bitDepth=z.bit_depth,v.chromaFormat=z.chroma_format,v.sarRatio=z.sar_ratio,v.frameRate=z.frame_rate,(z.frame_rate.fixed===!1||z.frame_rate.fps_num===0||z.frame_rate.fps_den===0)&&(v.frameRate=this._referenceFrameRate);var ue=v.frameRate.fps_den,ve=v.frameRate.fps_num;v.refSampleDuration=v.timescale*(ue/ve),v.codec=z.codec_mimetype;var ie=this._mediaInfo;ie.width=v.codecWidth,ie.height=v.codecHeight,ie.fps=v.frameRate.fps,ie.profile=v.profile,ie.level=v.level,ie.refFrames=z.ref_frames,ie.chromaFormat=z.chroma_format_string,ie.sarNum=v.sarRatio.width,ie.sarDen=v.sarRatio.height,ie.videoCodec=z.codec_mimetype,ie.hasAudio?ie.audioCodec!=null&&(ie.mimeType='video/x-flv; codecs="'+ie.videoCodec+","+ie.audioCodec+'"'):ie.mimeType='video/x-flv; codecs="'+ie.videoCodec+'"',ie.isComplete()&&this._onMediaInfo(ie),v.hvcc=new Uint8Array(x),v.hvcc.set(new Uint8Array(l,y,x),0),w.default.v(this.TAG,"Parsed HEVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",v)},m.prototype._parseHEVCVideoData=function(l,y,x,v,O,D,A){for(var L=this._littleEndian,R=new DataView(l,y,x),M=[],T=0,k=0,C=this._naluLengthSize,G=this._timestampBase+v,K=D===1;k<x;){if(k+4>=x){w.default.w(this.TAG,"Malformed Nalu near timestamp "+G+", offset = "+k+", dataSize = "+x);break}var U=R.getUint32(k,!L);if(C===3&&(U>>>=8),U>x-C){w.default.w(this.TAG,"Malformed Nalus near timestamp "+G+", NaluSize > DataSize!");return}var j=R.getUint8(k+C)>>1&63;j>=16&&j<=23&&(K=!0);var te=new Uint8Array(l,y+k,C+U),Q={type:j,data:te};M.push(Q),T+=te.byteLength,k+=C+U}if(M.length){var X=this._videoTrack,oe={units:M,length:T,isKeyframe:K,dts:G,cts:A,pts:G+A};K&&(oe.fileposition=O),X.samples.push(oe),X.length+=T}},m.prototype._parseAV1CodecConfigurationRecord=function(l,y,x){if(x<4){w.default.w(this.TAG,"Flv: Invalid AV1CodecConfigurationRecord, lack of data!");return}var v=this._videoMetadata,O=this._videoTrack;this._littleEndian;var D=new DataView(l,y,x);if(!v)this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),v=this._videoMetadata={},v.type="video",v.id=O.id,v.timescale=this._timescale,v.duration=this._duration;else if(typeof v.av1c<"u"){var A=new Uint8Array(l,y,x);if((0,h.default)(A,v.av1c)){w.default.w(this.TAG,"Found another AV1CodecConfigurationRecord!");return}else w.default.w(this.TAG,"AV1CodecConfigurationRecord has been changed, re-generate initialization segment")}var L=D.getUint8(0)&127;if((D.getUint8(1)&224)>>5,(D.getUint8(1)&143)>>0,(D.getUint8(2)&128)>>7,L!==1){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord");return}var R=s.default.parseOBUs(new Uint8Array(l,y+4,x-4));if(R==null){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord");return}v.codecWidth=R.codec_size.width,v.codecHeight=R.codec_size.height,v.presentWidth=R.present_size.width,v.presentHeight=R.present_size.height,v.profile=R.profile_string,v.level=R.level_string,v.bitDepth=R.bit_depth,v.chromaFormat=R.chroma_format,v.sarRatio=R.sar_ratio,v.frameRate=R.frame_rate,(R.frame_rate.fixed===!1||R.frame_rate.fps_num===0||R.frame_rate.fps_den===0)&&(v.frameRate=this._referenceFrameRate);var M=v.frameRate.fps_den,T=v.frameRate.fps_num;v.refSampleDuration=v.timescale*(M/T),v.codec=R.codec_mimetype;var k=this._mediaInfo;k.width=v.codecWidth,k.height=v.codecHeight,k.fps=v.frameRate.fps,k.profile=v.profile,k.level=v.level,k.refFrames=R.ref_frames,k.chromaFormat=R.chroma_format_string,k.sarNum=v.sarRatio.width,k.sarDen=v.sarRatio.height,k.videoCodec=R.codec_mimetype,k.hasAudio?k.audioCodec!=null&&(k.mimeType='video/x-flv; codecs="'+k.videoCodec+","+k.audioCodec+'"'):k.mimeType='video/x-flv; codecs="'+k.videoCodec+'"',k.isComplete()&&this._onMediaInfo(k),v.av1c=new Uint8Array(x),v.av1c.set(new Uint8Array(l,y,x),0),w.default.v(this.TAG,"Parsed AV1CodecConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",v)},m.prototype._parseAV1VideoData=function(l,y,x,v,O,D,A){this._littleEndian;var L=[],R=0,M=0,T=this._timestampBase+v,k=D===1;if(R=x,L.push({unitType:0,data:new Uint8Array(l,y+M,x)}),L.length){var C=this._videoTrack,G={units:L,length:R,isKeyframe:k,dts:T,cts:A,pts:T+A};k&&(G.fileposition=O),C.samples.push(G),C.length+=R}},m.prototype._parseEnhancedAV1VideoPacket=function(l,y,x,v,O,D,A){if(this._littleEndian,A===0)this._parseAV1CodecConfigurationRecord(l,y,x);else if(A===1)this._parseAV1VideoData(l,y,x,v,O,D,0);else if(A===5){this._onError(a.default.FORMAT_ERROR,"Flv: Not Supported MP2T AV1 video packet type "+A);return}else if(A!==2){this._onError(a.default.FORMAT_ERROR,"Flv: Invalid video packet type "+A);return}},m}();E.default=p},"./src/demux/hevc-sps-parser.js":function(g,E,S){S.r(E);var w=S("./src/demux/exp-golomb.js"),b=S("./src/demux/sps-parser.js"),o=function(){function d(){}return d.parseSPS=function(s){var a=b.default._ebsp2rbsp(s),u=new w.default(a),c={};u.readBits(16),u.readBits(4);var h=u.readBits(3);u.readBits(1),d._hvcc_parse_ptl(u,c,h),u.readUEG();var f=0,p=u.readUEG();p==3&&(f=u.readBits(1)),c.sar_width=c.sar_height=1,c.conf_win_left_offset=c.conf_win_right_offset=c.conf_win_top_offset=c.conf_win_bottom_offset=0,c.def_disp_win_left_offset=c.def_disp_win_right_offset=c.def_disp_win_top_offset=c.def_disp_win_bottom_offset=0;var m=u.readUEG(),l=u.readUEG(),y=u.readBits(1);y&&(c.conf_win_left_offset=u.readUEG(),c.conf_win_right_offset=u.readUEG(),c.conf_win_top_offset=u.readUEG(),c.conf_win_bottom_offset=u.readUEG());var x=u.readUEG()+8;u.readUEG();for(var v=u.readUEG(),O=u.readBits(1),D=O?0:h;D<=h;D++)d._skip_sub_layer_ordering_info(u);u.readUEG(),u.readUEG(),u.readUEG(),u.readUEG(),u.readUEG(),u.readUEG(),u.readBits(1)&&u.readBits(1)&&d._skip_scaling_list_data(u),u.readBits(1),u.readBits(1),u.readBits(1)&&(u.readBits(4),u.readBits(4),u.readUEG(),u.readUEG(),u.readBits(1));var A=[],L=u.readUEG();for(D=0;D<L;D++){var R=d._parse_rps(u,D,L,A);if(R<0)return null}if(u.readBits(1)){var M=u.readUEG();if(M>31)return null;for(D=0;D<M;D++){var T=Math.min(v+4,16);if(T>32){for(var k=T/32,C=T%32,G=0;G<k;G++)u.readBits(32);u.readBits(C)}else u.readBits(T);u.readBits(1)}}var K=1;u.readBits(1),u.readBits(1),u.readBits(1)&&d._hvcc_parse_vui(u,c,h);var U="hvc1."+c.profile_idc+".1.L"+c.level_idc+".B0",j=d.getProfileString(c.profile_idc),te=d.getLevelString(c.level_idc),Q=1;(c.sar_width!==1||c.sar_height!==1)&&(Q=c.sar_width/c.sar_height);var X=m,oe=l,W=(p===1||p==2)&&f===0?2:1,V=p===1&&f===0?2:1;X-=W*(c.conf_win_left_offset+c.conf_win_right_offset),oe-=V*(c.conf_win_top_offset+c.conf_win_bottom_offset);var z=Math.ceil(X*Q);return u.destroy(),u=null,{codec_mimetype:U,profile_string:j,level_string:te,profile_idc:c.profile_idc,level_idc:c.level_idc,bit_depth:x,ref_frames:K,chroma_format:p,chroma_format_string:d.getChromaFormatString(p),frame_rate:{fixed:c.fps_fixed,fps:c.fps,fps_den:c.fps_den,fps_num:c.fps_num},sar_ratio:{width:c.sar_width,height:c.sar_height},codec_size:{width:X,height:oe},present_size:{width:z,height:oe}}},d._hvcc_parse_ptl=function(s,a,u){s.readBits(2);var c=s.readBits(1),h=s.readBits(5);s.readBits(32),s.readBits(32),s.readBits(16);var f=s.readByte();a.tier_flag===void 0||a.level_idc===void 0||a.tier_flag<c?a.level_idc=f:a.level_idc=Math.max(a.level_idc,f),a.profile_idc=Math.max(a.profile_idc===void 0?0:a.profile_idc,h);for(var p=[],m=[],l=0;l<u;l++)p.push(s.readBits(1)),m.push(s.readBits(1));if(u>0)for(var l=u;l<8;l++)s.readBits(2);for(var l=0;l<u;l++)p[l]&&(s.readBits(32),s.readBits(32),s.readBits(24)),m[l]&&s.readByte()},d._parse_rps=function(s,a,u,c){if(a&&s.readBits(1)){if(a>=u)return-1;s.readBits(1),s.readUEG(),c[a]=0;for(var h=0;h<=c[a-1];h++){var f=0,p=s.readBits(1);p||(f=s.readBits(1)),(p||f)&&c[a]++}}else{var m=s.readUEG(),l=s.readUEG();if((l+m)*2>s.getBitsLeft())return-1;c[a]=m+l;for(var h=0;h<m;h++)s.readUEG(),s.readBits(1);for(var h=0;h<l;h++)s.readUEG(),s.readBits(1)}return 0},d._hvcc_parse_vui=function(s,a,u){var c;s.readBits(1)&&s.readByte()==255&&(a.sar_width=s.readBits(16),a.sar_height=s.readBits(16)),s.readBits(1)&&s.readBits(1),s.readBits(1)&&(s.readBits(4),s.readBits(1)&&s.readBits(24)),s.readBits(1)&&(s.readUEG(),s.readUEG()),s.readBits(3),a.default_display_window_flag=s.readBits(1),a.default_display_window_flag&&(a.def_disp_win_left_offset=s.readUEG(),a.def_disp_win_right_offset=s.readUEG(),a.def_disp_win_top_offset=s.readUEG(),a.def_disp_win_bottom_offset=s.readUEG()),s.readBits(1)&&(d._skip_timing_info(s,a),s.readBits(1)&&d._skip_hrd_parameters(s,a,1,u)),s.readBits(1)&&(s.readBits(3),c=s.readUEG(),a.min_spatial_segmentation_idc=Math.min(a.min_spatial_segmentation_idc,c),s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG())},d._skip_sub_layer_ordering_info=function(s,a){s.readUEG(),s.readUEG(),s.readUEG()},d._skip_scaling_list_data=function(s){for(var a=0;a<4;a++)for(var u=0;u<(a==3?2:6);u++)if(!s.readBits(1))s.readUEG();else{var c=Math.min(64,1<<4+(a<<1));a>1&&s.readSEG();for(var h=0;h<c;h++)s.readSEG()}},d._skip_sub_layer_hrd_parameters=function(s,a,u){for(var c=0;c<=a;c++)s.readUEG(),s.readUEG(),u&&(s.readUEG(),s.readUEG()),s.readBits(1)},d._skip_timing_info=function(s,a){a.fps_den=s.readBits(32),a.fps_num=s.readBits(32),a.fps_den>0&&(a.fps=a.fps_num/a.fps_den);var u=0;s.readBits(1)&&(u=s.readUEG(),u>=0&&(a.fps/=u+1))},d._skip_hrd_parameters=function(s,a,u,c){var h=0,f=0,p=0;if(u&&(f=s.readBits(1),p=s.readBits(1),f||p)){var m=s.readBits(1);m&&s.readBits(19),s.readByte(),m&&s.readBits(4),s.readBits(15)}for(var l=0;l<=c;l++){var y=0,x=0,v=0,O=s.readBits(1);a.fps_fixed=O,O||(v=s.readBits(1)),v?s.readUEG():x=s.readBits(1),x||(y=s.readUEG(s)),f&&d._skip_sub_layer_hrd_parameters(s,y,h),p&&d._skip_sub_layer_hrd_parameters(s,y,h)}},d.getProfileString=function(s){switch(s){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},d.getLevelString=function(s){return(s/30).toFixed(1)},d.getChromaFormatString=function(s){switch(s){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},d}();E.default=o},"./src/demux/sps-parser.js":function(g,E,S){S.r(E);var w=S("./src/demux/exp-golomb.js"),b=function(){function o(){}return o._ebsp2rbsp=function(d){for(var s=d,a=s.byteLength,u=new Uint8Array(a),c=0,h=0;h<a;h++)h>=2&&s[h]===3&&s[h-1]===0&&s[h-2]===0||(u[c]=s[h],c++);return new Uint8Array(u.buffer,0,c)},o.parseSPS=function(d){for(var s=d.subarray(1,4),a="avc1.",u=0;u<3;u++){var c=s[u].toString(16);c.length<2&&(c="0"+c),a+=c}var h=o._ebsp2rbsp(d),f=new w.default(h);f.readByte();var p=f.readByte();f.readByte();var m=f.readByte();f.readUEG();var l=o.getProfileString(p),y=o.getLevelString(m),x=1,v=420,O=[0,420,422,444],D=8,A=8;if((p===100||p===110||p===122||p===244||p===44||p===83||p===86||p===118||p===128||p===138||p===144)&&(x=f.readUEG(),x===3&&f.readBits(1),x<=3&&(v=O[x]),D=f.readUEG()+8,A=f.readUEG()+8,f.readBits(1),f.readBool()))for(var L=x!==3?8:12,R=0;R<L;R++)f.readBool()&&(R<6?o._skipScalingList(f,16):o._skipScalingList(f,64));f.readUEG();var M=f.readUEG();if(M===0)f.readUEG();else if(M===1){f.readBits(1),f.readSEG(),f.readSEG();for(var T=f.readUEG(),R=0;R<T;R++)f.readSEG()}var k=f.readUEG();f.readBits(1);var C=f.readUEG(),G=f.readUEG(),K=f.readBits(1);K===0&&f.readBits(1),f.readBits(1);var U=0,j=0,te=0,Q=0,X=f.readBool();X&&(U=f.readUEG(),j=f.readUEG(),te=f.readUEG(),Q=f.readUEG());var oe=1,W=1,V=0,z=!0,ue=0,ve=0,ie=f.readBool();if(ie){if(f.readBool()){var se=f.readByte(),Z=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Pe=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];se>0&&se<16?(oe=Z[se-1],W=Pe[se-1]):se===255&&(oe=f.readByte()<<8|f.readByte(),W=f.readByte()<<8|f.readByte())}if(f.readBool()&&f.readBool(),f.readBool()&&(f.readBits(4),f.readBool()&&f.readBits(24)),f.readBool()&&(f.readUEG(),f.readUEG()),f.readBool()){var ke=f.readBits(32),Ie=f.readBits(32);z=f.readBool(),ue=Ie,ve=ke*2,V=ue/ve}}var Ze=1;(oe!==1||W!==1)&&(Ze=oe/W);var Fe=0,Qe=0;if(x===0)Fe=1,Qe=2-K;else{var Oe=x===3?1:2,xe=x===1?2:1;Fe=Oe,Qe=xe*(2-K)}var be=(C+1)*16,Ge=(2-K)*((G+1)*16);be-=(U+j)*Fe,Ge-=(te+Q)*Qe;var ht=Math.ceil(be*Ze);return f.destroy(),f=null,{codec_mimetype:a,profile_idc:p,level_idc:m,profile_string:l,level_string:y,chroma_format_idc:x,bit_depth:D,bit_depth_luma:D,bit_depth_chroma:A,ref_frames:k,chroma_format:v,chroma_format_string:o.getChromaFormatString(v),frame_rate:{fixed:z,fps:V,fps_den:ve,fps_num:ue},sar_ratio:{width:oe,height:W},codec_size:{width:be,height:Ge},present_size:{width:ht,height:Ge}}},o._skipScalingList=function(d,s){for(var a=8,u=8,c=0,h=0;h<s;h++)u!==0&&(c=d.readSEG(),u=(a+c+256)%256),a=u===0?a:u},o.getProfileString=function(d){switch(d){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},o.getLevelString=function(d){return(d/10).toFixed(1)},o.getChromaFormatString=function(d){switch(d){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},o}();E.default=b},"./src/flv.js":function(g,E,S){S.r(E);var w=S("./src/utils/polyfill.js"),b=S("./src/core/features.js"),o=S("./src/io/loader.js"),d=S("./src/player/flv-player.js"),s=S("./src/player/native-player.js"),a=S("./src/player/player-events.js"),u=S("./src/player/player-errors.js"),c=S("./src/utils/logging-control.js"),h=S("./src/utils/exception.js");w.default.install();function f(y,x){var v=y;if(v==null||typeof v!="object")throw new h.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!v.hasOwnProperty("type"))throw new h.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(v.type){case"flv":return new d.default(v,x);default:return new s.default(v,x)}}function p(){return b.default.supportMSEH264Playback()}function m(){return b.default.getFeatureList()}var l={};l.createPlayer=f,l.isSupported=p,l.getFeatureList=m,l.BaseLoader=o.BaseLoader,l.LoaderStatus=o.LoaderStatus,l.LoaderErrors=o.LoaderErrors,l.Events=a.default,l.ErrorTypes=u.ErrorTypes,l.ErrorDetails=u.ErrorDetails,l.FlvPlayer=d.default,l.NativePlayer=s.default,l.LoggingControl=c.default,Object.defineProperty(l,"version",{enumerable:!0,get:function(){return"1.7.8"}}),E.default=l},"./src/index.js":function(g,E,S){g.exports=S("./src/flv.js").default},"./src/io/fetch-stream-loader.js":function(g,E,S){S.r(E);var w=S("./src/utils/browser.js"),b=S("./src/io/loader.js"),o=S("./src/utils/exception.js"),d=function(){var a=function(u,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(h[p]=f[p])},a(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(u,c);function h(){this.constructor=u}u.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}(),s=function(a){d(u,a);function u(c,h){var f=a.call(this,"fetch-stream-loader")||this;return f.TAG="FetchStreamLoader",f._seekHandler=c,f._config=h,f._needStash=!0,f._requestAbort=!1,f._abortController=null,f._contentLength=null,f._receivedLength=0,f}return u.isSupported=function(){try{var c=w.default.msedge&&w.default.version.minor>=15048,h=w.default.msedge?c:!0;return self.fetch&&self.ReadableStream&&h}catch{return!1}},u.prototype.destroy=function(){this.isWorking()&&this.abort(),a.prototype.destroy.call(this)},u.prototype.open=function(c,h){var f=this;this._dataSource=c,this._range=h;var p=c.url;this._config.reuseRedirectedURL&&c.redirectedURL!=null&&(p=c.redirectedURL);var m=this._seekHandler.getConfig(p,h),l=new self.Headers;if(typeof m.headers=="object"){var y=m.headers;for(var x in y)y.hasOwnProperty(x)&&l.append(x,y[x])}var v={method:"GET",headers:l,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(var x in this._config.headers)l.append(x,this._config.headers[x]);c.cors===!1&&(v.mode="same-origin"),c.withCredentials&&(v.credentials="include"),c.referrerPolicy&&(v.referrerPolicy=c.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,v.signal=this._abortController.signal),this._status=b.LoaderStatus.kConnecting,self.fetch(m.url,v).then(function(O){if(f._requestAbort){f._status=b.LoaderStatus.kIdle,O.body.cancel();return}if(O.ok&&O.status>=200&&O.status<=299){if(O.url!==m.url&&f._onURLRedirect){var D=f._seekHandler.removeURLParameters(O.url);f._onURLRedirect(D)}var A=O.headers.get("Content-Length");return A!=null&&(f._contentLength=parseInt(A),f._contentLength!==0&&f._onContentLengthKnown&&f._onContentLengthKnown(f._contentLength)),f._pump.call(f,O.body.getReader())}else if(f._status=b.LoaderStatus.kError,f._onError)f._onError(b.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:O.status,msg:O.statusText});else throw new o.RuntimeException("FetchStreamLoader: Http code invalid, "+O.status+" "+O.statusText)}).catch(function(O){if(!(f._abortController&&f._abortController.signal.aborted))if(f._status=b.LoaderStatus.kError,f._onError)f._onError(b.LoaderErrors.EXCEPTION,{code:-1,msg:O.message});else throw O})},u.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==b.LoaderStatus.kBuffering||!w.default.chrome)&&this._abortController)try{this._abortController.abort()}catch{}},u.prototype._pump=function(c){var h=this;return c.read().then(function(f){if(f.done)if(h._contentLength!==null&&h._receivedLength<h._contentLength){h._status=b.LoaderStatus.kError;var p=b.LoaderErrors.EARLY_EOF,m={code:-1,msg:"Fetch stream meet Early-EOF"};if(h._onError)h._onError(p,m);else throw new o.RuntimeException(m.msg)}else h._status=b.LoaderStatus.kComplete,h._onComplete&&h._onComplete(h._range.from,h._range.from+h._receivedLength-1);else{if(h._abortController&&h._abortController.signal.aborted){h._status=b.LoaderStatus.kComplete;return}else if(h._requestAbort===!0)return h._status=b.LoaderStatus.kComplete,c.cancel();h._status=b.LoaderStatus.kBuffering;var l=f.value.buffer,y=h._range.from+h._receivedLength;h._receivedLength+=l.byteLength,h._onDataArrival&&h._onDataArrival(l,y,h._receivedLength),h._pump(c)}}).catch(function(f){if(h._abortController&&h._abortController.signal.aborted){h._status=b.LoaderStatus.kComplete;return}if(!(f.code===11&&w.default.msedge)){h._status=b.LoaderStatus.kError;var p=0,m=null;if((f.code===19||f.message==="network error")&&(h._contentLength===null||h._contentLength!==null&&h._receivedLength<h._contentLength)?(p=b.LoaderErrors.EARLY_EOF,m={code:f.code,msg:"Fetch stream meet Early-EOF"}):(p=b.LoaderErrors.EXCEPTION,m={code:f.code,msg:f.message}),h._onError)h._onError(p,m);else throw new o.RuntimeException(m.msg)}})},u}(b.BaseLoader);E.default=s},"./src/io/io-controller.js":function(g,E,S){S.r(E);var w=S("./src/utils/logger.js"),b=S("./src/io/speed-sampler.js"),o=S("./src/io/loader.js"),d=S("./src/io/fetch-stream-loader.js"),s=S("./src/io/xhr-moz-chunked-loader.js"),a=S("./src/io/xhr-range-loader.js"),u=S("./src/io/websocket-loader.js"),c=S("./src/io/range-seek-handler.js"),h=S("./src/io/param-seek-handler.js"),f=S("./src/utils/exception.js"),p=function(){function m(l,y,x){this.TAG="IOController",this._config=y,this._extraData=x,this._stashInitialSize=64*1024,y.stashInitialSize!=null&&y.stashInitialSize>0&&(this._stashInitialSize=y.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=Math.max(this._stashSize,1024*1024*3),this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,y.enableStashBuffer===!1&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=l,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(l.url),this._refTotalLength=l.filesize?l.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new b.default,this._speedNormalizeList=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return m.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},m.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},m.prototype.isPaused=function(){return this._paused},Object.defineProperty(m.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"extraData",{get:function(){return this._extraData},set:function(l){this._extraData=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(l){this._onDataArrival=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(l){this._onSeeked=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onError",{get:function(){return this._onError},set:function(l){this._onError=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onComplete",{get:function(){return this._onComplete},set:function(l){this._onComplete=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(l){this._onRedirect=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(l){this._onRecoveredEarlyEof=l},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"hasRedirect",{get:function(){return this._redirectedURL!=null||this._dataSource.redirectedURL!=null},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"currentSpeed",{get:function(){return this._loaderClass===a.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),m.prototype._selectSeekHandler=function(){var l=this._config;if(l.seekType==="range")this._seekHandler=new c.default(this._config.rangeLoadZeroStart);else if(l.seekType==="param"){var y=l.seekParamStart||"bstart",x=l.seekParamEnd||"bend";this._seekHandler=new h.default(y,x)}else if(l.seekType==="custom"){if(typeof l.customSeekHandler!="function")throw new f.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new l.customSeekHandler}else throw new f.InvalidArgumentException("Invalid seekType in config: "+l.seekType)},m.prototype._selectLoader=function(){if(this._config.customLoader!=null)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=u.default;else if(d.default.isSupported())this._loaderClass=d.default;else if(s.default.isSupported())this._loaderClass=s.default;else if(a.default.isSupported())this._loaderClass=a.default;else throw new f.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!")},m.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._loader.needStashBuffer===!1&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},m.prototype.open=function(l){this._currentRange={from:0,to:-1},l&&(this._currentRange.from=l),this._speedSampler.reset(),l||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},m.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},m.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},m.prototype.resume=function(){if(this._paused){this._paused=!1;var l=this._resumeFrom;this._resumeFrom=0,this._internalSeek(l,!0)}},m.prototype.seek=function(l){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(l,!0)},m.prototype._internalSeek=function(l,y){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(y),this._loader.destroy(),this._loader=null;var x={from:l,to:-1};this._currentRange={from:x.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,x),this._onSeeked&&this._onSeeked()},m.prototype.updateUrl=function(l){if(!l||typeof l!="string"||l.length===0)throw new f.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=l},m.prototype._expandBuffer=function(l){for(var y=this._stashSize;y+1024*1024*1<l;)y*=2;if(y+=1024*1024*1,y!==this._bufferSize){var x=new ArrayBuffer(y);if(this._stashUsed>0){var v=new Uint8Array(this._stashBuffer,0,this._stashUsed),O=new Uint8Array(x,0,y);O.set(v,0)}this._stashBuffer=x,this._bufferSize=y}},m.prototype._normalizeSpeed=function(l){var y=this._speedNormalizeList,x=y.length-1,v=0,O=0,D=x;if(l<y[0])return y[0];for(;O<=D;){if(v=O+Math.floor((D-O)/2),v===x||l>=y[v]&&l<y[v+1])return y[v];y[v]<l?O=v+1:D=v-1}},m.prototype._adjustStashSize=function(l){var y=0;this._config.isLive?y=l/8:l<512?y=l:l>=512&&l<=1024?y=Math.floor(l*1.5):y=l*2,y>8192&&(y=8192);var x=y*1024+1024*1024*1;this._bufferSize<x&&this._expandBuffer(x),this._stashSize=y*1024},m.prototype._dispatchChunks=function(l,y){return this._currentRange.to=y+l.byteLength-1,this._onDataArrival(l,y)},m.prototype._onURLRedirect=function(l){this._redirectedURL=l,this._onRedirect&&this._onRedirect(l)},m.prototype._onContentLengthKnown=function(l){l&&this._fullRequestFlag&&(this._totalLength=l,this._fullRequestFlag=!1)},m.prototype._onLoaderChunkArrival=function(l,y,x){if(!this._onDataArrival)throw new f.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(l.byteLength);var v=this._speedSampler.lastSecondKBps;if(v!==0){var O=this._normalizeSpeed(v);this._speedNormalized!==O&&(this._speedNormalized=O,this._adjustStashSize(O))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=y),this._stashUsed+l.byteLength<=this._stashSize){var L=new Uint8Array(this._stashBuffer,0,this._stashSize);L.set(new Uint8Array(l),this._stashUsed),this._stashUsed+=l.byteLength}else{var L=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var M=this._stashBuffer.slice(0,this._stashUsed),D=this._dispatchChunks(M,this._stashByteStart);if(D<M.byteLength){if(D>0){var R=new Uint8Array(M,D);L.set(R,0),this._stashUsed=R.byteLength,this._stashByteStart+=D}}else this._stashUsed=0,this._stashByteStart+=D;this._stashUsed+l.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+l.byteLength),L=new Uint8Array(this._stashBuffer,0,this._bufferSize)),L.set(new Uint8Array(l),this._stashUsed),this._stashUsed+=l.byteLength}else{var D=this._dispatchChunks(l,y);if(D<l.byteLength){var A=l.byteLength-D;A>this._bufferSize&&(this._expandBuffer(A),L=new Uint8Array(this._stashBuffer,0,this._bufferSize)),L.set(new Uint8Array(l,D),0),this._stashUsed+=A,this._stashByteStart=y+D}}}else if(this._stashUsed===0){var D=this._dispatchChunks(l,y);if(D<l.byteLength){var A=l.byteLength-D;A>this._bufferSize&&this._expandBuffer(A);var L=new Uint8Array(this._stashBuffer,0,this._bufferSize);L.set(new Uint8Array(l,D),0),this._stashUsed+=A,this._stashByteStart=y+D}}else{this._stashUsed+l.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+l.byteLength);var L=new Uint8Array(this._stashBuffer,0,this._bufferSize);L.set(new Uint8Array(l),this._stashUsed),this._stashUsed+=l.byteLength;var D=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(D<this._stashUsed&&D>0){var R=new Uint8Array(this._stashBuffer,D);L.set(R,0)}this._stashUsed-=D,this._stashByteStart+=D}}},m.prototype._flushStashBuffer=function(l){if(this._stashUsed>0){var y=this._stashBuffer.slice(0,this._stashUsed),x=this._dispatchChunks(y,this._stashByteStart),v=y.byteLength-x;if(x<y.byteLength)if(l)w.default.w(this.TAG,v+" bytes unconsumed data remain when flush buffer, dropped");else{if(x>0){var O=new Uint8Array(this._stashBuffer,0,this._bufferSize),D=new Uint8Array(y,x);O.set(D,0),this._stashUsed=D.byteLength,this._stashByteStart+=x}return 0}return this._stashUsed=0,this._stashByteStart=0,v}return 0},m.prototype._onLoaderComplete=function(l,y){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},m.prototype._onLoaderError=function(l,y){switch(w.default.e(this.TAG,"Loader error, code = "+y.code+", msg = "+y.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,l=o.LoaderErrors.UNRECOVERABLE_EARLY_EOF),l){case o.LoaderErrors.EARLY_EOF:{if(!this._config.isLive&&this._totalLength){var x=this._currentRange.to+1;x<this._totalLength&&(w.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(x,!1));return}l=o.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break}case o.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case o.LoaderErrors.CONNECTING_TIMEOUT:case o.LoaderErrors.HTTP_STATUS_CODE_INVALID:case o.LoaderErrors.EXCEPTION:break}if(this._onError)this._onError(l,y);else throw new f.RuntimeException("IOException: "+y.msg)},m}();E.default=p},"./src/io/loader.js":function(g,E,S){S.r(E),S.d(E,{LoaderStatus:function(){return b},LoaderErrors:function(){return o},BaseLoader:function(){return d}});var w=S("./src/utils/exception.js"),b={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},o={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},d=function(){function s(a){this._type=a||"undefined",this._status=b.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return s.prototype.destroy=function(){this._status=b.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},s.prototype.isWorking=function(){return this._status===b.kConnecting||this._status===b.kBuffering},Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(a){this._onContentLengthKnown=a},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(a){this._onURLRedirect=a},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(a){this._onDataArrival=a},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onError",{get:function(){return this._onError},set:function(a){this._onError=a},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onComplete",{get:function(){return this._onComplete},set:function(a){this._onComplete=a},enumerable:!1,configurable:!0}),s.prototype.open=function(a,u){throw new w.NotImplementedException("Unimplemented abstract function!")},s.prototype.abort=function(){throw new w.NotImplementedException("Unimplemented abstract function!")},s}()},"./src/io/param-seek-handler.js":function(g,E,S){S.r(E);var w=function(){function b(o,d){this._startName=o,this._endName=d}return b.prototype.getConfig=function(o,d){var s=o;if(d.from!==0||d.to!==-1){var a=!0;s.indexOf("?")===-1&&(s+="?",a=!1),a&&(s+="&"),s+=this._startName+"="+d.from.toString(),d.to!==-1&&(s+="&"+this._endName+"="+d.to.toString())}return{url:s,headers:{}}},b.prototype.removeURLParameters=function(o){var d=o.split("?")[0],s=void 0,a=o.indexOf("?");a!==-1&&(s=o.substring(a+1));var u="";if(s!=null&&s.length>0)for(var c=s.split("&"),h=0;h<c.length;h++){var f=c[h].split("="),p=h>0;f[0]!==this._startName&&f[0]!==this._endName&&(p&&(u+="&"),u+=c[h])}return u.length===0?d:d+"?"+u},b}();E.default=w},"./src/io/range-seek-handler.js":function(g,E,S){S.r(E);var w=function(){function b(o){this._zeroStart=o||!1}return b.prototype.getConfig=function(o,d){var s={};if(d.from!==0||d.to!==-1){var a=void 0;d.to!==-1?a="bytes="+d.from.toString()+"-"+d.to.toString():a="bytes="+d.from.toString()+"-",s.Range=a}else this._zeroStart&&(s.Range="bytes=0-");return{url:o,headers:s}},b.prototype.removeURLParameters=function(o){return o},b}();E.default=w},"./src/io/speed-sampler.js":function(g,E,S){S.r(E);var w=function(){function b(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return b.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},b.prototype.addBytes=function(o){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=o,this._totalBytes+=o):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=o,this._totalBytes+=o):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=o,this._totalBytes+=o,this._lastCheckpoint=this._now())},Object.defineProperty(b.prototype,"currentKBps",{get:function(){this.addBytes(0);var o=(this._now()-this._lastCheckpoint)/1e3;return o==0&&(o=1),this._intervalBytes/o/1024},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"averageKBps",{get:function(){var o=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/o/1024},enumerable:!1,configurable:!0}),b}();E.default=w},"./src/io/websocket-loader.js":function(g,E,S){S.r(E);var w=S("./src/io/loader.js"),b=S("./src/utils/exception.js"),o=function(){var s=function(a,u){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(c[f]=h[f])},s(a,u)};return function(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");s(a,u);function c(){this.constructor=a}a.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),d=function(s){o(a,s);function a(){var u=s.call(this,"websocket-loader")||this;return u.TAG="WebSocketLoader",u._needStash=!0,u._ws=null,u._requestAbort=!1,u._receivedLength=0,u}return a.isSupported=function(){try{return typeof self.WebSocket<"u"}catch{return!1}},a.prototype.destroy=function(){this._ws&&this.abort(),s.prototype.destroy.call(this)},a.prototype.open=function(u){try{var c=this._ws=new self.WebSocket(u.url);c.binaryType="arraybuffer",c.onopen=this._onWebSocketOpen.bind(this),c.onclose=this._onWebSocketClose.bind(this),c.onmessage=this._onWebSocketMessage.bind(this),c.onerror=this._onWebSocketError.bind(this),this._status=w.LoaderStatus.kConnecting}catch(f){this._status=w.LoaderStatus.kError;var h={code:f.code,msg:f.message};if(this._onError)this._onError(w.LoaderErrors.EXCEPTION,h);else throw new b.RuntimeException(h.msg)}},a.prototype.abort=function(){var u=this._ws;u&&(u.readyState===0||u.readyState===1)&&(this._requestAbort=!0,u.close()),this._ws=null,this._status=w.LoaderStatus.kComplete},a.prototype._onWebSocketOpen=function(u){this._status=w.LoaderStatus.kBuffering},a.prototype._onWebSocketClose=function(u){if(this._requestAbort===!0){this._requestAbort=!1;return}this._status=w.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)},a.prototype._onWebSocketMessage=function(u){var c=this;if(u.data instanceof ArrayBuffer)this._dispatchArrayBuffer(u.data);else if(u.data instanceof Blob){var h=new FileReader;h.onload=function(){c._dispatchArrayBuffer(h.result)},h.readAsArrayBuffer(u.data)}else{this._status=w.LoaderStatus.kError;var f={code:-1,msg:"Unsupported WebSocket message type: "+u.data.constructor.name};if(this._onError)this._onError(w.LoaderErrors.EXCEPTION,f);else throw new b.RuntimeException(f.msg)}},a.prototype._dispatchArrayBuffer=function(u){var c=u,h=this._receivedLength;this._receivedLength+=c.byteLength,this._onDataArrival&&this._onDataArrival(c,h,this._receivedLength)},a.prototype._onWebSocketError=function(u){this._status=w.LoaderStatus.kError;var c={code:u.code,msg:u.message};if(this._onError)this._onError(w.LoaderErrors.EXCEPTION,c);else throw new b.RuntimeException(c.msg)},a}(w.BaseLoader);E.default=d},"./src/io/xhr-moz-chunked-loader.js":function(g,E,S){S.r(E);var w=S("./src/utils/logger.js"),b=S("./src/io/loader.js"),o=S("./src/utils/exception.js"),d=function(){var a=function(u,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(h[p]=f[p])},a(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(u,c);function h(){this.constructor=u}u.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}(),s=function(a){d(u,a);function u(c,h){var f=a.call(this,"xhr-moz-chunked-loader")||this;return f.TAG="MozChunkedLoader",f._seekHandler=c,f._config=h,f._needStash=!0,f._xhr=null,f._requestAbort=!1,f._contentLength=null,f._receivedLength=0,f}return u.isSupported=function(){try{var c=new XMLHttpRequest;return c.open("GET","https://example.com",!0),c.responseType="moz-chunked-arraybuffer",c.responseType==="moz-chunked-arraybuffer"}catch(h){return w.default.w("MozChunkedLoader",h.message),!1}},u.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),a.prototype.destroy.call(this)},u.prototype.open=function(c,h){this._dataSource=c,this._range=h;var f=c.url;this._config.reuseRedirectedURL&&c.redirectedURL!=null&&(f=c.redirectedURL);var p=this._seekHandler.getConfig(f,h);this._requestURL=p.url;var m=this._xhr=new XMLHttpRequest;if(m.open("GET",p.url,!0),m.responseType="moz-chunked-arraybuffer",m.onreadystatechange=this._onReadyStateChange.bind(this),m.onprogress=this._onProgress.bind(this),m.onloadend=this._onLoadEnd.bind(this),m.onerror=this._onXhrError.bind(this),c.withCredentials&&(m.withCredentials=!0),typeof p.headers=="object"){var l=p.headers;for(var y in l)l.hasOwnProperty(y)&&m.setRequestHeader(y,l[y])}if(typeof this._config.headers=="object"){var l=this._config.headers;for(var y in l)l.hasOwnProperty(y)&&m.setRequestHeader(y,l[y])}this._status=b.LoaderStatus.kConnecting,m.send()},u.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=b.LoaderStatus.kComplete},u.prototype._onReadyStateChange=function(c){var h=c.target;if(h.readyState===2){if(h.responseURL!=null&&h.responseURL!==this._requestURL&&this._onURLRedirect){var f=this._seekHandler.removeURLParameters(h.responseURL);this._onURLRedirect(f)}if(h.status!==0&&(h.status<200||h.status>299))if(this._status=b.LoaderStatus.kError,this._onError)this._onError(b.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:h.status,msg:h.statusText});else throw new o.RuntimeException("MozChunkedLoader: Http code invalid, "+h.status+" "+h.statusText);else this._status=b.LoaderStatus.kBuffering}},u.prototype._onProgress=function(c){if(this._status!==b.LoaderStatus.kError){this._contentLength===null&&c.total!==null&&c.total!==0&&(this._contentLength=c.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var h=c.target.response,f=this._range.from+this._receivedLength;this._receivedLength+=h.byteLength,this._onDataArrival&&this._onDataArrival(h,f,this._receivedLength)}},u.prototype._onLoadEnd=function(c){if(this._requestAbort===!0){this._requestAbort=!1;return}else if(this._status===b.LoaderStatus.kError)return;this._status=b.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)},u.prototype._onXhrError=function(c){this._status=b.LoaderStatus.kError;var h=0,f=null;if(this._contentLength&&c.loaded<this._contentLength?(h=b.LoaderErrors.EARLY_EOF,f={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(h=b.LoaderErrors.EXCEPTION,f={code:-1,msg:c.constructor.name+" "+c.type}),this._onError)this._onError(h,f);else throw new o.RuntimeException(f.msg)},u}(b.BaseLoader);E.default=s},"./src/io/xhr-range-loader.js":function(g,E,S){S.r(E);var w=S("./src/utils/logger.js"),b=S("./src/io/speed-sampler.js"),o=S("./src/io/loader.js"),d=S("./src/utils/exception.js"),s=function(){var u=function(c,h){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(f[m]=p[m])},u(c,h)};return function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}(),a=function(u){s(c,u);function c(h,f){var p=u.call(this,"xhr-range-loader")||this;return p.TAG="RangeLoader",p._seekHandler=h,p._config=f,p._needStash=!1,p._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],p._currentChunkSizeKB=384,p._currentSpeedNormalized=0,p._zeroSpeedChunkCount=0,p._xhr=null,p._speedSampler=new b.default,p._requestAbort=!1,p._waitForTotalLength=!1,p._totalLengthReceived=!1,p._currentRequestURL=null,p._currentRedirectedURL=null,p._currentRequestRange=null,p._totalLength=null,p._contentLength=null,p._receivedLength=0,p._lastTimeLoaded=0,p}return c.isSupported=function(){try{var h=new XMLHttpRequest;return h.open("GET","https://example.com",!0),h.responseType="arraybuffer",h.responseType==="arraybuffer"}catch(f){return w.default.w("RangeLoader",f.message),!1}},c.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),u.prototype.destroy.call(this)},Object.defineProperty(c.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),c.prototype.open=function(h,f){this._dataSource=h,this._range=f,this._status=o.LoaderStatus.kConnecting;var p=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(p=!0,this._totalLength=this._dataSource.filesize),!this._totalLengthReceived&&!p?(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1})):this._openSubRange()},c.prototype._openSubRange=function(){var h=this._currentChunkSizeKB*1024,f=this._range.from+this._receivedLength,p=f+h;this._contentLength!=null&&p-this._range.from>=this._contentLength&&(p=this._range.from+this._contentLength-1),this._currentRequestRange={from:f,to:p},this._internalOpen(this._dataSource,this._currentRequestRange)},c.prototype._internalOpen=function(h,f){this._lastTimeLoaded=0;var p=h.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?p=this._currentRedirectedURL:h.redirectedURL!=null&&(p=h.redirectedURL));var m=this._seekHandler.getConfig(p,f);this._currentRequestURL=m.url;var l=this._xhr=new XMLHttpRequest;if(l.open("GET",m.url,!0),l.responseType="arraybuffer",l.onreadystatechange=this._onReadyStateChange.bind(this),l.onprogress=this._onProgress.bind(this),l.onload=this._onLoad.bind(this),l.onerror=this._onXhrError.bind(this),h.withCredentials&&(l.withCredentials=!0),typeof m.headers=="object"){var y=m.headers;for(var x in y)y.hasOwnProperty(x)&&l.setRequestHeader(x,y[x])}if(typeof this._config.headers=="object"){var y=this._config.headers;for(var x in y)y.hasOwnProperty(x)&&l.setRequestHeader(x,y[x])}l.send()},c.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=o.LoaderStatus.kComplete},c.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},c.prototype._onReadyStateChange=function(h){var f=h.target;if(f.readyState===2){if(f.responseURL!=null){var p=this._seekHandler.removeURLParameters(f.responseURL);f.responseURL!==this._currentRequestURL&&p!==this._currentRedirectedURL&&(this._currentRedirectedURL=p,this._onURLRedirect&&this._onURLRedirect(p))}if(f.status>=200&&f.status<=299){if(this._waitForTotalLength)return;this._status=o.LoaderStatus.kBuffering}else if(this._status=o.LoaderStatus.kError,this._onError)this._onError(o.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:f.status,msg:f.statusText});else throw new d.RuntimeException("RangeLoader: Http code invalid, "+f.status+" "+f.statusText)}},c.prototype._onProgress=function(h){if(this._status!==o.LoaderStatus.kError){if(this._contentLength===null){var f=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,f=!0;var p=h.total;this._internalAbort(),p!=null&p!==0&&(this._totalLength=p)}if(this._range.to===-1?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,f){this._openSubRange();return}this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var m=h.loaded-this._lastTimeLoaded;this._lastTimeLoaded=h.loaded,this._speedSampler.addBytes(m)}},c.prototype._normalizeSpeed=function(h){var f=this._chunkSizeKBList,p=f.length-1,m=0,l=0,y=p;if(h<f[0])return f[0];for(;l<=y;){if(m=l+Math.floor((y-l)/2),m===p||h>=f[m]&&h<f[m+1])return f[m];f[m]<h?l=m+1:y=m-1}},c.prototype._onLoad=function(h){if(this._status!==o.LoaderStatus.kError){if(this._waitForTotalLength){this._waitForTotalLength=!1;return}this._lastTimeLoaded=0;var f=this._speedSampler.lastSecondKBps;if(f===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(f=this._speedSampler.currentKBps)),f!==0){var p=this._normalizeSpeed(f);this._currentSpeedNormalized!==p&&(this._currentSpeedNormalized=p,this._currentChunkSizeKB=p)}var m=h.target.response,l=this._range.from+this._receivedLength;this._receivedLength+=m.byteLength;var y=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():y=!0,this._onDataArrival&&this._onDataArrival(m,l,this._receivedLength),y&&(this._status=o.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},c.prototype._onXhrError=function(h){this._status=o.LoaderStatus.kError;var f=0,p=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(f=o.LoaderErrors.EARLY_EOF,p={code:-1,msg:"RangeLoader meet Early-Eof"}):(f=o.LoaderErrors.EXCEPTION,p={code:-1,msg:h.constructor.name+" "+h.type}),this._onError)this._onError(f,p);else throw new d.RuntimeException(p.msg)},c}(o.BaseLoader);E.default=a},"./src/player/flv-player.js":function(g,E,S){S.r(E);var w=S("./node_modules/events/events.js"),b=S.n(w),o=S("./src/utils/logger.js"),d=S("./src/utils/browser.js"),s=S("./src/player/player-events.js"),a=S("./src/core/transmuxer.js"),u=S("./src/core/transmuxing-events.js"),c=S("./src/core/mse-controller.js"),h=S("./src/core/mse-events.js"),f=S("./src/player/player-errors.js"),p=S("./src/config.js"),m=S("./src/utils/exception.js"),l=function(){function y(x,v){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(b()),this._config=(0,p.createDefaultConfig)(),typeof v=="object"&&Object.assign(this._config,v),x.type.toLowerCase()!=="flv")throw new m.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");x.isLive===!0&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=x,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var O=d.default.chrome&&(d.default.version.major<50||d.default.version.major===50&&d.default.version.build<2661);this._alwaysSeekKeyframe=!!(O||d.default.msedge||d.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return y.prototype.destroy=function(){this._emitter.emit(s.default.DESTROYING),this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},y.prototype.on=function(x,v){var O=this;x===s.default.MEDIA_INFO?this._mediaInfo!=null&&Promise.resolve().then(function(){O._emitter.emit(s.default.MEDIA_INFO,O.mediaInfo)}):x===s.default.STATISTICS_INFO&&this._statisticsInfo!=null&&Promise.resolve().then(function(){O._emitter.emit(s.default.STATISTICS_INFO,O.statisticsInfo)}),this._emitter.addListener(x,v)},y.prototype.off=function(x,v){this._emitter.removeListener(x,v)},y.prototype.attachMediaElement=function(x){var v=this;if(this._mediaElement=x,x.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),x.addEventListener("seeking",this.e.onvSeeking),x.addEventListener("canplay",this.e.onvCanPlay),x.addEventListener("stalled",this.e.onvStalled),x.addEventListener("progress",this.e.onvProgress),this._msectl=new c.default(this._config),this._msectl.on(h.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(h.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(h.default.SOURCE_OPEN,function(){v._mseSourceOpened=!0,v._hasPendingLoad&&(v._hasPendingLoad=!1,v.load())}),this._msectl.on(h.default.ERROR,function(O){v._emitter.emit(s.default.ERROR,f.ErrorTypes.MEDIA_ERROR,f.ErrorDetails.MEDIA_MSE_ERROR,O)}),this._msectl.attachMediaElement(x),this._pendingSeekTime!=null)try{x.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},y.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},y.prototype.load=function(){var x=this;if(!this._mediaElement)throw new m.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new m.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");if(!this._hasPendingLoad){if(this._config.deferLoadAfterSourceOpen&&this._mseSourceOpened===!1){this._hasPendingLoad=!0;return}this._mediaElement.readyState>0&&this.directSeek(0),this._transmuxer=new a.default(this._mediaDataSource,this._config),this._transmuxer.on(u.default.INIT_SEGMENT,function(v,O){x._msectl.appendInitSegment(O)}),this._transmuxer.on(u.default.MEDIA_SEGMENT,function(v,O){if(x._msectl.appendMediaSegment(O),x._config.lazyLoad&&!x._config.isLive){var D=x._mediaElement.currentTime;O.info.endDts>=(D+x._config.lazyLoadMaxDuration)*1e3&&x._progressChecker==null&&(o.default.v(x.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),x._suspendTransmuxer())}}),this._transmuxer.on(u.default.LOADING_COMPLETE,function(){x._msectl.endOfStream(),x._emitter.emit(s.default.LOADING_COMPLETE)}),this._transmuxer.on(u.default.RECOVERED_EARLY_EOF,function(){x._emitter.emit(s.default.RECOVERED_EARLY_EOF)}),this._transmuxer.on(u.default.IO_ERROR,function(v,O){x._emitter.emit(s.default.ERROR,f.ErrorTypes.NETWORK_ERROR,v,O)}),this._transmuxer.on(u.default.DEMUX_ERROR,function(v,O){x._emitter.emit(s.default.ERROR,f.ErrorTypes.MEDIA_ERROR,v,{code:-1,msg:O})}),this._transmuxer.on(u.default.MEDIA_INFO,function(v){x._mediaInfo=v,x._emitter.emit(s.default.MEDIA_INFO,Object.assign({},v))}),this._transmuxer.on(u.default.METADATA_ARRIVED,function(v){x._emitter.emit(s.default.METADATA_ARRIVED,v)}),this._transmuxer.on(u.default.SCRIPTDATA_ARRIVED,function(v){x._emitter.emit(s.default.SCRIPTDATA_ARRIVED,v)}),this._transmuxer.on(u.default.STATISTICS_INFO,function(v){x._statisticsInfo=x._fillStatisticsInfo(v),x._emitter.emit(s.default.STATISTICS_INFO,Object.assign({},x._statisticsInfo))}),this._transmuxer.on(u.default.RECOMMEND_SEEKPOINT,function(v){x._mediaElement&&!x._config.accurateSeek&&x.directSeek(v/1e3)}),this._transmuxer.open()}},y.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},y.prototype.play=function(){return this._mediaElement.play()},y.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(y.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(x){this._mediaElement.volume=x},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(x){this._mediaElement.muted=x},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"speed",{get:function(){return this._mediaElement.playbackRate},set:function(x){this._mediaElement.playbackRate=x},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(x){this._mediaElement?this._internalSeek(x):this._pendingSeekTime=x},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"statisticsInfo",{get:function(){return this._statisticsInfo==null&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),y.prototype._fillStatisticsInfo=function(x){if(x.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return x;var v=!0,O=0,D=0;if(this._mediaElement.getVideoPlaybackQuality){var A=this._mediaElement.getVideoPlaybackQuality();O=A.totalVideoFrames,D=A.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(O=this._mediaElement.webkitDecodedFrameCount,D=this._mediaElement.webkitDroppedFrameCount):v=!1;return v&&(x.decodedFrames=O,x.droppedFrames=D),x},y.prototype._onmseUpdateEnd=function(){if(!(!this._config.lazyLoad||this._config.isLive)){for(var x=this._mediaElement.buffered,v=this._mediaElement.currentTime,O=0,D=0;D<x.length;D++){var A=x.start(D),L=x.end(D);if(A<=v&&v<L){O=L;break}}O>=v+this._config.lazyLoadMaxDuration&&this._progressChecker==null&&(o.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},y.prototype._onmseBufferFull=function(){o.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._progressChecker==null&&this._suspendTransmuxer()},y.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),this._progressChecker==null&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},y.prototype._checkProgressAndResume=function(){for(var x=this._mediaElement.currentTime,v=this._mediaElement.buffered,O=!1,D=0;D<v.length;D++){var A=v.start(D),L=v.end(D);if(x>=A&&x<L){x>=L-this._config.lazyLoadRecoverDuration&&(O=!0);break}}O&&(window.clearInterval(this._progressChecker),this._progressChecker=null,O&&(o.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},y.prototype._isTimepointBuffered=function(x){for(var v=this._mediaElement.buffered,O=0;O<v.length;O++){var D=v.start(O),A=v.end(O);if(x>=D&&x<A)return!0}return!1},y.prototype._internalSeek=function(x){var v=this._isTimepointBuffered(x),O=!1,D=0;if(x<1&&this._mediaElement.buffered.length>0){var A=this._mediaElement.buffered.start(0);(A<1&&x<A||d.default.safari)&&(O=!0,D=d.default.safari?.1:A)}if(O)this.directSeek(D);else if(v){if(!this._alwaysSeekKeyframe)this.directSeek(x);else{var L=this._msectl.getNearestKeyframe(Math.floor(x*1e3));L!=null&&(x=L.dts/1e3),this.directSeek(x)}this._progressChecker!=null&&this._checkProgressAndResume()}else this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(x),this._transmuxer.seek(Math.floor(x*1e3)),this._config.accurateSeek&&this.directSeek(x)},y.prototype.directSeek=function(x){this._requestSetTime=!0,this._mediaElement.currentTime=x},y.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var x=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(x)||(this._progressChecker!=null&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(x),this._transmuxer.seek(Math.floor(x*1e3)),this._config.accurateSeek&&this.directSeek(x))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},y.prototype._checkAndResumeStuckPlayback=function(x){var v=this._mediaElement;if(x||!this._receivedCanPlay||v.readyState<2){var O=v.buffered;O.length>0&&v.currentTime<O.start(0)&&(o.default.w(this.TAG,"Playback seems stuck at "+v.currentTime+", seek to "+O.start(0)),this.directSeek(O.start(0)))}},y.prototype._onvLoadedMetadata=function(x){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},y.prototype._onvSeeking=function(x){if(this._requestSetTime){this._requestSetTime=!1;return}var v=this._mediaElement.currentTime,O=this._mediaElement.buffered;if(v<1&&O.length>0){var D=O.start(0);if(D<1&&v<D||d.default.safari){var A=d.default.safari?.1:D;this.directSeek(A);return}}if(this._isTimepointBuffered(v)){if(this._alwaysSeekKeyframe){var L=this._msectl.getNearestKeyframe(Math.floor(v*1e3));L!=null&&(v=L.dts/1e3,this.directSeek(v))}this._progressChecker!=null&&this._checkProgressAndResume();return}this._seekpointRecord={seekPoint:v,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},y.prototype._onvCanPlay=function(x){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},y.prototype._onvStalled=function(x){this._checkAndResumeStuckPlayback(!0)},y.prototype._onvProgress=function(x){var v=this;this._checkAndResumeStuckPlayback(),Promise.resolve().then(function(){v._emitter.emit(s.default.PROGRESS,x)})},y}();E.default=l},"./src/player/native-player.js":function(g,E,S){S.r(E);var w=S("./node_modules/events/events.js"),b=S.n(w),o=S("./src/player/player-events.js"),d=S("./src/config.js"),s=S("./src/utils/exception.js"),a=function(){function u(c,h){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(b()),this._config=(0,d.createDefaultConfig)(),typeof h=="object"&&Object.assign(this._config,h),c.type.toLowerCase()==="flv")throw new s.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(c.hasOwnProperty("segments"))throw new s.InvalidArgumentException("NativePlayer("+c.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=c,this._mediaElement=null}return u.prototype.destroy=function(){this._emitter.emit(o.default.DESTROYING),this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},u.prototype.on=function(c,h){var f=this;c===o.default.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){f._emitter.emit(o.default.MEDIA_INFO,f.mediaInfo)}):c===o.default.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){f._emitter.emit(o.default.STATISTICS_INFO,f.statisticsInfo)}),this._emitter.addListener(c,h)},u.prototype.off=function(c,h){this._emitter.removeListener(c,h)},u.prototype.attachMediaElement=function(c){if(this._mediaElement=c,c.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{c.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},u.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},u.prototype.load=function(){if(!this._mediaElement)throw new s.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},u.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},u.prototype.play=function(){return this._mediaElement.play()},u.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(u.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(c){this._mediaElement.volume=c},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(c){this._mediaElement.muted=c},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"speed",{get:function(){return this._mediaElement.playbackRate},set:function(c){this._mediaElement.playbackRate=c},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(c){this._mediaElement?this._mediaElement.currentTime=c:this._pendingSeekTime=c},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"mediaInfo",{get:function(){var c=this._mediaElement instanceof HTMLAudioElement?"audio/":"video/",h={mimeType:c+this._mediaDataSource.type};return this._mediaElement&&(h.duration=Math.floor(this._mediaElement.duration*1e3),this._mediaElement instanceof HTMLVideoElement&&(h.width=this._mediaElement.videoWidth,h.height=this._mediaElement.videoHeight)),h},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"statisticsInfo",{get:function(){var c={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return c;var h=!0,f=0,p=0;if(this._mediaElement.getVideoPlaybackQuality){var m=this._mediaElement.getVideoPlaybackQuality();f=m.totalVideoFrames,p=m.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(f=this._mediaElement.webkitDecodedFrameCount,p=this._mediaElement.webkitDroppedFrameCount):h=!1;return h&&(c.decodedFrames=f,c.droppedFrames=p),c},enumerable:!1,configurable:!0}),u.prototype._onvLoadedMetadata=function(c){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(o.default.MEDIA_INFO,this.mediaInfo)},u.prototype._reportStatisticsInfo=function(){this._emitter.emit(o.default.STATISTICS_INFO,this.statisticsInfo)},u}();E.default=a},"./src/player/player-errors.js":function(g,E,S){S.r(E),S.d(E,{ErrorTypes:function(){return o},ErrorDetails:function(){return d}});var w=S("./src/io/loader.js"),b=S("./src/demux/demux-errors.js"),o={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},d={NETWORK_EXCEPTION:w.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:w.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:w.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:w.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:b.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:b.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:b.default.CODEC_UNSUPPORTED}},"./src/player/player-events.js":function(g,E,S){S.r(E);var w={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",DESTROYING:"destroying",PROGRESS:"progress"};E.default=w},"./src/remux/aac-silent.js":function(g,E,S){S.r(E);var w=function(){function b(){}return b.getSilentFrame=function(o,d){if(o==="mp4a.40.2"){if(d===1)return new Uint8Array([0,200,0,128,35,128]);if(d===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(d===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(d===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(d===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(d===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(d===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(d===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(d===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},b}();E.default=w},"./src/remux/mp4-generator.js":function(g,E,S){S.r(E);var w=function(o,d){for(var s=0,a=d.length,u=o.length;s<a;s++,u++)o[u]=d[s];return o},b=function(){function o(){}return o.init=function(){o.types={hvc1:[],hvcC:[],av01:[],av1C:[],avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pasp:[],".mp3":[],Opus:[],dOps:[]};for(var d in o.types)o.types.hasOwnProperty(d)&&(o.types[d]=[d.charCodeAt(0),d.charCodeAt(1),d.charCodeAt(2),d.charCodeAt(3)]);var s=o.constants={};s.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),s.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),s.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),s.STSC=s.STCO=s.STTS,s.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),s.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),s.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),s.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),s.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},o.box=function(d){for(var s=8,a=null,u=Array.prototype.slice.call(arguments,1),c=u.length,h=0;h<c;h++)s+=u[h].byteLength;a=new Uint8Array(s),a[0]=s>>>24&255,a[1]=s>>>16&255,a[2]=s>>>8&255,a[3]=s&255,a.set(d,4);for(var f=8,h=0;h<c;h++)a.set(u[h],f),f+=u[h].byteLength;return a},o.generateInitSegment=function(d){var s=o.box(o.types.ftyp,o.constants.FTYP),a=o.moov(d),u=new Uint8Array(s.byteLength+a.byteLength);return u.set(s,0),u.set(a,s.byteLength),u},o.moov=function(d){var s=o.mvhd(d.timescale,d.duration),a=o.trak(d),u=o.mvex(d);return o.box(o.types.moov,s,a,u)},o.mvhd=function(d,s){return o.box(o.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,d&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},o.trak=function(d){return o.box(o.types.trak,o.tkhd(d),o.mdia(d))},o.tkhd=function(d){var s=d.id,a=d.duration,u=d.presentWidth,c=d.presentHeight;return o.box(o.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,s&255,0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,u>>>8&255,u&255,0,0,c>>>8&255,c&255,0,0]))},o.mdia=function(d){return o.box(o.types.mdia,o.mdhd(d),o.hdlr(d),o.minf(d))},o.mdhd=function(d){var s=d.timescale,a=d.duration;return o.box(o.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,s&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,85,196,0,0]))},o.hdlr=function(d){var s=null;return d.type==="audio"?s=o.constants.HDLR_AUDIO:s=o.constants.HDLR_VIDEO,o.box(o.types.hdlr,s)},o.minf=function(d){var s=null;return d.type==="audio"?s=o.box(o.types.smhd,o.constants.SMHD):s=o.box(o.types.vmhd,o.constants.VMHD),o.box(o.types.minf,s,o.dinf(),o.stbl(d))},o.dinf=function(){var d=o.box(o.types.dinf,o.box(o.types.dref,o.constants.DREF));return d},o.stbl=function(d){var s=o.box(o.types.stbl,o.stsd(d),o.box(o.types.stts,o.constants.STTS),o.box(o.types.stsc,o.constants.STSC),o.box(o.types.stsz,o.constants.STSZ),o.box(o.types.stco,o.constants.STCO));return s},o.stsd=function(d){return d.type==="audio"?d.codec==="mp3"?o.box(o.types.stsd,o.constants.STSD_PREFIX,o.mp3(d)):d.codec==="opus"?o.box(o.types.stsd,o.constants.STSD_PREFIX,o.Opus(d)):o.box(o.types.stsd,o.constants.STSD_PREFIX,o.mp4a(d)):d.codec.startsWith("hvc1")?o.box(o.types.stsd,o.constants.STSD_PREFIX,o.hvc1(d)):d.codec.startsWith("av01")?o.box(o.types.stsd,o.constants.STSD_PREFIX,o.av01(d)):o.box(o.types.stsd,o.constants.STSD_PREFIX,o.avc1(d))},o.mp3=function(d){var s=d.channelCount,a=d.audioSampleRate,u=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,s,0,16,0,0,0,0,a>>>8&255,a&255,0,0]);return o.box(o.types[".mp3"],u)},o.mp4a=function(d){var s=d.channelCount,a=d.audioSampleRate,u=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,s,0,16,0,0,0,0,a>>>8&255,a&255,0,0]);return o.box(o.types.mp4a,u,o.esds(d))},o.Opus=function(d){var s=d.channelCount,a=d.audioSampleRate,u=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,s,0,16,0,0,0,0,a>>>8&255,a&255,0,0]);return o.box(o.types.Opus,u,o.dOps(d))},o.dOps=function(d){var s=d.channelCount,a=d.channelConfigCode,u=d.audioSampleRate;if(d.config)return o.box(o.types.dOps,d.config);var c=[];switch(a){case 1:case 2:c=[0];break;case 0:c=[255,1,1,0,1];break;case 128:c=[255,2,0,0,1];break;case 3:c=[1,2,1,0,2,1];break;case 4:c=[1,2,2,0,1,2,3];break;case 5:c=[1,3,2,0,4,1,2,3];break;case 6:c=[1,4,2,0,4,1,2,3,5];break;case 7:c=[1,4,2,0,4,1,2,3,5,6];break;case 8:c=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:c=[1,1,2,0,1];break;case 131:c=[1,1,3,0,1,2];break;case 132:c=[1,1,4,0,1,2,3];break;case 133:c=[1,1,5,0,1,2,3,4];break;case 134:c=[1,1,6,0,1,2,3,4,5];break;case 135:c=[1,1,7,0,1,2,3,4,5,6];break;case 136:c=[1,1,8,0,1,2,3,4,5,6,7];break}var h=new Uint8Array(w([0,s,0,0,u>>>24&255,u>>>17&255,u>>>8&255,u>>>0&255,0,0],c));return o.box(o.types.dOps,h)},o.esds=function(d){var s=d.config||[],a=s.length,u=new Uint8Array([0,0,0,0,3,23+a,0,1,0,4,15+a,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([a]).concat(s).concat([6,1,2]));return o.box(o.types.esds,u)},o.avc1=function(d){var s=d.avcc,a=d.codecWidth,u=d.codecHeight,c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,a&255,u>>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return o.box(o.types.avc1,c,o.box(o.types.avcC,s))},o.hvc1=function(d){var s=d.hvcc,a=d.codecWidth,u=d.codecHeight,c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,a&255,u>>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return o.box(o.types.hvc1,c,o.box(o.types.hvcC,s))},o.av01=function(d){var s=d.av1c,a=d.codecWidth||192,u=d.codecHeight||108,c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,a&255,u>>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return o.box(o.types.av01,c,o.box(o.types.av1C,s))},o.mvex=function(d){return o.box(o.types.mvex,o.trex(d))},o.trex=function(d){var s=d.id,a=new Uint8Array([0,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,s&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return o.box(o.types.trex,a)},o.moof=function(d,s){return o.box(o.types.moof,o.mfhd(d.sequenceNumber),o.traf(d,s))},o.mfhd=function(d){var s=new Uint8Array([0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,d&255]);return o.box(o.types.mfhd,s)},o.traf=function(d,s){var a=d.id,u=o.box(o.types.tfhd,new Uint8Array([0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,a&255])),c=o.box(o.types.tfdt,new Uint8Array([0,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,s&255])),h=o.sdtp(d),f=o.trun(d,h.byteLength+16+16+8+16+8+8);return o.box(o.types.traf,u,c,f,h)},o.sdtp=function(d){for(var s=d.samples||[],a=s.length,u=new Uint8Array(4+a),c=0;c<a;c++){var h=s[c].flags;u[c+4]=h.isLeading<<6|h.dependsOn<<4|h.isDependedOn<<2|h.hasRedundancy}return o.box(o.types.sdtp,u)},o.trun=function(d,s){var a=d.samples||[],u=a.length,c=12+16*u,h=new Uint8Array(c);s+=8+c,h.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,u&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255],0);for(var f=0;f<u;f++){var p=a[f].duration,m=a[f].size,l=a[f].flags,y=a[f].cts;h.set([p>>>24&255,p>>>16&255,p>>>8&255,p&255,m>>>24&255,m>>>16&255,m>>>8&255,m&255,l.isLeading<<2|l.dependsOn,l.isDependedOn<<6|l.hasRedundancy<<4|l.isNonSync,0,0,y>>>24&255,y>>>16&255,y>>>8&255,y&255],12+16*f)}return o.box(o.types.trun,h)},o.mdat=function(d){return o.box(o.types.mdat,d)},o}();b.init(),E.default=b},"./src/remux/mp4-remuxer.js":function(g,E,S){S.r(E);var w=S("./src/utils/logger.js"),b=S("./src/remux/mp4-generator.js"),o=S("./src/remux/aac-silent.js"),d=S("./src/utils/browser.js"),s=S("./src/core/media-segment-info.js"),a=S("./src/utils/exception.js"),u=function(){function c(h){this.TAG="MP4Remuxer",this._config=h,this._isLive=h.isLive===!0,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new s.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new s.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!!(d.default.chrome&&(d.default.version.major<50||d.default.version.major===50&&d.default.version.build<2661)),this._fillSilentAfterSeek=d.default.msedge||d.default.msie,this._mp3UseMpegAudio=!d.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return c.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},c.prototype.bindDataSource=function(h){return h.onDataAvailable=this.remux.bind(this),h.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(c.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(h){this._onInitSegment=h},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(h){this._onMediaSegment=h},enumerable:!1,configurable:!0}),c.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},c.prototype.seek=function(h){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},c.prototype.remux=function(h,f){if(!this._onMediaSegment)throw new a.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(h,f),f&&this._remuxVideo(f),h&&this._remuxAudio(h)},c.prototype._onTrackMetadataReceived=function(h,f){var p=null,m="mp4",l=f.codec;if(h==="audio")this._audioMeta=f,f.codec==="mp3"&&this._mp3UseMpegAudio?(m="mpeg",l="",p=new Uint8Array):p=b.default.generateInitSegment(f);else if(h==="video")this._videoMeta=f,p=b.default.generateInitSegment(f);else return;if(!this._onInitSegment)throw new a.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(h,{type:h,data:p.buffer,codec:l,container:h+"/"+m,mediaDuration:f.duration})},c.prototype._calculateDtsBase=function(h,f){this._dtsBaseInited||(h&&h.samples&&h.samples.length&&(this._audioDtsBase=h.samples[0].dts),f&&f.samples&&f.samples.length&&(this._videoDtsBase=f.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},c.prototype.getTimestampBase=function(){if(this._dtsBaseInited)return this._dtsBase},c.prototype.flushStashedSamples=function(){var h=this._videoStashedLastSample,f=this._audioStashedLastSample,p={type:"video",id:1,sequenceNumber:0,samples:[],length:0};h!=null&&(p.samples.push(h),p.length=h.length);var m={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};f!=null&&(m.samples.push(f),m.length=f.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(p,!0),this._remuxAudio(m,!0)},c.prototype._remuxAudio=function(h,f){if(this._audioMeta!=null){var p=h,m=p.samples,l=void 0,y=-1,x=-1,v=this._audioMeta.refSampleDuration,O=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,D=this._dtsBaseInited&&this._audioNextDts===void 0,A=!1;if(!(!m||m.length===0)&&!(m.length===1&&!f)){var L=0,R=null,M=0;O?(L=0,M=p.length):(L=8,M=8+p.length);var T=null;if(m.length>1&&(T=m.pop(),M-=T.length),this._audioStashedLastSample!=null){var k=this._audioStashedLastSample;this._audioStashedLastSample=null,m.unshift(k),M+=k.length}T!=null&&(this._audioStashedLastSample=T);var C=m[0].dts-this._dtsBase;if(this._audioNextDts)l=C-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())l=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(A=!0);else{var G=this._audioSegmentInfoList.getLastSampleBefore(C);if(G!=null){var K=C-(G.originalDts+G.duration);K<=3&&(K=0);var U=G.dts+G.duration+K;l=C-U}else l=0}if(A){var j=C-l,te=this._videoSegmentInfoList.getLastSegmentBefore(C);if(te!=null&&te.beginDts<j){var Q=o.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(Q){var X=te.beginDts,oe=j-te.beginDts;w.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+X+", duration: "+oe),m.unshift({unit:Q,dts:X,pts:X}),M+=Q.byteLength}}else A=!1}for(var W=[],V=0;V<m.length;V++){var k=m[V],z=k.unit,ue=k.dts-this._dtsBase,X=ue,ve=!1,ie=null,se=0;if(!(ue<-.001)){if(this._audioMeta.codec!=="mp3"&&v!=null){var Z=ue,Pe=3;if(this._audioNextDts&&(Z=this._audioNextDts),l=ue-Z,l<=-Pe*v){w.default.w(this.TAG,"Dropping 1 audio frame (originalDts: "+ue+" ms ,curRefDts: "+Z+" ms)  due to dtsCorrection: "+l+" ms overlap.");continue}else if(l>=Pe*v&&this._fillAudioTimestampGap&&!d.default.safari){ve=!0;var ke=Math.floor(l/v);w.default.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
`+("originalDts: "+ue+" ms, curRefDts: "+Z+" ms, ")+("dtsCorrection: "+Math.round(l)+" ms, generate: "+ke+" frames")),X=Math.floor(Z),se=Math.floor(Z+v)-X;var Q=o.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);Q==null&&(w.default.w(this.TAG,"Unable to generate silent frame for "+(this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame")),Q=z),ie=[];for(var Ie=0;Ie<ke;Ie++){Z=Z+v;var Ze=Math.floor(Z),Fe=Math.floor(Z+v)-Ze,Qe={dts:Ze,pts:Ze,cts:0,unit:Q,size:Q.byteLength,duration:Fe,originalDts:ue,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};ie.push(Qe),M+=Qe.size}this._audioNextDts=Z+v}else X=Math.floor(Z),se=Math.floor(Z+v)-X,this._audioNextDts=Z+v}else{if(X=ue-l,V!==m.length-1){var Oe=m[V+1].dts-this._dtsBase-l;se=Oe-X}else if(T!=null){var Oe=T.dts-this._dtsBase-l;se=Oe-X}else W.length>=1?se=W[W.length-1].duration:se=Math.floor(v);this._audioNextDts=X+se}y===-1&&(y=X),W.push({dts:X,pts:X,cts:0,unit:k.unit,size:k.unit.byteLength,duration:se,originalDts:ue,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),ve&&W.push.apply(W,ie)}}if(W.length===0){p.samples=[],p.length=0;return}O?R=new Uint8Array(M):(R=new Uint8Array(M),R[0]=M>>>24&255,R[1]=M>>>16&255,R[2]=M>>>8&255,R[3]=M&255,R.set(b.default.types.mdat,4));for(var V=0;V<W.length;V++){var z=W[V].unit;R.set(z,L),L+=z.byteLength}var xe=W[W.length-1];x=xe.dts+xe.duration;var be=new s.MediaSegmentInfo;be.beginDts=y,be.endDts=x,be.beginPts=y,be.endPts=x,be.originalBeginDts=W[0].originalDts,be.originalEndDts=xe.originalDts+xe.duration,be.firstSample=new s.SampleInfo(W[0].dts,W[0].pts,W[0].duration,W[0].originalDts,!1),be.lastSample=new s.SampleInfo(xe.dts,xe.pts,xe.duration,xe.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(be),p.samples=W,p.sequenceNumber++;var Ge=null;O?Ge=new Uint8Array:Ge=b.default.moof(p,y),p.samples=[],p.length=0;var ht={type:"audio",data:this._mergeBoxes(Ge,R).buffer,sampleCount:W.length,info:be};O&&D&&(ht.timestampOffset=y),this._onMediaSegment("audio",ht)}}},c.prototype._remuxVideo=function(h,f){if(this._videoMeta!=null){var p=h,m=p.samples,l=void 0,y=-1,x=-1,v=-1,O=-1;if(!(!m||m.length===0)&&!(m.length===1&&!f)){var D=8,A=null,L=8+h.length,R=null;if(m.length>1&&(R=m.pop(),L-=R.length),this._videoStashedLastSample!=null){var M=this._videoStashedLastSample;this._videoStashedLastSample=null,m.unshift(M),L+=M.length}R!=null&&(this._videoStashedLastSample=R);var T=m[0].dts-this._dtsBase;if(this._videoNextDts)l=T-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())l=0;else{var k=this._videoSegmentInfoList.getLastSampleBefore(T);if(k!=null){var C=T-(k.originalDts+k.duration);C<=3&&(C=0);var G=k.dts+k.duration+C;l=T-G}else l=0}for(var K=new s.MediaSegmentInfo,U=[],j=0;j<m.length;j++){var M=m[j],te=M.dts-this._dtsBase,Q=M.isKeyframe,X=te-l,oe=M.cts,W=X+oe;y===-1&&(y=X,v=W);var V=0;if(j!==m.length-1){var z=m[j+1].dts-this._dtsBase-l;V=z-X}else if(R!=null){var z=R.dts-this._dtsBase-l;V=z-X}else U.length>=1?V=U[U.length-1].duration:V=Math.floor(this._videoMeta.refSampleDuration);if(Q){var ue=new s.SampleInfo(X,W,V,M.dts,!0);ue.fileposition=M.fileposition,K.appendSyncPoint(ue)}U.push({dts:X,pts:W,cts:oe,units:M.units,size:M.length,isKeyframe:Q,duration:V,originalDts:te,flags:{isLeading:0,dependsOn:Q?2:1,isDependedOn:Q?1:0,hasRedundancy:0,isNonSync:Q?0:1}})}A=new Uint8Array(L),A[0]=L>>>24&255,A[1]=L>>>16&255,A[2]=L>>>8&255,A[3]=L&255,A.set(b.default.types.mdat,4);for(var j=0;j<U.length;j++)for(var ve=U[j].units;ve.length;){var ie=ve.shift(),se=ie.data;A.set(se,D),D+=se.byteLength}var Z=U[U.length-1];if(x=Z.dts+Z.duration,O=Z.pts+Z.duration,this._videoNextDts=x,K.beginDts=y,K.endDts=x,K.beginPts=v,K.endPts=O,K.originalBeginDts=U[0].originalDts,K.originalEndDts=Z.originalDts+Z.duration,K.firstSample=new s.SampleInfo(U[0].dts,U[0].pts,U[0].duration,U[0].originalDts,U[0].isKeyframe),K.lastSample=new s.SampleInfo(Z.dts,Z.pts,Z.duration,Z.originalDts,Z.isKeyframe),this._isLive||this._videoSegmentInfoList.append(K),p.samples=U,p.sequenceNumber++,this._forceFirstIDR){var Pe=U[0].flags;Pe.dependsOn=2,Pe.isNonSync=0}var ke=b.default.moof(p,y);p.samples=[],p.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(ke,A).buffer,sampleCount:U.length,info:K})}}},c.prototype._mergeBoxes=function(h,f){var p=new Uint8Array(h.byteLength+f.byteLength);return p.set(h,0),p.set(f,h.byteLength),p},c}();E.default=u},"./src/utils/browser.js":function(g,E,S){S.r(E);var w={};function b(){var o=self.navigator.userAgent.toLowerCase(),d=/(edge)\/([\w.]+)/.exec(o)||/(opr)[\/]([\w.]+)/.exec(o)||/(chrome)[ \/]([\w.]+)/.exec(o)||/(iemobile)[\/]([\w.]+)/.exec(o)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+)/.exec(o)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(o)||/(msie) ([\w.]+)/.exec(o)||o.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(o)||o.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(o)||[],s=/(ipad)/.exec(o)||/(ipod)/.exec(o)||/(windows phone)/.exec(o)||/(iphone)/.exec(o)||/(kindle)/.exec(o)||/(android)/.exec(o)||/(windows)/.exec(o)||/(mac)/.exec(o)||/(linux)/.exec(o)||/(cros)/.exec(o)||[],a={browser:d[5]||d[3]||d[1]||"",version:d[2]||d[4]||"0",majorVersion:d[4]||d[2]||"0",platform:s[0]||""},u={};if(a.browser){u[a.browser]=!0;var c=a.majorVersion.split(".");u.version={major:parseInt(a.majorVersion,10),string:a.version},c.length>1&&(u.version.minor=parseInt(c[1],10)),c.length>2&&(u.version.build=parseInt(c[2],10))}if(a.platform&&(u[a.platform]=!0),(u.chrome||u.opr||u.safari)&&(u.webkit=!0),u.rv||u.iemobile){u.rv&&delete u.rv;var h="msie";a.browser=h,u[h]=!0}if(u.edge){delete u.edge;var f="msedge";a.browser=f,u[f]=!0}if(u.opr){var p="opera";a.browser=p,u[p]=!0}if(u.safari&&u.android){var m="android";a.browser=m,u[m]=!0}u.name=a.browser,u.platform=a.platform;for(var l in w)w.hasOwnProperty(l)&&delete w[l];Object.assign(w,u)}b(),E.default=w},"./src/utils/exception.js":function(g,E,S){S.r(E),S.d(E,{RuntimeException:function(){return b},IllegalStateException:function(){return o},InvalidArgumentException:function(){return d},NotImplementedException:function(){return s}});var w=function(){var a=function(u,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(h[p]=f[p])},a(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(u,c);function h(){this.constructor=u}u.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}(),b=function(){function a(u){this._message=u}return Object.defineProperty(a.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),a.prototype.toString=function(){return this.name+": "+this.message},a}(),o=function(a){w(u,a);function u(c){return a.call(this,c)||this}return Object.defineProperty(u.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),u}(b),d=function(a){w(u,a);function u(c){return a.call(this,c)||this}return Object.defineProperty(u.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),u}(b),s=function(a){w(u,a);function u(c){return a.call(this,c)||this}return Object.defineProperty(u.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),u}(b)},"./src/utils/logger.js":function(g,E,S){S.r(E);var w=S("./node_modules/events/events.js"),b=S.n(w),o=function(){function d(){}return d.e=function(s,a){(!s||d.FORCE_GLOBAL_TAG)&&(s=d.GLOBAL_TAG);var u="["+s+"] > "+a;d.ENABLE_CALLBACK&&d.emitter.emit("log","error",u),d.ENABLE_ERROR&&(console.error?console.error(u):console.warn?console.warn(u):console.log(u))},d.i=function(s,a){(!s||d.FORCE_GLOBAL_TAG)&&(s=d.GLOBAL_TAG);var u="["+s+"] > "+a;d.ENABLE_CALLBACK&&d.emitter.emit("log","info",u),d.ENABLE_INFO&&(console.info?console.info(u):console.log(u))},d.w=function(s,a){(!s||d.FORCE_GLOBAL_TAG)&&(s=d.GLOBAL_TAG);var u="["+s+"] > "+a;d.ENABLE_CALLBACK&&d.emitter.emit("log","warn",u),d.ENABLE_WARN&&(console.warn?console.warn(u):console.log(u))},d.d=function(s,a){(!s||d.FORCE_GLOBAL_TAG)&&(s=d.GLOBAL_TAG);var u="["+s+"] > "+a;d.ENABLE_CALLBACK&&d.emitter.emit("log","debug",u),d.ENABLE_DEBUG&&(console.debug?console.debug(u):console.log(u))},d.v=function(s,a){(!s||d.FORCE_GLOBAL_TAG)&&(s=d.GLOBAL_TAG);var u="["+s+"] > "+a;d.ENABLE_CALLBACK&&d.emitter.emit("log","verbose",u),d.ENABLE_VERBOSE&&console.log(u)},d}();o.GLOBAL_TAG="flv.js",o.FORCE_GLOBAL_TAG=!1,o.ENABLE_ERROR=!0,o.ENABLE_INFO=!0,o.ENABLE_WARN=!0,o.ENABLE_DEBUG=!0,o.ENABLE_VERBOSE=!0,o.ENABLE_CALLBACK=!1,o.emitter=new(b()),E.default=o},"./src/utils/logging-control.js":function(g,E,S){S.r(E);var w=S("./node_modules/events/events.js"),b=S.n(w),o=S("./src/utils/logger.js"),d=function(){function s(){}return Object.defineProperty(s,"forceGlobalTag",{get:function(){return o.default.FORCE_GLOBAL_TAG},set:function(a){o.default.FORCE_GLOBAL_TAG=a,s._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(s,"globalTag",{get:function(){return o.default.GLOBAL_TAG},set:function(a){o.default.GLOBAL_TAG=a,s._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(s,"enableAll",{get:function(){return o.default.ENABLE_VERBOSE&&o.default.ENABLE_DEBUG&&o.default.ENABLE_INFO&&o.default.ENABLE_WARN&&o.default.ENABLE_ERROR},set:function(a){o.default.ENABLE_VERBOSE=a,o.default.ENABLE_DEBUG=a,o.default.ENABLE_INFO=a,o.default.ENABLE_WARN=a,o.default.ENABLE_ERROR=a,s._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(s,"enableDebug",{get:function(){return o.default.ENABLE_DEBUG},set:function(a){o.default.ENABLE_DEBUG=a,s._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(s,"enableVerbose",{get:function(){return o.default.ENABLE_VERBOSE},set:function(a){o.default.ENABLE_VERBOSE=a,s._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(s,"enableInfo",{get:function(){return o.default.ENABLE_INFO},set:function(a){o.default.ENABLE_INFO=a,s._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(s,"enableWarn",{get:function(){return o.default.ENABLE_WARN},set:function(a){o.default.ENABLE_WARN=a,s._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(s,"enableError",{get:function(){return o.default.ENABLE_ERROR},set:function(a){o.default.ENABLE_ERROR=a,s._notifyChange()},enumerable:!1,configurable:!0}),s.getConfig=function(){return{globalTag:o.default.GLOBAL_TAG,forceGlobalTag:o.default.FORCE_GLOBAL_TAG,enableVerbose:o.default.ENABLE_VERBOSE,enableDebug:o.default.ENABLE_DEBUG,enableInfo:o.default.ENABLE_INFO,enableWarn:o.default.ENABLE_WARN,enableError:o.default.ENABLE_ERROR,enableCallback:o.default.ENABLE_CALLBACK}},s.applyConfig=function(a){o.default.GLOBAL_TAG=a.globalTag,o.default.FORCE_GLOBAL_TAG=a.forceGlobalTag,o.default.ENABLE_VERBOSE=a.enableVerbose,o.default.ENABLE_DEBUG=a.enableDebug,o.default.ENABLE_INFO=a.enableInfo,o.default.ENABLE_WARN=a.enableWarn,o.default.ENABLE_ERROR=a.enableError,o.default.ENABLE_CALLBACK=a.enableCallback},s._notifyChange=function(){var a=s.emitter;if(a.listenerCount("change")>0){var u=s.getConfig();a.emit("change",u)}},s.registerListener=function(a){s.emitter.addListener("change",a)},s.removeListener=function(a){s.emitter.removeListener("change",a)},s.addLogListener=function(a){o.default.emitter.addListener("log",a),o.default.emitter.listenerCount("log")>0&&(o.default.ENABLE_CALLBACK=!0,s._notifyChange())},s.removeLogListener=function(a){o.default.emitter.removeListener("log",a),o.default.emitter.listenerCount("log")===0&&(o.default.ENABLE_CALLBACK=!1,s._notifyChange())},s}();d.emitter=new(b()),E.default=d},"./src/utils/polyfill.js":function(g,E,S){S.r(E);var w=function(){function b(){}return b.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(o,d){return o.__proto__=d,o},Object.assign=Object.assign||function(o){if(o==null)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(o),s=1;s<arguments.length;s++){var a=arguments[s];if(a!=null)for(var u in a)a.hasOwnProperty(u)&&(d[u]=a[u])}return d},String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(o,d){var s=d>0?d|0:0;return this.substring(s,s+o.length)===o}}),typeof self.Promise!="function"&&S("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},b}();w.install(),E.default=w},"./src/utils/typedarray-equality.js":function(g,E,S){S.r(E);function w(c){return c.byteOffset%2===0&&c.byteLength%2===0}function b(c){return c.byteOffset%4===0&&c.byteLength%4===0}function o(c,h){for(var f=0;f<c.length;f++)if(c[f]!==h[f])return!1;return!0}function d(c,h){return o(c,h)}function s(c,h){var f=new Uint16Array(c.buffer,c.byteOffset,c.byteLength/2),p=new Uint16Array(h.buffer,h.byteOffset,h.byteLength/2);return o(f,p)}function a(c,h){var f=new Uint32Array(c.buffer,c.byteOffset,c.byteLength/4),p=new Uint32Array(h.buffer,h.byteOffset,h.byteLength/4);return o(f,p)}function u(c,h){return c.byteLength!==h.byteLength?!1:b(c)&&b(h)?a(c,h):w(c)&&w(h)?s(c,h):d(c,h)}E.default=u},"./src/utils/utf8-conv.js":function(g,E,S){S.r(E);function w(o,d,s){var a=o;if(d+s<a.length){for(;s--;)if((a[++d]&192)!==128)return!1;return!0}else return!1}function b(o){for(var d=[],s=o,a=0,u=o.length;a<u;){if(s[a]<128){d.push(String.fromCharCode(s[a])),++a;continue}else if(!(s[a]<192)){if(s[a]<224){if(w(s,a,1)){var c=(s[a]&31)<<6|s[a+1]&63;if(c>=128){d.push(String.fromCharCode(c&65535)),a+=2;continue}}}else if(s[a]<240){if(w(s,a,2)){var c=(s[a]&15)<<12|(s[a+1]&63)<<6|s[a+2]&63;if(c>=2048&&(c&63488)!==55296){d.push(String.fromCharCode(c&65535)),a+=3;continue}}}else if(s[a]<248&&w(s,a,3)){var c=(s[a]&7)<<18|(s[a+1]&63)<<12|(s[a+2]&63)<<6|s[a+3]&63;if(c>65536&&c<1114112){c-=65536,d.push(String.fromCharCode(c>>>10|55296)),d.push(String.fromCharCode(c&1023|56320)),a+=4;continue}}}d.push("�"),++a}return d.join("")}E.default=b}},n={};function i(g){var E=n[g];if(E!==void 0)return E.exports;var S=n[g]={exports:{}};return r[g].call(S.exports,S,S.exports,i),S.exports}i.m=r,function(){i.n=function(g){var E=g&&g.__esModule?function(){return g.default}:function(){return g};return i.d(E,{a:E}),E}}(),function(){i.d=function(g,E){for(var S in E)i.o(E,S)&&!i.o(g,S)&&Object.defineProperty(g,S,{enumerable:!0,get:E[S]})}}(),function(){i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){i.o=function(g,E){return Object.prototype.hasOwnProperty.call(g,E)}}(),function(){i.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})}}();var _=i("./src/index.js");return _}()})})(Ts);var Ff=Ts.exports;const Uf=Ns(Ff);var mn=(e=>(e.single="单曲播放",e.singleCircle="单曲循环",e.listCircle="列表循环",e.random="随机播放",e))(mn||{});const Bf=js("player",{state:()=>({volume:1,mod:"single"}),getters:{gVolume:e=>e.volume,gMod:e=>e.mod,gModName:e=>mn[e.mod]},actions:{setVolume(e){this.volume=e},nextMod(){const e=Object.keys(mn);let t=e.findIndex(r=>r===this.mod);t=t<e.length-1?t+1:0,this.mod=e[t]}}});class Nf{constructor(){Yr(this,"listeners");this.listeners={}}add(t,r,n="all"){const i=this.listeners[n]||[];this.listeners[n]=[...i,r],document.body.addEventListener(t,r)}clean(t,r="all"){const n=this.listeners[r]||[];for(let i of n)document.body.removeEventListener(t,i)}}class jf{constructor(){Yr(this,"listeners");this.listeners={}}add(t,r,n="all"){const i=this.listeners[n]||[];this.listeners[n]=[...i,r],window.addEventListener(t,r)}clean(t,r="all"){const n=this.listeners[r]||[];for(let i of n)window.removeEventListener(t,i)}}const hi=new jf,Ut=new Nf,Wf={".3gp":"video/3gpp",".apk":"application/vnd.android.package-archive",".asf":"video/x-ms-asf",".avi":"video/x-msvideo",".bin":"application/octet-stream",".bmp":"image/bmp",".c":"text/plain",".class":"application/octet-stream",".conf":"text/plain",".cpp":"text/plain",".doc":"application/msword",".docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document",".xls":"application/vnd.ms-excel",".xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",".exe":"application/octet-stream",".gif":"image/gif",".gtar":"application/x-gtar",".gz":"application/x-gzip",".h":"text/plain",".htm":"text/html",".html":"text/html",".jar":"application/java-archive",".java":"text/plain",".jpeg":"image/jpeg",".jpg":"image/jpeg",".js":"application/x-javascript",".log":"text/plain",".m3u":"audio/x-mpegurl",".m4a":"audio/mp4a-latm",".m4b":"audio/mp4a-latm",".m4p":"audio/mp4a-latm",".m4u":"video/vnd.mpegurl",".m4v":"video/x-m4v",".mov":"video/quicktime",".mp2":"audio/x-mpeg",".mp3":"audio/x-mpeg",".mp4":"video/mp4",".mpc":"application/vnd.mpohun.certificate",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".msg":"application/vnd.ms-outlook",".ogg":"audio/ogg",".pdf":"application/pdf",".png":"image/png",".pps":"application/vnd.ms-powerpoint",".ppt":"application/vnd.ms-powerpoint",".pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation",".prop":"text/plain",".rc":"text/plain",".rmvb":"audio/x-pn-realaudio",".rtf":"application/rtf",".sh":"text/plain",".tar":"application/x-tar",".tgz":"application/x-compressed",".txt":"text/plain",".wav":"audio/x-wav",".wma":"audio/x-ms-wma",".wmv":"audio/x-ms-wmv",".wps":"application/vnd.ms-works",".xml":"text/plain",".z":"application/x-compress",".zip":"application/x-zip-compressed","":"/"},Yn=e=>{const t=e.replace(/.*(\..*)/,"$1").toLowerCase();return Wf[t]},Vf={key:0,src:ko,alt:""},Gf={class:"v-p-m-opts-t"},Yf={class:"v-p-m-opts-t-l"},Hf={class:"time"},Kf={class:"arrows"},zf=["title"],$f={class:"v-p-m-opts-t-r"},Xf={class:"time"},Jf=["value"],Zf={class:"progress-wrap"},Qf=["value","max"],qf=xt({__name:"VideoPlayer",props:{src:{},controls:{},forward:{default:"ArrowRight"},backward:{default:"ArrowLeft"},step:{default:1e4},prev:{},next:{}},emits:["destroy"],setup(e,{emit:t}){const r=Bf(),n=e,i=t,_=De(0),g=De(0),E=De(0),S=De(!1),w=De(!1),b=De(!1),o=De(0),d=De(0),s=De(!1),a=De({}),u=De(),c=gt("next"),h=pt(()=>Array.isArray(n.forward)?n.forward:[n.forward]),f=pt(()=>Array.isArray(n.backward)?n.backward:[n.backward]),p=pt(()=>s.value?Ws:Vs),m=pt(()=>S.value?Gs:Ys),l=pt(()=>/audio\//.test(Yn(n.src))),y=W=>Y.utc(W*1e3).format("HH:mm:ss"),x=()=>{var Z;const W=(Z=document.querySelector(".v-p-m"))==null?void 0:Z.parentElement;if(!W)return;if(l.value){a.value={width:"60%",maxWidth:"800px",height:"80%"};return}const{clientWidth:V,clientHeight:z}=W,{videoWidth:ue,videoHeight:ve}=u.value;let ie=Math.min(V,ue),se=Math.floor(ie*ve/ue);se>z&&(se=z,ie=Math.floor(se*ue/ve)),a.value={width:`${ie}px`,height:`${se}px`}},v=()=>{w.value=!0},O=()=>{w.value=!1},D=()=>{},A=()=>{S.value=!S.value,u.value.muted=S.value},L=()=>{u.value[s.value?"play":"pause"](),s.value=!s.value},R=()=>{const{duration:W,volume:V,muted:z,paused:ue}=u.value;_.value=W,E.value=V,S.value=z,s.value=ue,g.value=0,x()},M=W=>{E.value=W.target.volume,r.setVolume(W.target.volume)},T=()=>{var W;_.value&&(g.value=((W=u.value)==null?void 0:W.currentTime)||0)},k=W=>{u.value.volume=W.target.value},C=W=>{const{offsetX:V,target:z}=W,{clientWidth:ue}=z;u.value.currentTime=V/ue*_.value},G=()=>{c==null||c()},K=()=>{u.value.currentTime+=n.step/1e3},U=()=>{u.value.currentTime-=n.step/1e3},j=W=>{var V;/input|textarea/i.test(((V=document.activeElement)==null?void 0:V.nodeName)||"")||(W.code==="Space"&&L(),h.value.includes(W.code)&&K(),f.value.includes(W.code)&&U())},te=()=>{b.value=!0},Q=W=>{const{offsetX:V}=W,{clientWidth:z}=W.target;o.value=V,d.value=_.value*V/z},X=()=>{b.value=!1};return Hs(()=>n.src,async()=>{var V;if(await Js(),!n.src)return;(V=document.activeElement)==null||V.blur(),Ut.clean("keyup","videoPlayer"),Ut.add("keyup",j,"videoPlayer"),hi.clean("resize","videoPlayer"),hi.add("resize",x,"videoPlayer"),u.value&&(u.value.volume=r.gVolume);const W=Uf.createPlayer({type:/\.flv$/i.test(n.src)?"flv":"mp4",url:n.src});W.attachMediaElement(u.value),W.load()},{immediate:!0}),(W,V)=>(ge(),Ee("div",{class:zn(["v-p-m",{audio:l.value}]),style:Kn(a.value),onMouseenter:v,onMouseleave:O,onMouseover:D},[me("video",Ks({ref_key:"videoRef",ref:u},W.$attrs,{controlslist:"noplaybackrate",disablePictureInPicture:"true",onLoadeddata:R,onVolumechange:M,onTimeupdate:T,onEnded:G,onPause:V[0]||(V[0]=z=>s.value=!0),onPlay:V[1]||(V[1]=z=>s.value=!1)}),null,16),l.value?(ge(),Ee("img",Vf)):Kt("",!0),me("div",{class:zn(["v-p-m-opts",{active:_.value&&w.value||l.value}])},[me("div",Gf,[me("div",Yf,[wt(Ae(p),{onClick:L}),me("span",Hf,Ne(y(g.value))+"/"+Ne(y(_.value)),1),me("span",Kf,[W.prev?(ge(),Ee("i",{key:0,title:"上一个",onClick:V[2]||(V[2]=(...z)=>W.prev&&W.prev(...z))},[wt(Ae(zs))])):Kt("",!0),Ae(c)?(ge(),Ee("i",{key:1,title:"下一个",onClick:V[3]||(V[3]=(...z)=>Ae(c)&&Ae(c)(...z))},[wt(Ae($s))])):Kt("",!0)]),me("span",{class:"name",title:W.src},Ne(W.src),9,zf)]),me("div",$f,[me("span",Xf,Ne(E.value),1),me("input",{type:"range",value:E.value,min:"0",max:"1",step:"0.01",onInput:k},null,40,Jf),wt(Ae(m),{onClick:A}),wt(Ae(Xs),{onClick:V[4]||(V[4]=z=>i("destroy"))})])]),me("div",Zf,[b.value?(ge(),Ee("div",{key:0,class:"progress-tooltip",style:Kn(`left: ${o.value}px`)},Ne(y(d.value)),5)):Kt("",!0),me("progress",{value:g.value,max:_.value,onMouseenter:te,onMousemove:Q,onMouseleave:X,onClick:C},null,40,Qf)])],2)],38))}}),Cs=Et(qf,[["__scopeId","data-v-e0b4095c"]]),ec={class:"preview-video"},tc=xt({__name:"PreviewVideo",props:{current:{}},emits:["destroy"],setup(e,{emit:t}){const r=gt("prev"),n=gt("next"),i=De(),_=t;return(g,E)=>(ge(),Ee("div",ec,[wt(Cs,{ref_key:"videoPlayerVueRef",ref:i,src:g.current,prev:Ae(r),next:Ae(n),controls:"",autoplay:"",onClick:E[0]||(E[0]=er(()=>{},["stop"])),onDestroy:E[1]||(E[1]=S=>_("destroy"))},null,8,["src","prev","next"])]))}}),rc=Et(tc,[["__scopeId","data-v-a80e1f37"]]),nc={class:"preview-video"},ic=xt({__name:"PreviewAudio",props:{current:{}},emits:["destroy"],setup(e,{emit:t}){const r=gt("prev"),n=gt("next"),i=De(),_=t;return(g,E)=>(ge(),Ee("div",nc,[wt(Cs,{ref_key:"videoPlayerVueRef",ref:i,src:g.current,prev:Ae(r),next:Ae(n),controls:"",autoplay:"",onClick:E[0]||(E[0]=er(()=>{},["stop"])),onDestroy:E[1]||(E[1]=S=>_("destroy"))},null,8,["src","prev","next"])]))}}),sc=Et(ic,[["__scopeId","data-v-783bdbaa"]]),ac=e=>(Zs("data-v-45b7b78e"),e=e(),Qs(),e),oc=ac(()=>me("h1",null,"暂不支持该类型文件预览",-1)),lc={class:"current"},uc=xt({__name:"NotSupport",props:{current:{}},emits:["destroy"],setup(e,{emit:t}){const r=t;return(n,i)=>(ge(),Ee("div",{class:"wrapper",onClick:i[1]||(i[1]=_=>r("destroy"))},[me("div",{onClick:i[0]||(i[0]=er(()=>{},["stop"]))},[oc,me("div",lc,Ne(n.current),1)])]))}}),dc=Et(uc,[["__scopeId","data-v-45b7b78e"]]);function fc(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(i){i(r)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,r)})}}}const $t=fc(),cc={key:0,class:"preview-index"},hc=xt({__name:"Preview",setup(e){const t=De(),r=qs({index:0,list:[],keyEvent:{},hiddenIndex:!1,menus:[]}),n=pt(()=>r.list[r.index]||""),i=pt(()=>{if(n.value){const b=Yn(n.value.replace(/\?.*/,""))||"";if(/^image\//.test(b))return Po;if(/^video\//.test(b))return rc;if(/^audio\//.test(b))return sc}return dc}),_=b=>{const{keyEvent:o={}}=r;if(Object.keys(o).includes(b.code)){o[b.code](n.value);return}switch(b.code){case"Escape":E();break;case"ArrowLeft":S();break;case"ArrowRight":w();break;case"Digit1":ta(t.value.querySelector("img"));break}},g=()=>{Ut.clean("keyup","preview"),Ut.add("keyup",_,"preview")};$t.on("previewPayloadUpdate",b=>{for(let o in b)r[o]=b[o]});const E=gt("destroy",()=>{}),S=gt("prev",()=>{}),w=gt("next",()=>{});return pi(g),(b,o)=>(ge(),Ee("div",{ref_key:"previewRef",ref:t,class:"preview",tabindex:"1",onClick:o[1]||(o[1]=(...d)=>Ae(E)&&Ae(E)(...d))},[(ge(),mi(ea(i.value),{current:n.value,menus:r.menus,onDestroy:Ae(E),onClick:o[0]||(o[0]=er(()=>{},["stop"]))},null,40,["current","menus","onDestroy"])),r.hiddenIndex?Kt("",!0):(ge(),Ee("div",cc,Ne(r.index+1)+"/"+Ne(r.list.length),1))],512))}}),_c=Et(hc,[["__scopeId","data-v-f81c6dc7"]]),pc={name:"drag",options:{mounted(e){const t=e;t.style.cursor="move",t.style.position="absolute",t.addEventListener("mousedown",r=>{const n=r.clientX-t.offsetLeft,i=r.clientY-t.offsetTop;document.onmousemove=function(_){t.style.left=_.clientX-n+"px",t.style.top=_.clientY-i+"px"},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null},r.preventDefault()})}}};function qr(e){const{parentNode:t,naturalWidth:r}=e,{clientWidth:n,clientHeight:i}=t;e.style.width=`${n<r?n:r}px`,i<e.height&&(e.style.width=`${e.width*(i/e.height)}px`),e.style.left=`${(n-e.width)/2}px`,e.style.top=`${(i-e.height)/2}px`}function mc(e){return new Promise(t=>{e.style.width="0px",e.onload=()=>t()})}const vc={name:"wheel",options:{async mounted(e,t){if(e.nodeName!=="IMG")return;e.width===0&&await mc(e),qr(e);const r=Number(t.arg);e.addEventListener("mousewheel",n=>{const{wheelDelta:i,offsetX:_,offsetY:g}=n,{width:E,offsetLeft:S,offsetTop:w}=e,b=r&&r*(i/Math.abs(i))||i,o=_/E*b,d=g/E*b;E+b<10||(e.style.width=`${E+b}px`,e.style.left=`${S-o}px`,e.style.top=`${w-d}px`)}),e.addEventListener("load",()=>qr(e))},updated:e=>qr(e)}},gc=[pc,vc],yc={install(e){gc.forEach(t=>e.directive(t.name,t.options))}},_i=e=>/(video|audio)\//.test(Yn(e));let Ye=null,Pt=null;const Ps=document.querySelector("body"),en=()=>{const e=document.activeElement;Pt&&Ps.removeChild(Pt),e==null||e.focus(),Ye==null||Ye.unmount(),Ye=null,Ut.clean("keyup","videoPlayer"),Ut.clean("keyup","preview"),$t.off("previewPayloadUpdate")},et=e=>{if(Ye&&en(),!e.list.length)return;Pt=document.createElement("div"),Pt.setAttribute("data-v-preview",""),Ps.appendChild(Pt),Ye=ra(_c),Ye.use(yc);let{index:t,list:r}=e;const n=()=>{if(e.prev){e.prev();return}_i(r[t])||(t=(t||r.length)-1,$t.emit("previewPayloadUpdate",{index:t}))},i=()=>{if(e.next){e.next();return}_i(r[t])||(t=t<r.length-1?t+1:0,$t.emit("previewPayloadUpdate",{index:t}))};Ye.provide("destroy",en),Ye.provide("prev",n),Ye.provide("next",i),Ye.mount(Pt),et.prev=()=>n(),et.next=()=>i(),et.close=()=>en(),et.update=_=>{_.list&&(r=_.list),_.index&&(t=_.index),$t.emit("previewPayloadUpdate",_)},et.update(e)};et.prev=()=>{};et.next=()=>{};et.close=()=>{};et.update=()=>{};const xc={class:"collection-card"},Ec={class:"desc"},Sc={class:"preivew"},wc=["src","onClick"],bc={class:"links"},Rc=["href"],Oc=xt({__name:"CollectionCard",props:{item:{}},setup(e){const t=(r,n)=>{et({index:n,list:r.preview})};return(r,n)=>(ge(),Ee("div",xc,[me("h2",null,Ne(r.item.title),1),me("ul",Ec,[(ge(!0),Ee(dr,null,fr(r.item.description,i=>(ge(),Ee("li",null,Ne(i),1))),256))]),me("ul",Sc,[(ge(!0),Ee(dr,null,fr(r.item.preview,(i,_)=>(ge(),Ee("li",null,[me("img",{src:i,alt:"",onClick:g=>t(r.item,_)},null,8,wc)]))),256))]),me("ul",bc,[(ge(!0),Ee(dr,null,fr(r.item.links,i=>(ge(),Ee("li",null,[me("a",{href:i.value,target:"_blank"},Ne(i.label),9,Rc)]))),256))])]))}}),Ac=Et(Oc,[["__scopeId","data-v-0f754a31"]]),Lc=xt({__name:"Home",setup(e){const{t}=na(),r=De([]);return pi(async()=>{const i=await Se.get("/collection/collection.json");r.value=i.data}),(i,_)=>(ge(),Ee("div",null,[me("header",null,[me("h1",null,Ne(Ae(t)("Personal works")),1)]),(ge(!0),Ee(dr,null,fr(r.value,g=>(ge(),mi(Ac,{item:g},null,8,["item"]))),256))]))}}),Tc=Et(Lc,[["__scopeId","data-v-b2dbb571"]]);export{Tc as default};
